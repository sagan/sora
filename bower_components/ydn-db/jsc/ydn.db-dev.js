(function(){function k(){return function(){}}function s(a){return function(){return this[a]}}function aa(a){return function(){return a}}var t,u=this;function ba(a){a=a.split(".");for(var b=u,c;c=a.shift();)if(null!=b[c])b=b[c];else return null;return b}
function ca(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function v(a){return void 0!==a}function w(a){return"array"==ca(a)}function x(a){var b=ca(a);return"array"==b||"object"==b&&"number"==typeof a.length}function y(a){return"string"==typeof a}function da(a){return"boolean"==typeof a}function ea(a){return"number"==typeof a}function fa(a){return"function"==ca(a)}function B(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function ga(a){return a[ha]||(a[ha]=++ia)}
var ha="closure_uid_"+(1E9*Math.random()>>>0),ia=0;function ja(a,b,c){return a.call.apply(a.bind,arguments)}function ka(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function la(a,b,c){la=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ja:ka;return la.apply(null,arguments)}function ma(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var na=Date.now||function(){return+new Date};
function oa(a,b){var c=a.split("."),d=u;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d=d[e]?d[e]:d[e]={}:d[e]=b}function C(a,b){function c(){}c.prototype=b.prototype;a.p=b.prototype;a.prototype=new c};function pa(a){Error.captureStackTrace?Error.captureStackTrace(this,pa):this.stack=Error().stack||"";a&&(this.message=String(a))}C(pa,Error);pa.prototype.name="CustomError";function qa(a,b){for(var c=1;c<arguments.length;c++){var d=String(arguments[c]).replace(/\$/g,"$$$$");a=a.replace(/\%s/,d)}return a}function sa(a){return/^[\s\xa0]*$/.test(a)}function ta(a,b){return a.replace(/(\r\n|\r|\n)/g,b?"<br />":"<br>")}function ua(a){if(!va.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(wa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(xa,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(ya,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Aa,"&quot;"));return a}
var wa=/&/g,xa=/</g,ya=/>/g,Aa=/\"/g,va=/[&<>\"]/;function Ba(a){return ta(a.replace(/  /g," &#160;"),void 0)}function Ca(a,b){for(var c=b.length,d=0;d<c;d++){var e=1==c?b:b.charAt(d);if(a.charAt(0)==e&&a.charAt(a.length-1)==e)return a.substring(1,a.length-1)}return a}var Da={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\"},Ea={"'":"\\'"};
function Fa(a){a=String(a);if(a.quote)return a.quote();for(var b=['"'],c=0;c<a.length;c++){var d=a.charAt(c),e=d.charCodeAt(0),f=b,g=c+1,h;if(!(h=Da[d])){if(!(31<e&&127>e))if(d in Ea)d=Ea[d];else if(d in Da)d=Ea[d]=Da[d];else{e=d;h=d.charCodeAt(0);if(31<h&&127>h)e=d;else{if(256>h){if(e="\\x",16>h||256<h)e+="0"}else e="\\u",4096>h&&(e+="0");e+=h.toString(16).toUpperCase()}d=Ea[d]=e}h=d}f[g]=h}b.push('"');return b.join("")};function Ga(a,b){b.unshift(a);pa.call(this,qa.apply(null,b));b.shift()}C(Ga,pa);Ga.prototype.name="AssertionError";function Ha(a,b){throw new Ga("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};var Ia=Array.prototype,Ja=Ia.indexOf?function(a,b,c){return Ia.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(y(a))return y(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Ka=Ia.forEach?function(a,b,c){Ia.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=y(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},La=Ia.map?function(a,b,c){return Ia.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=
y(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e},Ma=Ia.some?function(a,b,c){return Ia.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=y(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};function Na(a,b){var c=Oa(a,b,void 0);return 0>c?null:y(a)?a.charAt(c):a[c]}function Oa(a,b,c){for(var d=a.length,e=y(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return f;return-1}
function Pa(a){if(!w(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function Qa(a,b){var c=Ja(a,b),d;(d=0<=c)&&Ia.splice.call(a,c,1);return d}function Ra(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function Sa(a,b,c){return 2>=arguments.length?Ia.slice.call(a,b):Ia.slice.call(a,b,c)}function Ta(a,b){if(!x(a)||!x(b)||a.length!=b.length)return!1;for(var c=a.length,d=Ua,e=0;e<c;e++)if(!d(a[e],b[e]))return!1;return!0}function Ua(a,b){return a===b};function Va(a){return function(){throw a;}};/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
function D(a,b){this.f=[];this.u=b||null}t=D.prototype;t.Ha=!1;t.Ia=!1;t.wb=!1;t.oc=!1;t.cc=!1;t.pc=0;t.Sb=function(a,b){this.wb=!1;Wa(this,a,b)};function Wa(a,b,c){a.Ha=!0;a.g=c;a.Ia=!b;Xa(a)}function Ya(a){if(a.Ha){if(!a.cc)throw new Za;a.cc=!1}}t.r=function(a){Ya(this);Wa(this,!0,a)};t.o=function(a){Ya(this);Wa(this,!1,a)};t.aa=function(a,b){return this.S(a,null,b)};t.Qb=function(a,b){return this.S(null,a,b)};t.sb=function(a,b){return this.S(a,a,b)};
t.S=function(a,b,c){this.f.push([a,b,c]);this.Ha&&Xa(this);return this};function $a(a){return Ma(a.f,function(a){return fa(a[1])})}
function Xa(a){a.h&&a.Ha&&$a(a)&&(u.clearTimeout(a.h),delete a.h);a.l&&(a.l.pc--,delete a.l);for(var b=a.g,c=!1,d=!1;a.f.length&&!a.wb;){var e=a.f.shift(),f=e[0],g=e[1],e=e[2];if(f=a.Ia?g:f)try{var h=f.call(e||a.u,b);v(h)&&(a.Ia=a.Ia&&(h==b||h instanceof Error),a.g=b=h);b instanceof D&&(d=!0,a.wb=!0)}catch(l){b=l,a.Ia=!0,$a(a)||(c=!0)}}a.g=b;d&&(b.S(la(a.Sb,a,!0),la(a.Sb,a,!1)),b.oc=!0);c&&(a.h=u.setTimeout(Va(b),0))}function ab(a){var b=new D;b.r(a);return b}
function bb(a){Error.captureStackTrace?Error.captureStackTrace(this,bb):this.stack=Error().stack||"";a&&(this.message=String(a))}C(bb,Error);function Za(){bb.call(this)}C(Za,bb);Za.prototype.message="Deferred has already fired";Za.prototype.name="AlreadyCalledError";D.prototype.done=D.prototype.aa;D.prototype.fail=D.prototype.Qb;D.prototype.then=D.prototype.S;D.prototype.always=D.prototype.sb;function cb(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function db(a,b){for(var c=x(b),d=c?b:arguments,c=c?0:1;c<d.length&&(a=a[d[c]],v(a));c++);return a}var eb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<eb.length;f++)c=eb[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var gb="StopIteration"in u?u.StopIteration:Error("StopIteration");function hb(){}hb.prototype.a=function(){throw gb;};hb.prototype.rb=function(){return this};function ib(a){if(a instanceof hb)return a;if("function"==typeof a.rb)return a.rb(!1);if(x(a)){var b=0,c=new hb;c.a=function(){for(;;){if(b>=a.length)throw gb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function jb(a,b){if(x(a))try{Ka(a,b,void 0)}catch(c){if(c!==gb)throw c;}else{a=ib(a);try{for(;;)b.call(void 0,a.a(),void 0,a)}catch(d){if(d!==gb)throw d;}}};function kb(a,b){this.b={};this.a=[];var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)mb(this,arguments[d],arguments[d+1])}else if(a){var e;if(a instanceof kb)e=a.ua(),d=a.Za();else{var c=[],f=0;for(e in a)c[f++]=e;e=c;c=[];f=0;for(d in a)c[f++]=a[d];d=c}for(c=0;c<e.length;c++)mb(this,e[c],d[c])}}t=kb.prototype;t.t=0;t.$a=0;t.Bb=s("t");t.Za=function(){nb(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.b[this.a[b]]);return a};
t.ua=function(){nb(this);return this.a.concat()};t.clear=function(){this.b={};this.$a=this.t=this.a.length=0};function nb(a){if(a.t!=a.a.length){for(var b=0,c=0;b<a.a.length;){var d=a.a[b];Object.prototype.hasOwnProperty.call(a.b,d)&&(a.a[c++]=d);b++}a.a.length=c}if(a.t!=a.a.length){for(var e={},c=b=0;b<a.a.length;)d=a.a[b],Object.prototype.hasOwnProperty.call(e,d)||(a.a[c++]=d,e[d]=1),b++;a.a.length=c}}t.get=function(a,b){return Object.prototype.hasOwnProperty.call(this.b,a)?this.b[a]:b};
function mb(a,b,c){Object.prototype.hasOwnProperty.call(a.b,b)||(a.t++,a.a.push(b),a.$a++);a.b[b]=c}t.ta=function(){return new kb(this)};t.rb=function(a){nb(this);var b=0,c=this.a,d=this.b,e=this.$a,f=this,g=new hb;g.a=function(){for(;;){if(e!=f.$a)throw Error("The map has changed since the iterator was created");if(b>=c.length)throw gb;var g=c[b++];return a?g:d[g]}};return g};var ob,pb,qb,rb;function sb(){return u.navigator?u.navigator.userAgent:null}rb=qb=pb=ob=!1;var tb;if(tb=sb()){var ub=u.navigator;ob=0==tb.indexOf("Opera");pb=!ob&&-1!=tb.indexOf("MSIE");qb=!ob&&-1!=tb.indexOf("WebKit");rb=!ob&&!qb&&"Gecko"==ub.product}var vb=ob,wb=pb,xb=rb,yb=qb;function zb(){var a=u.document;return a?a.documentMode:void 0}var Ab;
a:{var Bb="",Cb;if(vb&&u.opera)var Fb=u.opera.version,Bb="function"==typeof Fb?Fb():Fb;else if(xb?Cb=/rv\:([^\);]+)(\)|;)/:wb?Cb=/MSIE\s+([^\);]+)(\)|;)/:yb&&(Cb=/WebKit\/(\S+)/),Cb)var Gb=Cb.exec(sb()),Bb=Gb?Gb[1]:"";if(wb){var Hb=zb();if(Hb>parseFloat(Bb)){Ab=String(Hb);break a}}Ab=Bb}var Ib={};
function Jb(a){var b;if(!(b=Ib[a])){b=0;for(var c=String(Ab).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",h=d[f]||"",l=RegExp("(\\d*)(\\D*)","g"),n=RegExp("(\\d*)(\\D*)","g");do{var m=l.exec(g)||["","",""],p=n.exec(h)||["","",""];if(0==m[0].length&&0==p[0].length)break;b=((0==m[1].length?0:parseInt(m[1],10))<(0==p[1].length?0:parseInt(p[1],10))?-1:(0==m[1].length?0:parseInt(m[1],
10))>(0==p[1].length?0:parseInt(p[1],10))?1:0)||((0==m[2].length)<(0==p[2].length)?-1:(0==m[2].length)>(0==p[2].length)?1:0)||(m[2]<p[2]?-1:m[2]>p[2]?1:0)}while(0==b)}b=Ib[a]=0<=b}return b}var Kb=u.document,Lb=Kb&&wb?zb()||("CSS1Compat"==Kb.compatMode?parseInt(Ab,10):5):void 0;function Mb(a){return Nb(a||arguments.callee.caller,[])}
function Nb(a,b){var c=[];if(0<=Ja(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(Ob(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){0<e&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=Ob(f))?f:"[fn]";break;default:f=typeof f}40<f.length&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(Nb(a.caller,b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function Ob(a){if(Pb[a])return Pb[a];a=String(a);if(!Pb[a]){var b=/function ([^\(]+)/.exec(a);Pb[a]=b?b[1]:"[Anonymous]"}return Pb[a]}var Pb={};function Qb(a,b,c,d,e){"number"==typeof e||Rb++;this.g=d||na();this.f=a;this.e=b;this.d=c;delete this.b;delete this.a}Qb.prototype.b=null;Qb.prototype.a=null;var Rb=0;function Sb(a){this.f=a}Sb.prototype.d=null;Sb.prototype.b=null;Sb.prototype.e=null;Sb.prototype.a=null;function Tb(a,b){this.name=a;this.value=b}Tb.prototype.toString=s("name");var Ub=new Tb("SHOUT",1200),Vb=new Tb("SEVERE",1E3),Wb=new Tb("WARNING",900),Xb=new Tb("INFO",800),Yb=new Tb("CONFIG",700),Zb=new Tb("FINE",500),$b=new Tb("FINER",400),ac=new Tb("FINEST",300),bc=[new Tb("OFF",Infinity),Ub,Vb,Wb,Xb,Yb,Zb,$b,ac,new Tb("ALL",0)],cc=null;Sb.prototype.getName=s("f");
function dc(a){if(a.b)return a.b;if(a.d)return dc(a.d);Ha("Root logger has no level set.");return null}Sb.prototype.log=function(a,b,c){if(a.value>=dc(this).value)for(a=this.g(a,b,c),b="log:"+a.e,u.console&&(u.console.timeStamp?u.console.timeStamp(b):u.console.markTimeline&&u.console.markTimeline(b)),u.msWriteProfilerMark&&u.msWriteProfilerMark(b),b=this;b;){c=b;var d=a;if(c.a)for(var e=0,f=void 0;f=c.a[e];e++)f(d);b=b.d}};
Sb.prototype.g=function(a,b,c){var d=new Qb(a,String(b),this.f);if(c){d.b=c;var e;var f=arguments.callee.caller;try{var g;var h=ba("window.location.href");if(y(c))g={message:c,name:"Unknown error",lineNumber:"Not available",fileName:h,stack:"Not available"};else{var l,n,m=!1;try{l=c.lineNumber||c.Qc||"Not available"}catch(p){l="Not available",m=!0}try{n=c.fileName||c.filename||c.sourceURL||u.$googDebugFname||h}catch(q){n="Not available",m=!0}g=!m&&c.lineNumber&&c.fileName&&c.stack?c:{message:c.message,
name:c.name,lineNumber:l,fileName:n,stack:c.stack||"Not available"}}e="Message: "+ua(g.message)+'\nUrl: <a href="view-source:'+g.fileName+'" target="_new">'+g.fileName+"</a>\nLine: "+g.lineNumber+"\n\nBrowser stack:\n"+ua(g.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+ua(Mb(f)+"-> ")}catch(r){e="Exception trying to expose exception! You win, we lose. "+r}d.a=e}return d};function ec(a,b){a.log(Vb,b,void 0)}function F(a,b){a.log(Wb,b,void 0)}function fc(a,b){a.log(Zb,b,void 0)}
function G(a,b){a.log($b,b,void 0)}function H(a,b){a.log(ac,b,void 0)}var gc={},hc=null;function ic(){hc||(hc=new Sb(""),gc[""]=hc,hc.b=Yb)}function jc(){ic();return hc}function J(a){ic();var b;if(!(b=gc[a])){b=new Sb(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=J(a.substr(0,c));c.e||(c.e={});c.e[d]=b;b.d=c;gc[a]=b}return b};function kc(a,b){D.call(this,0,b);this.a=[]}C(kc,D);kc.prototype.r=function(a){this.a.length=0;kc.p.r.call(this,a)};kc.prototype.o=function(a){this.a.length=0;kc.p.o.call(this,a)};var lc={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange"},mc=u.IDBRequest&&"LOADING"in u.IDBRequest?u.IDBTransaction:u.webkitIDBRequest&&"LOADING"in u.webkitIDBRequest&&1===u.webkitIDBTransaction.READ_WRITE?u.webkitIDBTransaction:lc,nc=mc.READ_ONLY,K=mc.READ_WRITE,oc=mc.VERSION_CHANGE,pc=u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.moz_indexedDB||u.msIndexedDB;function qc(a,b){var c,d;2==arguments.length&&y(arguments[1])?(c=!0,d=arguments[1].split(".")):d=(c=x(b))?b:arguments;for(c=c?0:1;c<d.length&&(a=a[d[c]],v(a));c++);return a}var rc={};
function sc(a){var b=[a];a=new tc;for(var c=0,d,e;void 0!==(e=b.pop());){0===c%4&&12<c+4&&(a.write(c),c=0);d=typeof e;if(e instanceof Array)if(c+=4,0<e.length){b.push(rc);for(d=e.length;d--;)b.push(e[d]);continue}else a.write(c);else if("number"===d)c+=1,a.write(c),uc(a,e);else if(e instanceof Date)c+=2,a.write(c),uc(a,e.valueOf());else if("string"===d){c+=3;a.write(c);c=a;for(d=0;d<e.length;d++){var f=e.charCodeAt(d);126>=f?c.write(f+1):16510>=f?(f-=127,c.write(128|f>>8,f&255)):c.write(192|f>>10,
f>>2|255,(f|3)<<6)}c.write(0)}else if(e===rc)a.write(0);else return"";c=0}for(b=a.a.length;"00"===a.a[--b];);a.a.length=++b;return a.toString()}function vc(a){for(var b=[],c=b,d=[],e,f,g=new wc(a);null!=xc(g);)if(0===g.a)c=d.pop();else{if(null===g.a)break;do{e=g.a/4|0;a=g.a%4;for(var h=0;h<e;h++)f=[],c.push(f),d.push(c),c=f;if(0===a&&12<g.a+4)xc(g);else break}while(1);1===a?c.push(yc(g)):2===a?c.push(new Date(yc(g))):3===a?c.push(zc(g)):0===a&&(c=d.pop())}return b[0]}
function uc(a,b){var c,d,e;c=b;var f=e=d=0;if(0!==c)if(isFinite(c)){0>c&&(d=1,c=-c);f=0;if(2.2250738585072014E-308<=c){for(e=c;1>e;)f--,e*=2;for(;2<=e;)f++,e/=2;e=f+1023}f=e?Math.floor(4503599627370496*(c/Math.pow(2,f)-1)):Math.floor(c/4.9E-324)}else e=2047,isNaN(c)?f=0x8000000000000:-Infinity===c&&(d=1);c=d;d=e;e=f;c&&(e=0xfffffffffffff-e,d=2047-d);a.write((c?0:128)|d>>4);a.write((d&15)<<4|0|e/281474976710656);e%=281474976710656;c=0|e/4294967296;a.write(c>>8,c&255);e%=4294967296;c=0|e/65536;a.write(c>>
8,c&255);c=e%65536;a.write(c>>8,c&255)}function yc(a){var b=xc(a)|0,c=b>>7?!1:!0,d=c?-1:1,e=(b&127)<<4,b=xc(a)|0,e=e+(b>>4);c&&(e=2047-e);for(var b=[c?15-(b&15):b&15],f=6;f--;)b.push(c?255-(xc(a)|0):xc(a)|0);a=0;for(f=7;f--;)a=a/256+b[f];a/=16;return 0===a&&0===e?0:(a+1)*Math.pow(2,e-1023)*d}
function zc(a){for(var b=[],c=0,d=0,e=0,f,g;;){f=xc(a);if(0===f||null==f)break;0===c?(g=f>>6,2>g&&!isNaN(f)?b.push(String.fromCharCode(f-1)):(c=g,d=f<<10,e++)):2===c?(b.push(String.fromCharCode(d+f+127)),c=d=e=0):2===e?(d+=f<<2,e++):(b.push(String.fromCharCode(d|f>>6)),c=d=e=0)}return b.join("")}function wc(a){this.a=null;this.b=a;this.d=this.b.length-1;this.index=-1}function xc(a){return a.a=a.index<a.d?parseInt(a.b[++a.index]+a.b[++a.index],16):null}function tc(){this.a=[];this.b=void 0}
tc.prototype.write=function(a){for(var b=0;b<arguments.length;b++)this.b=arguments[b].toString(16),this.a.push(2===this.b.length?this.b:this.b="0"+this.b)};tc.prototype.toString=function(){return this.a.length?this.a.join(""):""};function Ac(a,b){var c=sc(a),d=sc(b);return c>d?1:c==d?0:-1};var M=pc&&pc.cmp?la(pc.cmp,pc):Ac,Bc=[];function N(a){pa.call(this,a);this.name="ydn.error.ArgumentException"}C(N,pa);function Cc(a){pa.call(this,a);this.name="ydn.error.NotSupportedException"}C(Cc,pa);function Dc(a){pa.call(this,a);this.name="ydn.error.NotImplementedException"}C(Dc,pa);function Ec(a){pa.call(this,a);this.name="ydn.error.InvalidOperationException"}C(Ec,pa);
function Fc(a){Error.captureStackTrace?Error.captureStackTrace(this,Fc):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InternalError"}C(Fc,Error);Fc.prototype.name="ydn.error.InternalError";J("ydn.db.Cursor");function O(a,b,c,d){this.lower=a;this.upper=b;this.lowerOpen=!!c;this.upperOpen=!!d;fa(Object.freeze)&&Object.freeze(this)}O.prototype.lower=void 0;O.prototype.upper=void 0;O.prototype.toJSON=function(){return Gc(this)};function Hc(a){return Ic(a)}O.only=function(a){return new O(a,a,!1,!1)};O.bound=function(a,b,c,d){return new O(a,b,c,d)};O.upperBound=function(a,b){return new O(void 0,a,void 0,!!b)};O.lowerBound=function(a,b){return new O(a,void 0,!!b,void 0)};
function Jc(a){var b;if(w(a))b=Ra(a),b.push("\uffff");else if(y(a))b=a+"\uffff";else return O.only(a);return O.bound(a,b,!1,!0)}function Gc(a){a=a||{};return{lower:a.lower,upper:a.upper,lowerOpen:a.lowerOpen,upperOpen:a.upperOpen}}function Ic(a){return null!=a?null!=a.upper&&null!=a.lower?Kc.bound(a.lower,a.upper,!!a.lowerOpen,!!a.upperOpen):null!=a.upper?Kc.upperBound(a.upper,a.upperOpen):null!=a.lower?Kc.lowerBound(a.lower,a.lowerOpen):null:null}
function Lc(a){if(a instanceof O)return"";if(null!=a){if(B(a)){for(var b in a)if(a.hasOwnProperty(b)&&!(0<=Ja(["lower","upper","lowerOpen","upperOpen"],b)))return'invalid attribute "'+b+'" in key range object';return""}return"key range must be an object"}return""}
O.prototype.vb=function(a){var b=this.lower,c=this.upper,d=this.lowerOpen,e=this.upperOpen;null!=a.lower&&(null==this.lower||a.lower>=this.lower)&&(b=a.lower,d=a.lowerOpen||this.lowerOpen);null!=a.upper&&(null==this.upper||a.upper<=this.upper)&&(c=a.upper,e=a.upperOpen||this.upperOpen);return O.bound(b,c,d,e)};function Mc(a){if(!a)return"";var b=a.lowerOpen?"(":"[";null!=a.lower&&(b+=a.lower+", ");null!=a.upper&&(b+=a.upper);return b+=a.upperOpen?")":"]"}
function Nc(a,b,c,d,e){if(c)if(c.lowerOpen||c.upperOpen||null==c.lower||null==c.upper||0!==M(c.lower,c.upper)){if(null!=c.lower){var f=c.lowerOpen?" > ":" >= ";d.push(a+f+"?");e.push(Oc(c.lower,b))}null!=c.upper&&(f=c.upperOpen?" < ":" <= ",d.push(a+f+"?"),e.push(Oc(c.upper,b)))}else d.push(a+" = ?"),e.push(Oc(c.lower,b))}
function Pc(a,b,c,d){var e,f,g,h;if("starts"==a||"^"==a)return Jc(b);if("<"==a||"<="==a)e=b,g="<"==a;else if(">"==a||">="==a)f=b,h=">"==a;else if("="==a||"=="==a)e=f=b;else throw new N("invalid op: "+a);if("<"==c||"<="==c)e=d,g="<"==c;else if(">"==c||">="==c)f=d,h=">"==c;else if(v(c))throw new N("invalid op2: "+c);return O.bound(f,e,h,g)}var Kc=u.IDBKeyRange||u.webkitIDBKeyRange||O;function Qc(a,b,c,d,e){if(!(b instanceof O))if(y(b)&&v(c))b=Pc(b,c,d,e);else if(null!=b){if(!(b instanceof O))if(B(b))b=new O(b.lower,b.upper,b.lowerOpen,b.upperOpen);else throw new N("Invalid key range: "+b+" of type "+typeof b);}else b=null;this.a=b;this.qa=a}Qc.prototype.qa="";Qc.prototype.vb=function(a){if(this.qa!=a.qa)return null;a=null!=this.a&&null!=a.a?this.a.vb(a.a):this.a||a.a;return new Qc(this.qa,a)};function P(a,b,c,d,e,f,g){if(!y(a))throw new TypeError("store name");this.a=a;this.f=b;this.h=g;this.e=!!this.f;if(v(d)&&!da(d))throw new N("reverse value must be a boolean, but "+typeof d+" found");if(v(e)&&!da(e))throw new N("unique value must be a boolean, but "+typeof e+" found");if(v(f)&&!da(f))throw new N("key_only value must be a boolean, but "+typeof f+" found");this.b=v(f)?f:!!y(this.f);a="next";d&&e?a="prevunique":d?a="prev":e&&(a="nextunique");this.i=a;if(d=Lc(c))throw new N("Invalid key range: "+
d);this.d=Ic(c);this.g=Rc}P.prototype.b=!0;function Sc(a,b,c){if(3<arguments.length)throw new N("too many argument");P.call(this,a,void 0,b,c,void 0,!0)}C(Sc,P);function Tc(a,b,c,d,e){if(!y(b))throw new N("index name must be string");P.call(this,a,b,c,d,e,!0)}C(Tc,P);function Uc(a,b,c){if(3<arguments.length)throw new N("too many argument");P.call(this,a,void 0,b,c,void 0,!1)}C(Uc,P);function Vc(a,b,c,d,e){return new Uc(a,Pc(b,c,d,e))}
function Wc(a,b,c,d,e){if(!y(b))throw new N("index name must be string");P.call(this,a,b,c,d,e,!1)}C(Wc,P);function Xc(a,b,c,d,e,f){return new Wc(a,b,Pc(c,d,e,f))}var Rc="init";t=P.prototype;t.c=J("ydn.db.Iterator");t.Ec=s("a");t.F=s("f");t.Ub=s("d");t.Na=function(){return this.d?this.d instanceof Kc?this.d:Kc.bound(this.d.lower,this.d.upper,this.d.lowerOpen,this.d.upperOpen):null};t.Fc=s("b");t.vc=s("e");t.ta=function(){return new P(this.a,this.f,this.d,this.P(),this.Q(),this.b,this.h)};
t.unique=function(a){return new P(this.a,this.f,this.d,this.P(),a,this.b,this.h)};t.toJSON=function(){return{store:this.a,index:this.f,keyRange:this.d?Gc(this.d):null,direction:this.i}};t.toString=function(){var a=v(this.h)?":"+this.h.join(","):v(this.f)?":"+this.f:"",a=a+Mc(this.d);this.g!=Rc&&(a+=this.g+"{"+this.l,this.e&&(a+=", "+this.s),a+="}");var b=this.e?"Index":"",b=b+(this.b?"Key":"Value");return b+"Iterator:"+this.a+a};
t.Gc=function(){new P(this.a,this.f,this.d,this.P(),this.Q(),this.b,this.h);throw Error("not possible");};t.reverse=function(){return new P(this.a,this.f,this.d,!this.P(),this.Q(),this.b,this.h)};t.P=function(){return"prev"===this.i||"prevunique"===this.i};t.Q=function(){return"nextunique"===this.i||"prevunique"===this.i};t.uc=s("g");
t.load=function(a){a.Nb(this.a,this.h||this.f,this.d,this.i,this.b);this.g="busy";var b=this;a.bc=function(a,d,e){b.l=d;b.s=e;b.g=a?"rest":"done"};a.openCursor(this.l,this.s)};t.Cc=s("l");t.Dc=s("s");t.fc=function(a,b,c){a=a||Rc;"busy"==this.g?F(this.c,this+": resetting state to "+a+" ignore during iteration"):(this.l=b,this.s=c,this.g=a)};t.stores=function(){var a=[this.a];if(this.u)for(var b=0;b<this.u.length;b++)0<=Ja(a,this.u[b].k)||a.push(this.u[b].k);return a};function Yc(a,b,c,d){if("transaction"in a)this.h=a,this.d=this.f=null;else if("objectStore"in a){if(this.h=null,this.f=a.db,this.d=a,!this.d.db.objectStoreNames.contains(b))throw new Zc('store "'+b+'" not in transaction.');}else throw new Zc("storage instance require.");this.i=b;this.l=c;this.s=d;this.b=[];this.a=0;this.e=!1}Yc.prototype.c=J("ydn.db.con.IdbCursorStream");Yc.prototype.e=!1;Yc.prototype.b=[];
function $c(a,b){a.a++;b.onsuccess=function(b){if(b=b.target.result){if(fa(a.s)){var d=b.value;a.s(b.primaryKey,null!=a.l?d[a.l]:d)}else F(a.c,"sink gone, dropping value for: "+b.primaryKey);if(b&&0<a.b.length)b["continue"](a.b.shift());else a.a--,0==a.a&&a.ca&&a.ca()}};b.onerror=function(){F(a.c,"seeking fail. "+("error"in b?b.error.name+":"+b.error.message:""));a.a--;0==a.a&&a.ca&&a.ca()}}function ad(a,b){0==a.b.length&&0==a.a?b():a.ca=b}
function bd(a){if(!a.e){var b=function(b,c){a.d=null;"complete"!==b&&F(a.c,c.name+":"+c.message);H(a.c,a+" transaction "+b)},c=function(b){var c=a.b.shift();H(a.c,a+" transaction started for "+c);b=b.objectStore(a.i);$c(a,b.openCursor(c))};if(a.d)H(a.c,a+" using existing tx."),c(a.d);else if(a.f)H(a.c,a+" creating tx from IDBDatabase."),a.g=a.f.transaction([a.i],nc),a.g.oncomplete=function(a){b("complete",a)},a.g.onerror=function(a){b("error",a)},a.g.onabort=function(a){b("abort",a)};else if(a.h)H(a.c,
a+" creating tx from ydn.db.con.IStorage."),a.e=!0,a.h.Ca(function(b){a.e=!1;c(b)},[a.i],nc,b);else throw new cd("no way to create a transaction provided.");}};function dd(a,b,c){if(a&&a instanceof Q)this.Pa=a,this.ia=null;else if(a&&a.db)if(this.Pa=null,a.db)this.ia=new Yc(a,this.a,this.za,la(this.ca,this));else throw new N("Invalid IndexedDB Transaction.");else throw new N("ydn.db.Streamer: First argument requires storage or transaction instance required.");if(!y(b))throw new N("a store name required.");this.a=b;if(v(c)&&!y(c))throw new N("index name must be a string.");this.za=c;this.ia=null;this.Y=[];this.oa=[];this.Ja=!1}t=dd.prototype;t.c=J("ydn.db.Streamer");
t.Pa=null;t.Lb=null;t.oa=[];t.Y=[];t.ia=null;t.Bc=function(a){this.Lb=a};function ed(a){var b=0<a.Y.length;if(b&&!a.Ja&&fa(a.Lb)){var c=function(){ed(a)},d=a.oa.shift(),e=a.Y.shift(),b=0<a.Y.length,c=a.Lb(d,e,b?c:null);b&&!c&&ed(a)}}t.Ja=!1;t.ba=function(a){if(this.ia){this.Ja=!0;var b=this;ad(this.ia,function(){a(b.oa,b.Y);b.oa=[];b.Y=[];b.Ja=!1})}else a(this.oa,this.Y),this.oa=[],this.Y=[]};t.ca=function(a,b){this.oa.push(a);this.Y.push(b);ed(this)};
t.push=function(a,b){if(this.Ja)throw new fd("push not allowed after a collection is started");if(2<=arguments.length)this.ca(a,b);else{if(!this.ia){if(!this.Pa)throw new fd("Database is not setup.");var c=this.Pa.Da();if(c)if("indexeddb"===c)this.ia=new Yc(this.Pa,this.a,this.za,la(this.ca,this));else throw new gd(c);else throw new fd("Database is not connected.");}c=this.ia;c.b.push(a);bd(c)}};t.F=s("za");t.toString=function(){return"Streamer:"+this.a+(this.za||"")};function hd(a,b){if(null!=a&&!("push"in a))throw new Zc;this.a=a||null;this.g=b;this.f=0}hd.prototype.c=J("ydn.db.algo.AbstractSolver");hd.prototype.a=null;hd.prototype.b=function(a){if(!w(a))throw new TypeError("iterators must be array");if(2>a.length)throw new RangeError("ZigzagMerge require at least 2 iterators, but  only "+a.length+" found.");for(var b=0;b<a.length;b++)if(!(a[b]instanceof P))throw new TypeError("item at iterators "+b+" is not an iterator.");return!1};
function id(a,b,c){var d,e=null!=d;if(!v(d)){d=c[0];for(var e=null!=d,f=1;e&&f<c.length;f++)null!=c[f]&&0==M(c[f],d)||(e=!1)}return e&&(a.f++,a.a&&a.a.push(d),v(a.g)&&a.f>=a.g)?[]:b}hd.prototype.d=function(){return[]};function jd(a){Error.captureStackTrace?Error.captureStackTrace(this,jd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ConstraintError"}C(jd,Error);jd.prototype.name="ConstraintError";function kd(a){Error.captureStackTrace?Error.captureStackTrace(this,kd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.InvalidKeyException"}C(kd,Error);
function ld(a){Error.captureStackTrace?Error.captureStackTrace(this,ld):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.VersionError"}C(ld,Error);ld.prototype.name="ydn.db.VersionError";function md(a){Error.captureStackTrace?Error.captureStackTrace(this,md):this.stack=Error().stack||"";a&&(this.message=String(a))}C(md,Error);md.prototype.name="ydn.db.InternalError";
function nd(a){Error.captureStackTrace?Error.captureStackTrace(this,nd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="InvalidStateError"}C(nd,Error);function od(a){Error.captureStackTrace?Error.captureStackTrace(this,od):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="InvalidAccessError"}C(od,Error);function pd(a){Error.captureStackTrace?Error.captureStackTrace(this,pd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="NotFoundError"}
C(pd,Error);pd.prototype.name="NotFoundError";function qd(a,b){Error.captureStackTrace?Error.captureStackTrace(this,qd):this.stack=Error().stack||"";b&&(this.message=String(b));this.message+=" :"+a.message+" ["+a.code+"]";this.name="SQLError"}C(qd,Error);function sd(a,b){Error.captureStackTrace?Error.captureStackTrace(this,sd):this.stack=Error().stack||"";b&&(this.message=String(b));this.message+=" :"+a.message;this.name="SecurityError"}C(sd,Error);
function td(a){Error.captureStackTrace?Error.captureStackTrace(this,td):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.SqlParseError"}C(td,Error);function ud(a){Error.captureStackTrace?Error.captureStackTrace(this,ud):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.TimeoutError"}C(ud,Error);function vd(a,b,c){var d;if(B(a))d=a.store,b=a.id,null!=a.parent&&(c=new vd(a.parent));else if(v(b))d=a;else if(d=a.lastIndexOf("^|"),b=a,0<d&&(b=a.substr(d),c=new vd(a.substring(0,d))),b=b.split("^:"),d=b[0],b=b[1],!v(b))throw Error("Invalid key value: "+a);this.k=d;this.id=b;this.parent=c||null}t=vd.prototype;t.toJSON=function(){var a={store:this.k,id:this.id};this.parent&&(a.parent=this.parent.toJSON());return a};
t.valueOf=function(){return(this.parent?this.parent.valueOf()+"^|":"")+this.k+"^:"+this.id};t.toString=function(){return this.valueOf().replace("^|","|").replace("^:",":")};t.Ic=s("k");t.rc=s("id");t.Hc=s("parent");function wd(a){if(x(a)){for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}return a};function xd(a,b){this.a=b}xd.prototype.c=J("ydn.db.crud.req.RequestExecuto");xd.prototype.toString=aa("RequestExecutor");function yd(){0!=zd&&(Ad[ga(this)]=this)}var zd=0,Ad={};yd.prototype.$b=!1;yd.prototype.Ab=function(){if(!this.$b&&(this.$b=!0,this.ea(),0!=zd)){var a=ga(this);delete Ad[a]}};yd.prototype.ea=function(){if(this.ac)for(;this.ac.length;)this.ac.shift()()};function Bd(a,b,c,d){yd.call(this);this.b=c;this.k=c.getName();this.J=void 0;this.e=!1;this.m=null;this.g=a;this.zc=b;this.t=0;this.eb=this.ma=!1;this.fa=d||4;this.i=this.d=this.a=void 0;this.l=function(){throw new Fc;};this.s=function(){throw new Fc;};this.bc=k()}C(Bd,yd);t=Bd.prototype;
t.Nb=function(a,b,c,d,e){v(b)&&(this.J=this.b.F(b));this.e=y(this.J);this.m=c||null;this.t=0;this.eb=this.ma=!1;this.reverse="prev"==d||"prevunique"==d;this.unique="nextunique"==d||"prevunique"==d;this.R=d;this.Ka=e;this.i=this.d=this.a=void 0};t.R="";t.m=null;t.unique=!1;t.reverse=!1;t.Ka=!0;t.c=J("ydn.db.core.req.AbstractCursor");t.Ob=function(a){this.s(a);Cd(this);this.ma=!0};
t.N=function(a,b,c){null==a&&(G(this.c,this+" finished."),this.ma=!0);this.a=a;this.d=b;this.i=c;this.t++;this.ma?(H(this.c,this+" DONE."),this.l(),Cd(this)):(H(this.c,this+" new cursor position {"+(this.e?this.a+", "+this.d:this.a)+"}"),this.l(this.a))};t.ea=function(){this.g=null};t.toString=function(){return"Cursor:"+this.k+(v(this.J)?":"+this.J:"")+"["+(this.g?"":"~")+this.zc+"]"};function Cd(a){null!=a.d?a.d=wd(a.d):a.d=void 0;null!=a.a?a.a=wd(a.a):a.a=void 0;a.bc(a.eb,a.a,a.d)}
function Dd(a){a.eb=!0;H(a.c,a+": exit");Cd(a)}t.Bb=s("t");t.Nc=s("a");t.C=function(){return this.e?this.d:this.a};t.ra=function(){return this.Ka?this.C():this.i};t.Ra=k();t.Ea=k();function Ed(a,b,c){H(a.c,a+" restarting");a.ma=!1;a.eb=!1;a.openCursor(c,b)};function Fd(a,b,c){D.call(this,0,c);this.e=a;this.d=[];this.b=[];this.s=[];this.a=null;this.ha="";this.i=0}C(Fd,D);t=Fd.prototype;t.ha="";t.c=J("ydn.db.Request");function Gd(a,b,c){a.a=b;a.ha=c;G(a.c,a+" BEGIN");if(b){for(c=0;c<a.b.length;c++)a.b[c][0].call(a.b[c][1],b);a.b.length=0}G(a.c,a+" END")}function Hd(a){var b=new Fd(a.e);a.i++;Gd(b,a.a,a.ha+"C"+a.i);return b}t.qc=function(){return!!this.a};
t.abort=function(){if(this.a)if(G(this.c,this+" aborting"),fa(this.a.abort))this.a.abort();else if(fa(this.a.executeSql))this.a.executeSql("ABORT",[],k(),aa(!0));else throw new Cc;else throw new nd("No active transaction");};function R(a,b,c){var d=a.s.shift();c=!!c;d?d[0].call(d[1],b,c,function(b,c){R(a,b,c)}):c?a.o(b):a.r(b)}function Id(a,b,c){a.s.push([b,c])}function T(a,b,c){a.a?b.call(c,a.a):a.b.push([b,c])}t.Jc=function(a,b){this.d.push([a,b]);return this};
t.r=function(a){G(this.c,this+" SUCCESS");Fd.p.r.call(this,a);Jd(this)};t.o=function(a){G(this.c,this+" ERROR");Fd.p.o.call(this,a);Jd(this)};function Jd(a){a.d.length=0;a.a=null;a.ha=a.ha}function V(a){var b="";a.ha&&(b=a.a?"*":"",b="["+a.ha+b+"]");return a.e+b}function Kd(a,b){var c=new Fd(a);R(c,b);return c}t.xc=function(){return this};t.toString=function(){return"Request:"+V(this)};
t.toJSON=function(){var a=(this.ha||"").match(/B(\d+)T(\d+)(?:Q(\d+?))?(?:R(\d+))?/)||[];return{method:this.e?this.e.split(":"):[],branchNo:parseFloat(a[1]),transactionNo:parseFloat(a[2]),queueNo:parseFloat(a[3]),requestNo:parseFloat(a[4])}};function Ld(a){if(a)if(fa(a.abort))a.abort();else if(fa(a.executeSql))a.executeSql("ABORT",[],k(),aa(!0));else throw new Cc;else throw new nd("No active transaction");};function Md(a){this.e=a;this.a=null;this.b=0}Md.prototype.c=J("ydn.db.tr.Mutex");Md.prototype.K=null;Md.prototype.G=null;Md.prototype.toString=function(){return"Mutex:"+("B"+this.e+"T"+this.b)+(this.a?"*":"")};function Nd(a,b,c,d,e,f){this.h=a;this.d=0;this.l=d;this.g=c||"single";this.b=[];this.e=[];this.f=null;this.a=new Md(b);this.qb=f||0;this.i=!1}t=Nd.prototype;t.qb=0;t.c=J("ydn.db.tr.Serial");t.Sa=function(){return this.a.b};
function Od(a,b,c){if("multi"==a.g)a:if(a=a.a,!a.K||!a.mode||c!=a.mode&&(a.mode!=K||c!=nc)||b.length>a.K.length)b=!1;else{for(c=0;c<b.length;c++)if(-1==a.K.indexOf(b[c])){b=!1;break a}b=!0}else if("repeat"==a.g)a:if(a=a.a,a.K&&a.mode&&c==a.mode&&a.K.length==b.length){for(c=0;c<b.length;c++)if(-1==a.K.indexOf(b[c])){b=!1;break a}b=!0}else b=!1;else b="all"==a.g?!0:!1;return b}t.j=s("h");t.type=function(){return this.h.Da()};
function Pd(a){var b=0<a.b.length?a.b[0].K:null,c=0<a.b.length?a.b[0].mode:null;return null!=b&&null!=c?Od(a,b,c):!1}function Qd(a,b,c,d,e){H(a.c,"push tx queue["+a.b.length+"]");a.b.push({Xa:b,K:c,mode:d,G:e})}t.abort=function(){G(this.c,this+": aborting");Ld(this.f)};
t.na=function(a,b,c,d){var e=y(b)?[b]:b;if(x(e)){if(0==e.length)throw new N("number of store names must more than 0");for(var f=0;f<e.length;f++){if(!y(e[f]))throw new N("store name at "+f+" must be string but found "+e[f]+" of type "+typeof e[f]);if(this.l&&!(0<=Ja(this.l,e[f])))throw new N('store name "'+f+e[f]+'" in scope of '+this);}}else throw new N("store names must be an array");var g=v(c)?c:nc,h=this;if(this.a.a||!Rd(this.j())&&this.i)Qd(this,a,b,g,d);else{var l=this.A();d&&this.e.push(d);
if(this.qb&&this.Sa()>=this.qb)throw new Ec("Exceed maximum number of transactions of "+this.qb);this.i=!0;this.h.Ca(function(c){var d=h.a;d.a=c;d.d=!1;d.K=b;d.mode=g;d.b++;d.G=null;l=h.A();fc(h.c,l+" BEGIN "+W(b)+" "+g);a(h);for(a=null;Pd(h);)c=h.b.shift(),c.G&&h.e.push(c.G),H(h.c,"pop tx queue"+(h.b.length+1)+" reusing T"+h.Sa()),c.Xa()},e,g,function(a,b){fc(h.c,l+" "+a);var c=h.a;c.a?(c.a=null,c.K=null,c.mode=null,fa(c.G)&&c.G(a,b),c.G=null):F(c.c,c+" has no TX to be unlocked for "+a);for(c=0;c<
h.e.length;c++)(0,h.e[c])(a,b);h.e.length=0;(c=h.b.shift())&&h.na(c.Xa,c.K,c.mode,c.G);h.d=0})}};t.A=function(){return"B"+this.a.e+"T"+this.a.b};t.request=function(a,b,c,d){var e=new Fd(a);a=c||nc;var f=this;this.a.a&&!this.a.d&&Od(this,b,a)?(b=this.a.a,this.d++,Gd(e,b,this.A()+"R"+this.d),d&&this.e.push(d)):f.na(function(){var a=f.a.a;f.d++;Gd(e,a,f.A()+"R"+f.d)},b,a,d);return e};
t.$=function(a,b,c,d,e){d=d||nc;var f=this,g;if(f.a.a&&!f.a.d&&Od(this,c,d)){var h=f.a.a;f.d++;g=f.A()+"R"+f.d;G(f.c,g+" BEGIN");b(h,g,function(b,c){f.f=h;c?(G(f.c,g+" ERROR"),a.o(b)):(G(f.c,g+" SUCCESS"),a.r(b));f.f=null});G(f.c,g+" END");b=null}else f.na(function(){var c=f.a.a;f.d++;g=f.A()+"R"+f.d;G(f.c,g+" BEGIN");b(c,g,function(b,d){f.f=c;d?(G(f.c,g+" ERROR"),a.o(b)):(G(f.c,g+" SUCCESS"),a.r(b));f.f=null});G(f.c,g+" END");b=null},c,d,e)};t.getName=function(){return this.j().getName()};
t.toString=function(){return"Serial:"+this.A()+(this.f?"*":"")};function Sd(a,b){Nd.call(this,a,b)}C(Sd,Nd);Sd.prototype.c=J("ydn.db.tr.AtomicSerial");Sd.prototype.request=function(a,b,c){var d,e,f,g=Sd.p.request.call(this,a,b,c,function(a,b){g.a=null;if(d)"complete"!=a&&(f=!0,e=b),d(e,f);else{var c=new ud;R(g,c,!0)}});Id(g,function(a,b,c){f=b;e=a;d=c});return g};
Sd.prototype.$=function(a,b,c,d,e){var f,g,h=new D;h.S(function(a){g=!1;f=a},function(a){g=!0;f=a});Sd.p.$.call(this,h,b,c,d,function(b,c){if("complete"!=b)a.o(c);else if(!0===g)a.o(f);else if(!1===g)a.r(f);else{var d=new ud;a.o(d)}e&&(e(b,c),e=void 0)})};Sd.prototype.toString=function(){return"Atomic"+Sd.p.toString.call(this)};function Td(a,b,c){this.e=a;this.b=b;this.a=c;this.d=null}t=Td.prototype;t.c=J("ydn.db.tr.DbOperator");t.lc=function(){return this.a.Sa()};t.abort=function(){this.a.abort()};function X(a){if(!a.d){var b;b=a.e;var c=b.Da();if("indexeddb"==c)b=new Ud(0,b.b);else if("websql"==c)b=new Vd(0,b.b);else if("memory"==c||"localstorage"==c||"sessionstorage"==c)b=new Wd(0,b.b);else throw new Fc("No executor for "+c);a.d=b}return a.d}t.j=s("e");
function Xd(a,b){var c=a.j(),d=b instanceof Yd?b:Zd(b),e=b.name,f=Y(c.b,e);if(0==$d(d,f).length)ab(!1);else if(f=f?"update":"add",c.b instanceof ae)be(c.b,d),c.a?(c.a.jb(),c.a=null,ce(c)):ab(!1);else throw new de("Cannot "+f+" store: "+e+". Not auto schema generation mode.");}t.toString=function(){return"TxStorage:"+this.j().getName()};function ee(a,b,c){Td.call(this,a,b,c)}C(ee,Td);t=ee.prototype;t.c=J("ydn.db.crud.DbOperator");
t.count=function(a,b,c,d){var e,f,g,h;if(null!=a)if(w(a)){if(v(c)||v(b))throw new N("too many arguments.");f=a;for(var l=0;l<f.length;l++)if(!fe(this.b,f[l]))throw new N('store name "'+f[l]+'" at '+l+" not found.");G(this.c,"countStores: "+W(f));e=this.a.request("count",f);T(e,function(){X(this).Ua(e,f)},this)}else if(y(a)){l=Y(this.b,a);if(!l)throw new N('store name "'+a+'" not found.');if(v(d)&&!da(d))throw new TypeError('unique value "'+d+'" must be boolean, but found '+typeof d+".");f=[a];if(y(b))if(g=
b,B(c)){var n=Lc(c);if(n)throw new N("invalid key range: "+ge(c)+" "+n);h=Ic(c)}else{if(null!=c)throw new N("invalid key range: "+ge(c)+" of type "+typeof c);h=null}else if(B(b)||null==b)if(B(b)){if(n=Lc(b))throw new N("invalid key range: "+ge(b)+" "+n);h=Ic(b)}else{if(null!=b)throw new N("key range must be  an object but found "+ge(b)+" of type "+typeof b);h=null}else throw new N('invalid second argument for count "'+ge(c)+'" of type '+typeof b);G(this.c,"countKeyRange: "+a+" "+(g?g:"")+W(h));e=
this.a.request("count",f);he(l,e,arguments);T(e,function(){X(this).Ga(e,f[0],h,g,!!d)},this)}else throw new N("Invalid store name or store names.");else F(this.c,"count method requires store name(s)"),l=ie(this.b),e=this.a.request("count",l),Id(e,function(a,b,c){if(b)c(a,!0);else{for(var d=b=0;d<a.length;d++)b+=a[d];c(b,!1)}},this),T(e,function(){X(this).Ua(e,f)},this);return e};
t.get=function(a,b){var c;if(a instanceof vd){var d=a,e=d.k,f=Y(this.b,e);if(!f){if(this.b.M())return Kd("get",void 0);throw new N("Store: "+e+" not found.");}var g=d.id;G(this.c,"getByKey: "+e+":"+g);c=this.a.request("get",[e]);he(f,c,arguments);T(c,function(){X(this).Ya(c,e,g)},this)}else if(y(a)&&v(b)){var h=a,f=Y(this.b,h);if(!f){if(this.b.M())return Kd("get",void 0);throw new N('Store name "'+h+'" not found.');}var l=b;G(this.c,"getById: "+h+":"+l);c=this.a.request("get",[h]);he(f,c,arguments);
T(c,function(){X(this).Ya(c,h,l)},this)}else throw new N("get require valid input arguments.");return c};
t.keys=function(a,b,c,d,e,f,g){var h,l,n=null,m=!1,p=!1,q=a,r=Y(this.b,q);if(!y(q))throw new N("store name must be a string, but "+q+" of type "+typeof q+" is not.");if(!this.b.M()){if(!r)throw new N('store name "'+q+'" not found.');if(y(b)&&!je(r,b))throw new N('index "'+b+'" not found in store "'+q+'".');}if(this.b.M()&&!r)return Kd("keys",[]);var z;if(y(b)){var A=b,I=Lc(c);if(I)throw new N("invalid key range: "+c+" "+I);n=Ic(c);if(ea(d))h=d;else{if(v(d))throw new N("limit must be a number");h=
100}if(ea(e))l=e;else{if(v(e))throw new N("offset must be a number");l=0}if(v(f))if(da(f))m=f;else throw new N("reverse must be a boolean");if(v(g))if(da(g))p=g;else throw new N("unique must be a boolean");G(this.c,"keysByIndexKeyRange: "+q);z=this.a.request("keys:iter:index",[q]);he(r,z,arguments);T(z,function(){X(this).Z(z,2,q,A,n,m,h,l,p)},this)}else{if(B(b)){if(I=Lc(b))throw new N("invalid key range: "+ge(b)+" "+I);n=Ic(b)}else{if(null!=b)throw new TypeError("invalid key range: "+ge(b)+" of type "+
typeof b);n=null}if(ea(c))h=c;else{if(v(c))throw new N("limit must be a number");h=100}if(ea(d))l=d;else{if(v(d))throw new N("offset must be a number");l=0}if(v(e))if(da(e))m=e;else throw new N("reverse must be a boolean");G(this.c,"keysByKeyRange: "+q);z=this.a.request("keys",[q]);he(r,z,arguments);T(z,function(){X(this).Z(z,2,q,null,n,m,h,l,!1)},this)}return z};
t.B=function(a,b,c,d,e,f){var g,h,l,n=!1;if(y(a)){var m=a,p=Y(this.b,m);if(!p){if(this.b.M())return Kd("get",[]);throw new pd(m);}if(w(b)){if(v(c)||v(d))throw new N("too many input arguments");var q=b;G(this.c,"listByIds: "+m+" "+q.length+" ids");g=this.a.request("values:array",[m]);he(p,g,arguments);T(g,function(){X(this).Cb(g,m,q)},this)}else if(y(b)){var r=b;if(!ke(p,r))throw new N('index "'+r+'" not found in store "'+m+'"');var z=Lc(c);if(z)throw new N("invalid key range: "+c+" "+z);var A=Ic(c);
if(v(d))if(ea(d))h=d;else throw new N("limit must be a number.");else h=100;if(v(e))if(ea(e))l=e;else throw new N("offset must be a number.");else l=0;if(da(f))n=f;else if(v(f))throw new N("reverse must be a boolean, but "+f);G(this.c,"listByIndexKeyRange: "+m+":"+r);g=this.a.request("values:iter:index",[m]);he(p,g,arguments);T(g,function(){X(this).Z(g,4,m,r,A,n,h,l,!1)},this)}else{A=null;if(B(b)){if(z=Lc(b))throw new N("invalid key range: "+b+" "+z);A=Ic(b)}else if(null!=b)throw new TypeError('expect key range object, but found "'+
ge(b)+'" of type '+typeof b);if(v(c))if(ea(c))h=c;else throw new N("limit must be a number, but "+c+" is "+typeof c);else h=100;if(v(d))if(ea(d))l=d;else throw new N("offset must be a number, but "+d+" is "+typeof d);else l=0;if(v(e))if(da(e))n=e;else throw new N("reverse must be a boolean, but "+e+" is "+typeof e);G(this.c,(A?"listByKeyRange: ":"listByStore: ")+m);g=this.a.request("values",[m]);he(p,g,arguments);T(g,function(){X(this).Z(g,4,m,null,A,n,h,l,!1)},this)}}else if(w(a))if(a[0]instanceof
vd){for(var p=[],I=a,z=0;z<I.length;z++){var L=I[z].k;if(!fe(this.b,L)){if(this.b.M())return p=[],p[I.length-1]=void 0,Kd("get",p);throw new N("Store: "+L+" not found.");}0<=Ja(p,L)||p.push(L)}G(this.c,"listByKeys: "+W(p)+" "+I.length+" keys");g=this.a.request("values:keys",p);T(g,function(){X(this).Db(g,I)},this)}else throw new N("first argumentmust be array of ydn.db.Key, but "+a[0]+" of "+typeof a[0]+" found.");else throw new N("first argument "+a+" is invalid.");return g};
t.add=function(a,b,c){var d=y(a)?a:B(a)?a.name:void 0;if(!y(d))throw new N("store name "+d+" must be a string, but "+typeof d);var e=Y(this.b,d);if(!e){if(!this.b.M())throw new N('store name "'+d+'" not found.');e=Zd(B(a)?a:{name:d});G(this.c,"Adding object store: "+d);Xd(this,e)}else if(this.b.M()&&B(a)&&(a=Zd(a),a=$d(e,a)))throw new Cc(a);var f;if(!e)throw new N('store name "'+d+'" not found.');if(y(e.keyPath)&&v(c))throw new N("key must not be provided while the store uses in-line key.");if(!e.keyPath&&
!e.b&&!v(c))throw new N("out-of-line key must be provided.");if(w(b)){G(this.c,"addObjects: "+d+" "+b.length+" objects");for(a=0;a<b.length;a++)le(e,b[a]);f=this.a.request("add:array",[d],K);T(f,function(){X(this).ub(f,d,b,c)},this);e.ka&&f.aa(function(a){a=new me(ne,this.j(),e.getName(),a,b);this.j().I(a)},this)}else if(B(b))a="store: "+d+" key: "+oe(e,b,c),G(this.c,"addObject: "+a),le(e,b),f=this.a.request("add",[d],K),T(f,function(){X(this).tb(f,d,b,c)},this),e.ka&&f.aa(function(a){a=new pe(ne,
this.j(),e.getName(),a,b);this.j().I(a)},this);else throw new N("record must be an object or array list of objects, but "+b+" of type "+typeof b+" found.");return f};function qe(a,b){var c=y(b)?b:B(b)?b.name:void 0;if(!y(c))throw new N("store name must be a string");var d=Y(a.b,c);if(!d){if(!a.b.M())throw new pd(c);d=Zd(B(b)?b:{name:c});G(a.c,"Adding object store: "+c);Xd(a,d)}else if(a.b.M()&&B(b)){var e=Zd(b);if(e=$d(d,e))throw new Cc(e);}if(!d)throw new pd(c);return d}
t.load=function(a,b,c){var d=c||",",e=qe(this,a).getName();a=new kc;var f=this;this.a.$(a,function(a,c,l){X(f).Fb(a,c,l,e,b,d)},[e],K);return a};
t.put=function(a,b,c){var d,e=this;if(a instanceof vd){var f=a,g=f.k,h=Y(this.b,g);if(!h)throw new N('store "'+g+'" not found.');if(h.keyPath){var l=oe(h,b);if(null!=l){if(0!=M(l,f.id))throw new N("Inline key must be "+f+" but "+l+" found.");}else re(h,b,f.id);return this.put(g,b)}return this.put(g,b,f.id)}if(w(a)){if(v(c))throw new N("too many arguments");var n=a;if(!v(b))throw new N("record values required");for(var m=b,f=[],g=0,h=n.length;g<h;g++){l=n[g].k;-1==Ja(f,l)&&f.push(l);var p=Y(this.b,
l);if(!p)throw new N('store "'+l+'" not found.');p.keyPath&&re(p,m[g],n[g].id)}G(this.c,"putByKeys: to "+W(f)+" "+m.length+" objects");for(g=0;g<m.length;g++)le(p,m[g]);d=this.a.request("put:keys",f,K);he(p,d,arguments);T(d,function(){X(e).Eb(d,m,n)},this)}else if(y(a)||B(a)){var p=qe(this,a),q=p.getName();if(p.keyPath&&v(c))throw new N("key must not be provided while the store uses in-line key.");if(!p.keyPath&&!p.b&&!v(c))throw new N("out-of-line key must be provided.");if(w(b)){var r=b,z=c;G(this.c,
"putObjects: "+q+" "+r.length+" objects");for(g=0;g<r.length;g++)le(p,r[g]);d=this.a.request("put:array",[q],K);he(p,d,arguments);T(d,function(){X(this).Hb(d,q,r,z)},this);p.ka&&d.aa(function(a){a=new me(se,this.j(),q,a,r);this.j().I(a)},this)}else if(B(b)){var A=b,I=c;G(this.c,"putObject: "+q+" "+I);le(p,A);d=this.a.request("put",[q],K);he(p,d,arguments);T(d,function(){X(e).Gb(d,q,A,I)},this);p.ka&&d.aa(function(a){a=new pe(se,this.j(),q,a,A);this.j().I(a)},this)}else throw new N("put record value must be Object or array of Objects");
}else throw new N("the first argument of put must be store name, store schema or array of keys.");return d};
t.clear=function(a,b,c){if(v(c))throw new N("too many input arguments");var d;if(y(a)){c=Y(this.b,a);if(!c)throw new N('store name "'+a+'" not found.');if(B(b)){var e=Ic(b);if(null===e)throw new N("clear method requires a valid non-null KeyRange object.");G(this.c,"clearByKeyRange: "+a+":"+W(e));d=this.a.request("clear",[a],K);he(c,d,[a,e]);T(d,function(){X(this).xb(d,a,e)},this)}else{if(v(b))throw new N("clear method requires a valid KeyRange object as second argument, but found "+b+" of type "+
typeof b);G(this.c,"clearByStore: "+a);d=this.a.request("clear",[a],K);T(d,function(){X(this).Ta(d,[a])},this)}}else if(!v(a)||w(a)&&y(a[0])){var f=a||ie(this.b);G(this.c,"clearByStores: "+W(f));d=this.a.request("clear",f,K);T(d,function(){X(this).Ta(d,f)},this)}else throw new N('first argument "'+a+'" is invalid.');return d};
t.ob=function(a,b,c){var d;if(y(a)){var e=Y(this.b,a);if(!e)throw new N('store name "'+a+'" not found.');if(v(c))if(y(b)){var f=je(e,b);if(!f)throw new N("index: "+b+" not found in "+a);if(B(c)||null===c){var g=Ic(c);G(this.c,"removeByIndexKeyRange: "+a+":"+f.getName()+" "+a);d=this.a.request("rm:iter:index",[a],K);T(d,function(){X(this).Ib(d,a,f.getName(),g)},this)}else throw new N("key range "+c+' is invalid type "'+typeof c+'".');}else throw new N('index name "'+b+'" must be a string, but '+typeof b+
" found.");else if(y(b)||ea(b)||x(b)||b instanceof Date)G(this.c,"removeById: "+a+":"+b),d=this.a.request("rm",[a],K),he(e,d,[a,b]),T(d,function(){X(this).gb(d,a,b)},this),e.ka&&d.aa(function(b){b=new pe(te,this.j(),a,b,void 0);this.j().I(b)},this);else if(B(b))g=Ic(b),G(this.c,"removeByKeyRange: "+a+":"+W(g)),d=this.a.request("rm:iter",[a],K),he(e,d,[a,g]),T(d,function(){X(this).hb(d,a,g)},this),e.ka&&d.aa(function(b){b=new me(te,this.j(),a,b,void 0);this.j().I(b)},this);else throw new N('Invalid key or key range "'+
b+'" of type '+typeof b);}else if(a instanceof vd){var h=a.k,e=Y(this.b,h);d=this.a.request("rm",[h],K);he(e,d,[h,a.id]);T(d,function(){X(this).gb(d,h,a.id)},this)}else if(w(a)){c=[];for(var e=0,l=a.length;e<l;e++){if(!(a[e]instanceof vd))throw new N("key list element at "+e+" of "+l+' must be yn.db.Key, but "'+ge(a[e])+'" ('+ca(a[e])+") is not ydn.db.Key.");var n=a[e].k;-1==Ja(c,n)&&c.push(n)}if(1>c.length)throw new N('at least one valid key required in key list "'+ge(a)+'"');d=this.a.request("rm:keys",
c,K);T(d,function(){X(this).Jb(d,a)},this)}else throw new N('first argument requires store name, key (ydn.db.Key) or list of keys (array) , but "'+ge(a)+'" ('+ca(a)+") found.");return d};t.toString=function(){return"DbOperator:"+this.j().getName()};function we(a,b,c){Td.call(this,a,b,c)}C(we,ee);t=we.prototype;t.c=J("ydn.db.core.DbOperator");t.get=function(a,b){if(a instanceof P){var c=a.a,d=Y(this.b,c);if(!d)throw new N('store "'+c+'" not found.');var e=a.F();if(v(e)&&!ke(d,e))throw new N('index "'+e+'" not found in store "'+c+'".');G(this.c,"getByIterator:"+a);var f=this.a.request("get:iter",[c]);T(f,function(){xe(this,5,f,a,1)},this);return f}return we.p.get.call(this,a,b)};
t.keys=function(a,b,c,d,e,f,g){if(a instanceof P){var h=100;if(ea(b)){if(h=b,1>h)throw new N("limit must be a positive value, but "+b);}else if(v(b))throw new N("limit must be a number,  but "+b);if(v(c))throw new N("offset must not be specified");G(this.c,"keysByIterator:"+a);var l=this.a.request("keys:iter",a.stores());T(l,function(){a.e?xe(this,1,l,a,h):xe(this,2,l,a,h)},this);return l}return we.p.keys.call(this,a,b,c,d,e,f,g)};
t.count=function(a,b,c){if(a instanceof P){if(v(b)||v(c))throw new N("too many arguments.");G(this.c,"countIterator:"+a);var d=this.a.request("count",a.stores());T(d,function(){xe(this,6,d,a)},this);return d}return we.p.count.call(this,a,b,c)};
t.B=function(a,b,c,d,e,f){if(a instanceof P){var g;if(ea(b)){if(g=b,1>g)throw new N("limit must be a positive value, but "+g);}else if(v(b))throw new N("limit must be a number, but "+b);if(v(c))throw new N("offset must not be specified");G(this.c,"listByIterator:"+a);var h=this.a.request("values:iter",a.stores());T(h,function(){a.b?xe(this,2,h,a,g):xe(this,4,h,a,g)},this);return h}return we.p.B.call(this,a,b,c,d,e,f)};
t.hc=function(a,b){var c=new kc;if(v(b)){if(!w(b))throw new TypeError("Iterator argument must be an array.");for(var d=0;d<b.length;d++)if(!(b[d]instanceof P))throw new TypeError("Iterator at "+d+" must be cursor range iterator.");}var e;e=b?b:null;for(var f=[],d=0;d<e.length;d++)for(var g=e[d].stores(),h=0;h<g.length;h++)0<=Ja(f,g[h])||f.push(g[h]);H(this.c,this+": scan for "+e.length+" iterators on "+f);var l=this;this.a.$(c,function(b,c,d){function f(){for(var a=0,d=0;d<e.length;d++){var p=e[d],
q=X(l).b(b,c,p.a);p.load(q);q.s=g;q.l=ma(h,a);S[d]=q;E[a]=d;a++}L=e.length}function g(a){for(var b=0;b<S.length;b++)Dd(S[b]);Pa(S);G(l.c,A+" error");d(a,!0)}function h(b,c){if(I)throw new cd;za++;var f=za===L,g=E[b],m=e[g],n=S[g],g=n.C(),n=n.ra();U[b]=c;ra[b]=m.e?m.b?g:n:m.b?c:n;if(f){var q;q=a instanceof hd?a.d(U,ra):a(U,ra);f=[];m=[];g=[];n=[];if(w(q))for(var r=0;r<q.length;r++)!0===q[r]?g[r]=1:!1===q[r]?n[r]=!0:m[r]=q[r];else if(null===q)f=[];else if(v(q))if(B(q)){f=["advance","continue","continuePrimary",
"restart"];for(r in q)if(!(0<=Ja(f,r)))throw new Ec('Unknown attribute "'+r+'" in cursor advancement object');f=q.continuePrimary||[];m=q["continue"]||[];g=q.advance||[];n=q.restart||[]}else throw new ye("scan callback output");else for(f=[],r=0;r<e.length;r++)v(E[r])&&(g[r]=1);for(r=za=q=0;r<e.length;r++)null!=f[r]||v(m[r])||null!=n[r]||null!=g[r]||za++;for(r=0;r<e.length;r++)if(null!=f[r]||v(m[r])||null!=n[r]||null!=g[r]){var z=E[r];if(!v(z))throw new ye(r+" is not an iterator.");var z=e[z],Eb=
S[r];if(null==U[r]){var ve=r+"/"+e.length;if(null!=g[r])throw new fd(Eb+" "+ve+" must not advance "+g[r]+" steps");if(v(m[r]))throw new fd(Eb+" "+ve+" must not continue to key "+m[r]);if(null!=f[r])throw new fd(Eb+" "+ve+" must not continue to primary key "+f[r]);}U[r]=void 0;ra[r]=void 0;if(null!=n[r])Ed(Eb);else if(v(m[r]))Eb.Ea(m[r]);else if(null!=f[r])Eb.Ra(f[r]);else if(null!=g[r])Eb.advance(1);else throw new cd(z+": has no action");q++}if(0==q){for(r=0;r<S.length;r++)Dd(S[r]);I=!0;Pa(S);G(l.c,
"success "+A);d(void 0)}}}var A=c+" "+l+" scanning";H(l.c,A);var I=!1,L,E=[],U=[],ra=[],S=[],za=0;a instanceof hd?a.b(e,function(){f()})||f():f()},f,nc);return c};
t.gc=function(a,b,c,d){if(!(b instanceof P))throw new N("Second argument must be cursor range iterator.");if(!Y(this.b,b.a))throw new N('Store "'+b.a+'" not found.');c=c||nc;var e=this,f=this.a.request("open",b.stores(),c);G(this.c,"open:"+c+" "+b);T(f,function(c){var h=V(f);G(e.c,h+" iterating "+b);var l=X(e).b(c,h,b.a);b.load(l);l.s=function(a){R(f,a,!0)};l.l=function(b){null!=b?(b=a.call(d,l),!0===b?Ed(l):B(b)?!0===b.restart?Ed(l,b["continue"],b.continuePrimary):null!=b["continue"]?l.Ea(b["continue"]):
null!=b.continuePrimary?l.Ra(b.continuePrimary):(Dd(l),R(f,void 0)):l.advance(1)):(Dd(l),R(f,void 0))}},this);return f};t.map=function(a,b){for(var c=this,d=a.stores(),e,f=0;e=d[f];f++)if(!e)throw new N('Store "'+e+'" not found.');e=new kc;H(this.c,"map:"+a);this.a.$(e,function(d,e,f){H(c.c,e+" iterating "+a);var n=X(c).b(d,e,a.a);a.load(n);n.s=function(a){f(a,!1)};n.l=function(c){null!=c?(c=a.e?a.b?c:n.C():a.b?c:n.ra(),b(c),n.advance(1)):(f(void 0),b=null)}},d,nc);return e};
t.nb=function(a,b,c){for(var d=this,e=a.stores(),f,g=0;f=e[g];g++)if(!f)throw new N('Store "'+f+'" not found.');f=new kc;var h=B(c)?ze(W(c)):c;G(this.c,"reduce:"+a);this.a.$(f,function(c,e,f){var g=X(d).b(c,e,a.a);a.load(g);g.s=function(a){f(a,!0)};var q=0;g.l=function(c){null!=c?(c=a.e?a.b?c:g.C():a.b?c:g.ra(),h=b(h,c,q++),g.advance(1)):f(h)}},e,nc);return f};
function xe(a,b,c,d,e){var f=[],g=c.a,h=V(c),l=h+" "+b+"ByIterator "+d;0<e&&(l+=" limit "+e);G(a.c,l);var n=X(a).b(g,h,d.a);d.load(n);n.s=function(a){Dd(n);R(c,a,!0)};var m=0,p=!1;n.l=function(g){p||(H(a.c,l+" starting"),p=!0);if(null!=g){var h=d.e?n.C():g;m++;1==b?f.push(g):2==b?f.push(n.C()):3==b?f.push([g,n.C()]):6!=b&&f.push(d.b?h:n.ra());5==b?(Dd(n),R(c,f[0])):6==b||!v(e)||m<e?n.Ea():(G(a.c,"success:"+l+" yields "+f.length+" records"),Dd(n),R(c,f))}else G(a.c,"success:"+l+" yields "+f.length+
" records"),Dd(n),R(c,5==b?f[0]:6==b?m:f)}};function Ae(a,b){this.type=a;this.a=this.target=b}Ae.prototype.Ab=k();Ae.prototype.b=!1;Ae.prototype.d=!0;Ae.prototype.preventDefault=function(){this.d=!1};var ne="created",te="deleted",se="updated";function Be(a,b){Ae.call(this,a,b)}C(Be,Ae);Be.prototype.e=s("k");function Ce(a,b,c,d,e){Ae.call(this,a,b);this.version=c;this.ic=d;this.Zb=e}C(Ce,Be);t=Ce.prototype;t.name="ReadyEvent";t.version=NaN;t.ic=NaN;t.Zb=null;t.Oc=s("version");t.tc=s("ic");t.sc=s("Zb");function De(a,b,c){Ae.call(this,c||"error",a);this.error=b}C(De,Be);De.prototype.toString=function(){return this.name+":"+(this.error?this.error:"")};De.prototype.name="ErrorEvent";
De.prototype.error=null;De.prototype.f=s("error");function Ee(a,b){De.call(this,a,b,"fail")}C(Ee,De);Ee.prototype.name="FailEvent";function pe(a,b,c,d,e){Ae.call(this,a,b);this.k=c;this.key=d;this.value=e}C(pe,Be);pe.prototype.name="RecordEvent";pe.prototype.f=s("key");pe.prototype.g=s("value");function me(a,b,c,d,e){Ae.call(this,a,b);this.k=c;this.keys=d;this.B=e}C(me,Be);me.prototype.name="StoreEvent";me.prototype.ua=s("keys");me.prototype.Za=s("B");function Fe(a,b,c,d,e,f){v(e)||(e=w(a)?a.join(", "):a);if(null!=a&&!y(a)&&!x(a))throw new N("index keyPath for "+e+" must be a string or array, but "+a+" is "+typeof a);w(a)&&Object.freeze&&Object.freeze(a);!v(a)&&v(e)&&(a=e);this.keyPath=a;this.g=x(this.keyPath);this.a=e;this.type=Ge(b);if(v(b)){if(!v(this.type))throw new N("type invalid in index: "+this.a);if(w(this.keyPath))throw new N('composite key for store "'+this.a+'" must not specified type');}this.unique=!!c;this.multiEntry=!!d;this.h=y(this.type)?
this.type:He;this.e=y(e)?e:w(a)?this.keyPath.join(","):a;this.d=Fa(this.e);this.b=this.g||this.multiEntry?null:this.keyPath.split(".");this.f=f||null}function Ie(a,b){if(null!=b){if(x(a.keyPath)){for(var c=[],d=0,e=a.keyPath.length;d<e;d++){var f=qc(b,a.keyPath[d]);c[d]=f}return c}return qc(b,a.keyPath)}}function Je(a,b,c){for(var d=0;d<a.b.length;d++)d==a.b.length-1?b[a.b[d]]=c:B(b[a.b[d]])||(b[a.b[d]]={})}var He="TEXT";
function Oc(a,b){if("DATE"==b){if(a instanceof Date)return+a}else return null!=b?a:sc(a)}function Ke(a,b){return"DATE"==b?new Date(a):v(b)?a:vc(a)}var Le=["BLOB","DATE","INTEGER","NUMERIC",He];function Ge(a){if(y(a))return a=Ja(Le,a),Le[a]}Fe.prototype.getName=s("a");Fe.prototype.toJSON=function(){return{name:this.a,keyPath:this.keyPath,type:this.type,unique:this.unique,multiEntry:this.multiEntry}};
Fe.prototype.ta=function(){var a=w(this.keyPath)?Ra(this.keyPath):this.keyPath;return new Fe(a,this.type,this.unique,this.multiEntry,this.a,this.f)};function Me(a,b){return null!=a||null!=b?null!=a?null!=b?x(a)&&x(b)?Ta(a,b)?null:"expect: "+a+", but: "+b:Ne(a,b)?null:"expect: "+a+", but: "+b:"keyPath: "+a+" no longer defined":"newly define "+b:null}
Fe.prototype.hint=function(a){if(!a)return this;var b=w(this.keyPath)?Ra(this.keyPath):this.keyPath,c=this.type;v(a.type)||"TEXT"!=c||(c=void 0);return new Fe(b,c,this.unique,this.multiEntry,a.a)};function Yd(a,b,c,d,e,f,g){this.e=a;if(!y(this.e))throw new N("store name must be a string");this.keyPath=v(b)?b:null;this.h=x(this.keyPath);if(null!==this.keyPath&&!y(this.keyPath)&&!this.h)throw new N("keyPath must be a string or array");this.b=c;var h;if(null!=d){h=Ge(d);if(!v(h))throw new N('type "'+d+'" for primary key in store "'+this.e+'" is invalid.');if(this.h)throw new N('composite key for store "'+this.e+'" must not specified type');}this.type=null!=h?h:this.b?"INTEGER":void 0;this.g=y(this.keyPath)?
this.keyPath.split("."):[];this.a=e||[];this.ka=!!f;this.jc=!!g;this.l=y(this.type)?this.type:He;this.f=w(this.keyPath)?this.keyPath.join(","):y(this.keyPath)?this.keyPath:"_ROWID_";this.d=Fa(this.f);this.i=[]}t=Yd.prototype;t.ka=!1;t.jc=!1;t.toJSON=function(){for(var a=[],b=0;b<this.a.length;b++)a.push(this.a[b].toJSON());return{name:this.e,keyPath:this.keyPath,autoIncrement:this.b,type:this.type,indexes:a}};
function Zd(a){var b="name keyPath autoIncrement type indexes dispatchEvents fixed Sync".split(" "),c;for(c in a)if(a.hasOwnProperty(c)&&-1==Ja(b,c))throw new N('Unknown attribute "'+c+'"');b=[];c=a.indexes||[];if(w(c))for(var d=0;d<c.length;d++){var e;e=c[d];var f="name unique type keyPath multiEntry generator".split(" "),g=void 0;for(g in e)if(e.hasOwnProperty(g)&&-1==Ja(f,g))throw new N("Unknown field: "+g+" in "+W(e));e=new Fe(e.keyPath,e.type,e.unique,e.multiEntry,e.name,e.generator);v(e.keyPath)&&
e.keyPath===a.keyPath||b.push(e)}return new Yd(a.name,a.keyPath,a.autoIncrement,"undefined"===a.type||"null"===a.type?void 0:a.type,b,a.dispatchEvents,a.fixed)}function Oe(a,b,c,d,e,f,g){a=Pe(a,b,c,d,e,f,g);b="";0!=c&&(b+="SELECT "+a.select);b+=" FROM "+a.da;a.n&&(b+=" WHERE "+a.n);a.group&&(b+=" GROUP BY "+a.group);a.W&&(b+=" ORDER BY "+a.W);return b}
function Pe(a,b,c,d,e,f,g){var h={select:"",da:"",n:"",group:"",W:""},l=a.f,n=a.d,m=null;d!==l&&y(d)&&(m=je(a,d));var p=!!m,q=d||l,r=Fa(q),z=p?m.type:a.type,A=p&&m.multiEntry;h.da=Qe(a);6===c?h.select="COUNT("+n+")":3===c||1===c||2===c?(h.select=n,null!=d&&d!=l&&(h.select+=", "+r)):h.select="*";d=g?"DISTINCT ":"";l=[];A?(A=Fa("ydn.db.me:"+a.getName()+":"+m.getName()),h.select=6===c?"COUNT("+d+A+"."+r+")":3===c||1===c||2===c?"DISTINCT "+Qe(a)+"."+n+", "+A+"."+r+" AS "+q:"DISTINCT "+Qe(a)+".*, "+A+
"."+r+" AS "+q,h.da=A+" INNER JOIN "+Qe(a)+" USING ("+n+")",null!=e&&(Nc(A+"."+r,z,e,l,b),0<l.length&&(h.n=h.n?h.n+(" AND "+l.join(" AND ")):l.join(" AND ")))):null!=e&&(Nc(r,z,e,l,b),0<l.length&&(h.n=h.n?h.n+(" AND "+l.join(" AND ")):l.join(" AND ")));p&&!m.unique&&g&&(h.group=r);a=f?"DESC":"ASC";h.W=r+" "+a;p&&(h.W+=", "+n+" "+a);return h}
function Re(a,b,c,d,e,f,g,h,l){var n,m,p,q;null!=e?(n=e.lower,m=e.upper,p=e.lowerOpen,q=e.upperOpen,f?null!=m?(e=M(h,m),-1==e?(m=h,q=l):0==e&&(q=l||q)):(m=h,q=l):null!=n?(e=M(h,n),1==e?(n=h,p=l):0==e&&(p=l||p)):(n=h,p=l)):f?(m=h,q=l):(n=h,p=l);e=new O(n,m,!!p,!!q);d=d?je(a,d):null;b=Pe(a,c,b,d?d.e:a.f,e,f,g);b="SELECT "+b.select+" FROM "+b.da+(b.n?" WHERE "+b.n:"")+(b.group?" GROUP BY "+b.group:"")+" ORDER BY "+b.W;d&&(b+=", "+a.d+(f?"DESC":"ASC"));return b}
function Se(a,b,c,d,e,f,g,h,l,n){var m=je(a,d),p=m.e;d=m.d;var q=a.d,r=l?" <":" >",r=g?r+" ":r+"= ";g=Oc(f,m.type);h=Oc(h,a.type);m="";e?(a=Pe(a,c,b,p,e,l,n),a.n+=" AND ",m=d+r+"?",c.push(g)):(e=l?O.upperBound(f,!0):O.lowerBound(f,!0),a=Pe(a,c,b,p,e,l,n),m=a.n,a.n="");a.n+="("+m+" OR ("+d+" = ? AND "+q+r+"?))";c.push(g);c.push(h);return"SELECT "+a.select+" FROM "+a.da+" WHERE "+a.n+(a.group?" GROUP BY "+a.group:"")+" ORDER BY "+a.W}t.ta=function(){return Zd(this.toJSON())};
t.index=function(a){return this.a[a]||null};function je(a,b){return Na(a.a,function(a){return a.getName()==b})}function ke(a,b){return b===a.keyPath?!0:Ma(a.a,function(a){return a.getName()==b})}function Qe(a){return Fa(a.e)}
t.hint=function(a){if(!a)return this;var b=this.b,c=w(this.keyPath)?Ra(this.keyPath):this.keyPath,d=this.type,e=La(this.a,function(a){return a.ta()});v(a.type)||"TEXT"!=d||(d=void 0);w(a.keyPath)&&y(c)&&c==a.keyPath.join(",")&&(c=Ra(a.keyPath));for(var f=0,g=a.a.length;f<g;f++)if(a.a[f].g)for(var h=a.a[f].getName(),l=e.length-1;0<=l;l--)if(0<=h.indexOf(e[l].getName())){e[l]=a.a[f].ta();break}for(f=0;f<e.length;f++)(g=je(a,e[f].getName()))&&(e[f]=e[f].hint(g));return new Yd(a.e,c,b,d,e)};
t.getName=s("e");function Te(a){return!!a.keyPath}function oe(a,b,c){if(!a.keyPath&&null!=c)return c;if(a.h){c=[];for(var d=0;d<a.keyPath.length;d++)c.push(qc(b,a.keyPath[d]));return c}if(a.keyPath)return db(b,a.g)}function re(a,b,c){for(var d=0;d<a.g.length;d++){var e=a.g[d];if(d==a.g.length-1){b[e]=c;break}v(b[e])||(b[e]={});b=b[e]}}
function Ue(a,b,c){var d=[],e=[];c=v(c)?c:oe(a,b);v(c)&&(e.push(a.d),d.push(Oc(c,a.type)));for(var f=0;f<a.a.length;f++){var g=a.a[f];if(!g.multiEntry&&g.getName()!==a.keyPath&&"_default_"!=g.getName()){var h=Ie(g,b);null!=h&&(d.push(Oc(h,g.type)),e.push(g.d))}}a.jc||(d.push(W(b)),e.push("_default_"));a=[];for(f=d.length-1;0<=f;f--)a[f]="?";return{Rb:e,dc:a,B:d,key:c}}
function $d(a,b){if(!b)return"missing store: "+a.e;if(a.e!=b.e)return"store name, expect: "+a.e+", but: "+b.e;var c=Me(a.keyPath,b.keyPath);if(c)return"keyPath, "+c;if(v(a.b)&&v(b.b)&&a.b!=b.b)return"autoIncrement, expect:  "+a.b+", but: "+b.b;if(a.a.length!=b.a.length)return"indexes length, expect:  "+a.a.length+", but: "+b.a.length;if(v(a.type)&&v(b.type)&&(x(a.type)?!Ta(a.type,b.type):a.type!=b.type))return"data type, expect:  "+a.type+", but: "+b.type;for(c=0;c<a.a.length;c++){var d=je(b,a.a[c].getName()),
e;e=a.a[c];if(d)if(e.a!=d.a)e="name, expect: "+e.a+", but: "+d.a;else{var f=Me(e.keyPath,d.keyPath);e=f?"keyPath, "+f:null!=e.unique&&null!=d.unique&&e.unique!=d.unique?"unique, expect: "+e.unique+", but: "+d.unique:null!=e.multiEntry&&null!=d.multiEntry&&e.multiEntry!=d.multiEntry?"multiEntry, expect: "+e.multiEntry+", but: "+d.multiEntry:v(e.type)&&v(d.type)&&(x(e.type)?!Ta(e.type,d.type):e.type!=d.type)?"data type, expect: "+e.type+", but: "+d.type:""}else e="no index for "+e.a;if(0<e.length)return'index "'+
a.a[c].getName()+'" '+e}return""}function le(a,b){if(b)for(var c=0;c<a.a.length;c++){var d=a.a[c],e=b;if(d.f){var f=d.f(e),g=typeof f;if("string"==g||"number"==g||"array"==g||"undefined"==g||f instanceof Date){for(g=0;g<d.b.length-1;g++)B(e[d.b[g]])||(e[d.b[g]]={});e[d.b[d.b.length-1]]=f}}}}function he(a,b,c){for(var d=0;d<a.i.length;d++)if(void 0!==d)a.i[d](b,c)}
t.F=function(a){var b,c=a;if(w(a)){a:{for(b=0;b<this.a.length;b++)if(!Me(this.a[b].keyPath,a)){b=this.a[b];break a}b=null}c=a.join(", ")}else b=je(this,a);if(!b)throw new N('require index "'+c+'" not found in store "'+this.getName()+'"');return b.getName()};J("ydn");function ze(a){return!y(a)||sa(a)?{}:JSON.parse(a)}function ge(a){var b;try{b=W(a)}catch(c){b=""}return b?b.substr(0,70)+(70<b.length?"...":""):""}function W(a){return JSON.stringify(a,void 0,void 0)};function Ve(a,b){if(!a||sa(a))throw new N("store_name must be provided for primary full text index");if(!b||sa(b))throw new N("index_name must be provided for primary full text index");this.k=a};function We(a,b,c){this.name=a;this.a=b;this.b=c||"";if(-1==["","en","fr"].indexOf(this.b))throw new N('Unsupported lang "'+c+" for full text search index "+a);}We.prototype.getName=s("name");We.prototype.count=function(){return this.a.length};We.prototype.index=function(a){return this.a[a]};
function Xe(a){var b=["name","sources","lang"],c;for(c in a)if(a.hasOwnProperty(c)&&-1==Ja(b,c))throw new N("Unknown field: "+c+" in "+W(a));if(!w(a.sources))throw new N("indexes require for full text search index "+a.name+", but "+a.sources+" of type "+typeof a.sources+" found.");b=a.sources.map(function(a){var b=["storeName","keyPath","weight"],c;for(c in a)if(a.hasOwnProperty(c)&&-1==Ja(b,c))throw new N("Unknown field: "+c+" in "+ge(a));return new Ve(a.storeName,a.keyPath)});return new We(a.name,
b,a.lang)};function Ye(a,b){var c,d,e=b;if(B(a)){d=a;c=["version","stores","fullTextCatalogs"];for(var f in d)if(d.hasOwnProperty(f)&&-1==Ja(c,f))throw new N("Unknown field: "+f+" in schema.");c=d.version;var e=[],g=d.stores||[];if(!w(g))throw new N("stores must be array");for(f=0;f<g.length;f++){var h=Zd(g[f]);if(-1!=Oa(e,function(a){return a.name==h.getName()}))throw new N('duplicate store name "'+h.getName()+'".');e.push(h)}}else y(a)?c=0==a.length?void 0:parseFloat(a):ea(a)&&(c=a);if(v(c)){if(!ea(c)||0>
c)throw new N("Invalid version: "+c+" ("+a+")");isNaN(c)&&(c=void 0)}if(v(b)&&(!w(b)||0<b.length&&!(b[0]instanceof Yd)))throw new N("stores");this.version=c;this.wa=!v(this.version);this.stores=e||[];c=[];if(d&&d.fullTextCatalogs)for(f=0;f<d.fullTextCatalogs.length;f++)e=Xe(d.fullTextCatalogs[f]),c[f]=e,Y(this,e.getName())||(g=[new Fe("k",He),new Fe("v",He)],e=new Yd(e.getName(),"id",!1,void 0,g),this.stores.push(e));this.a=c}t=Ye.prototype;
t.toJSON=function(){var a=La(this.stores,function(a){return a.toJSON()}),b={};b.stores=a;v(this.version)&&(b.version=this.version);return b};t.wa=!1;t.M=aa(!1);function ie(a){return La(a.stores,function(a){return a.getName()})}t.pa=function(a){return this.stores[a]||null};t.count=function(){return this.stores.length};function Y(a,b){return Na(a.stores,function(a){return a.getName()==b})}function fe(a,b){return Ma(a.stores,function(a){return a.getName()==b})}
function Ze(a,b,c){if(!b||a.stores.length!=b.stores.length)return"Number of store: "+a.stores.length+" vs "+b.stores.length;for(var d=0;d<a.stores.length;d++){var e=Y(b,a.stores[d].getName()),e=e&&c?e.hint(a.stores[d]):e,e=$d(a.stores[d],e);if(0<e.length)return'store: "'+a.stores[d].getName()+'" '+e}return""};function ae(a,b){Ye.call(this,a,b)}C(ae,Ye);ae.prototype.M=aa(!0);function be(a,b){a.stores.push(b)};function Zc(a){Error.captureStackTrace?Error.captureStackTrace(this,Zc):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.ArgumentException"}C(Zc,Error);function $e(a){Error.captureStackTrace?Error.captureStackTrace(this,$e):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.NotSupportedException"}C(Zc,Error);$e.prototype.name="ydn.error.NotSupportedException";
function gd(a){Error.captureStackTrace?Error.captureStackTrace(this,gd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.NotImplementedException"}C(gd,Error);function cd(a){Error.captureStackTrace?Error.captureStackTrace(this,cd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InternalError"}C(cd,Error);cd.prototype.name="ydn.InternalError";
function de(a){Error.captureStackTrace?Error.captureStackTrace(this,de):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.ConstraintError"}C(de,Error);de.prototype.name="ydn.error.ConstraintError";function ye(a){Error.captureStackTrace?Error.captureStackTrace(this,ye):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InvalidOperationException"}C(Zc,Error);
function fd(a){Error.captureStackTrace?Error.captureStackTrace(this,fd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InvalidOperationError"}C(fd,Error);function Ne(a,b){var c;c=c||{};if(null!=a&&null!=b){if(x(a)&&x(b)){if(a.length!=b.length)return!1;for(var d=0;d<a.length;d++)if(-1==Na(b,function(b){return Ne(b,a[d])}))return!1;return!0}if(x(a))return 1==a.length&&Ne(a[0],b);if(x(b))return 1==b.length&&Ne(b[0],a);if(B(a)&&B(a)){for(var e in a)if(a.hasOwnProperty(e)&&!c[e]){var f=Ne(a[e],b[e]);if(!f)return!1}for(e in b)if(b.hasOwnProperty(e)&&!c[e]&&(f=Ne(a[e],b[e]),!f))return!1;return!0}return a===b}return!1}
function af(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return a[b]};/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");.
*/
function Q(a,b,c){c=c||{};var d="autoSchema connectionTimeout size mechanisms policy isSerial".split(" "),e;for(e in c)if(c.hasOwnProperty(e)&&-1==Ja(d,e))throw new N('Unknown attribute "'+e+'" in options.');if(c.mechanisms){if(!w(c.mechanisms))throw new N("mechanisms attribute must be an array but "+ca(c.mechanisms)+" found.");for(e=0;e<c.mechanisms.length;e++)if(!(0<=Ja(bf,c.mechanisms[e])))throw new N('Invalid mechanism "'+c.mechanisms[e]+'"');}this.u=c.mechanisms||bf;this.s=c.size;this.fa=v(c.connectionTimeout)?
c.connectionTimeout:3E4;this.ec=v(c.ec)?c.ec:!1;this.a=null;this.e=[];this.bb=!1;if(b instanceof Ye)c=b;else if(B(b))for(c=c.autoSchema||!v(b.stores)?new ae(b):new Ye(b),d=b.stores?b.stores.length:0,e=0;e<d;e++){var f=Y(c,b.stores[e].name);b.stores[e].Sync&&F(this.c,"Synchronization option for "+f.getName()+" ignored.")}else c=new ae;this.b=c;v(a)&&this.l(a);this.g=null;this.f=new D}Q.prototype.c=J("ydn.db.con.Storage");
Q.prototype.la=function(a){if(v(a)){var b=function(b){a(b.toJSON())};if(this.a)this.a.L(b);else{var c=this;this.Ca(function(a){c.a.L(b,a)},null,nc)}}return this.b?this.b.toJSON():null};Q.prototype.l=function(a){if(this.a)throw new Ec("Already connected with "+this.h);this.h=a;ce(this)};Q.prototype.getName=s("h");var bf="indexeddb websql localstorage sessionstorage userdata memory".split(" ");t=Q.prototype;t.zb=aa(null);
function ce(a){function b(b,e){b?(H(a.c,a+": ready."),a.Vb=NaN,d.Qa=function(b){a.I(new De(a,b))},d.mb=function(b){a.I(new Ee(a,b));a.a=null},d.fb=function(b){a.I(b)},setTimeout(function(){cf(a,e);df(a)},10),c.r(e)):(F(a.c,a+": database connection fail "+e.name),setTimeout(function(){cf(a,new Ee(a,e));if(a.e){a.c.log(Xb,"Purging "+a.e.length+" transactions request.",void 0);for(var b;b=a.e.shift();)b.G&&b.G("error",e)}},10),c.o(e))}for(var c=new D,d=null,e=a.u,f=0;f<e.length;f++){var g=e[f].toLowerCase();
if(d=a.zb(g)){d=a.zb(g);break}}null===d?(e=new de("No storage mechanism found."),b(!1,new Ee(a,e))):d.Aa(a.h,a.b).S(function(a){this.a=d;b(!0,new Ce("ready",this,parseFloat(d.kb()),parseFloat(a),null))},function(a){F(this.c,this+": opening fail");b(!1,a)},a)}t.Da=function(){if(this.a)return this.a.Ba()};t.wc=function(a,b){this.f.sb(a,b)};function cf(a,b){b instanceof De?a.f.o(b.error):a.f.r();a.I(b)}function Rd(a){return!!a.a&&a.a.lb()}
t.Kc=function(){this.a&&(this.a.jb(),this.a=null,H(this.c,this+" closed"))};t.Vb=NaN;function df(a){var b=a.e.shift();b&&(H(a.c,"pop tx queue["+(a.e.length+1)+"]"),a.Ca(b.Xa,b.Ac,b.mode,b.G));a.Vb=na()}function ef(a,b,c,d,e){H(a.c,"push tx queue["+a.e.length+"]");a.e.push({Xa:b,Ac:c,mode:d,G:e});100<a.e.length&&0==a.e.length%100&&F(a.c,"Transaction queue stack size is "+a.e.length+". It is too large, possibility due to incorrect usage.")}t.bb=!1;
t.Ca=function(a,b,c,d){var e=b;if(y(b))e=[b];else if(null!=b)if(x(b)){if(0==b.length)throw new N("number of store names must more than 0");for(var f=0;f<b.length;f++)if(!y(b[f]))throw new N("store name at "+f+" must be string but found "+typeof b[f]);}else throw new N("store names must be an array");else e=null;if(this.a&&this.a.lb()&&!this.bb){var g=this,h=v(c)?c:nc;h==oc&&(this.bb=!0);this.a.Wa(function(b){a(b);a=null},e,h,function(a,b){fa(d)&&(d(a,b),d=void 0);h==oc&&(g.bb=!1);df(g)})}else ef(this,
a,e,c,d)};t.I=k();t.toString=function(){return"Storage:"+this.a};function ff(a,b,c,d){this.e=a;this.f=b;this.a=Ra(c);this.b=d;this.d=[]}ff.prototype.e=null;function gf(a,b,c){if(a.e)c&&a.d.push(c),b(a.e);else throw new Fc("tx committed on ParallelTxExecutor");}ff.prototype.toString=function(){return"ParallelTxExecutor: txNo:"+this.f+" mode:"+this.b+" scopes:"+W(this.a)};function hf(a,b,c,d,e,f){this.d=a;this.g=b;this.a=this.Fa=0;this.La=this.ga=null;this.e=d;this.f=e;this.b=c||"single";this.pb=f||0}t=hf.prototype;t.Fa=0;t.pb=0;t.ga=null;t.La=null;t.c=J("ydn.db.tr.Parallel");t.Sa=s("Fa");t.type=function(){return this.d.Da()};t.j=s("d");t.abort=function(){G(this.c,this+": aborting");Ld(this.La)};
t.mc=function(a,b){var c;if("multi"==this.b)a:if(c=this.ga,!c.a||!c.b||b!=c.b&&(c.b!=K||b!=nc)||a.length>c.a.length)c=!1;else{for(var d=0;d<a.length;d++)if(-1==c.a.indexOf(a[d])){c=!1;break a}c=!0}else if("repeat"==this.b)a:if(c=this.ga,c.a&&c.b&&b==c.b&&c.a.length==a.length){for(d=0;d<a.length;d++)if(-1==c.a.indexOf(a[d])){c=!1;break a}c=!0}else c=!1;else c="all"==this.b?!0:!1;return c};
t.na=function(a,b,c,d){function e(c){l.Fa++;n=new ff(c,l.Fa,b,h);g=l.A();fc(l.c,g+" BEGIN "+W(b)+" "+h);l.ga=n;gf(l.ga,a,d)}function f(a,b){fc(l.c,g+" "+a);if(n){for(var c=n,d=0;d<c.d.length;d++)c.d[d](a,b);c.d.length=0;c.e=null;c.a=null;c.d=null}l.a=0}var g;this.e&&(b=this.e);this.f&&(c=this.f);var h=v(c)?c:nc,l=this,n;if(this.ga&&this.ga.e&&this.mc(b,h))gf(this.ga,a,d);else{if(this.pb&&this.Fa>=this.pb)throw new Ec("Exceed maximum number of transactions of "+this.pb);this.d.Ca(e,b,h,f)}};
t.request=function(a,b,c,d){var e=new Fd(a),f=this;this.na(function(a){f.a++;Gd(e,a,f.A()+"R"+f.a)},b,c||nc,d);return e};t.$=function(a,b,c,d,e){var f=this,g;this.na(function(c){f.a++;g=f.A()+"R"+f.a;G(f.c,g+" BEGIN");b(c,g,function(b,d){f.La=c;g=f.A()+"R"+f.a;d?(G(f.c,g+" ERROR"),a.o(b)):(G(f.c,g+" SUCCESS"),a.r(b));f.La=null});b=null;G(f.c,g+" END")},c,d,e)};t.A=function(){return"B"+this.g+"T"+this.Fa};t.toString=function(){return"Parallel:"+this.b+":"+this.A()+(this.La?"*":"")};function jf(a,b){hf.call(this,a,b,"single")}C(jf,hf);t=jf.prototype;t.c=J("ydn.db.tr.AtomicParallel");t.mc=aa(!1);t.request=function(a,b,c){var d,e,f,g=this,h=jf.p.request.call(this,a,b,c,function(a,b){h.a=null;G(g.c,"transaction "+a);if(d)"complete"!=a&&(f=!0,e=b),d(e,f);else{var c=new ud;R(h,c,!0)}});Id(h,function(a,b,c){f=b;e=a;d=c});return h};
t.$=function(a,b,c,d,e){var f,g,h=new D;h.S(function(a){g=!1;f=a},function(a){g=!0;f=a});jf.p.$.call(this,h,b,c,d,function(b,c){if("complete"!=b)a.o(c);else if(!0===g)a.o(f);else if(!1===g)a.r(f);else{var d=new ud;a.o(d)}e&&(e(b,c),e=void 0)})};t.toString=function(){return"Atomic"+jf.p.toString.call(this)};function kf(a,b,c){Q.call(this,a,b,c);this.ya=0;a=!0;b="single";c&&(v(c.isSerial)&&(a=!!c.isSerial),c.policy&&(b=c.policy));c=lf(this,b,a);this.i=lf(this,"atomic",!1);this.d=this.xa(c,this.i)}C(kf,Q);t=kf.prototype;t.ya=0;t.nc=function(a,b,c,d,e){var f;"readonly"==d?f=nc:"readwrite"==d&&(f=K);a=lf(this,a,b,c,f,e);return this.xa(a,this.i)};t.xa=function(a){return new Td(this,this.b,a)};
function lf(a,b,c,d,e,f){if(c){if("multi"==b||"repeat"==b||"all"==b||"single"==b)return new Nd(a,a.ya++,b,d,0,f);if("atomic"==b)return new Sd(a,a.ya++);throw new N('Invalid requestType "'+b+'"');}if("multi"==b||"repeat"==b||"all"==b||"single"==b)return new hf(a,a.ya++,b,d,e,f);if("atomic"==b)return new jf(a,a.ya++);throw new N('Invalid requestType "'+b+'"');}
t.yc=function(a,b,c){if(3<arguments.length)throw new N("too many input arguments, run accept not more than 3 input arguments, but "+arguments.length+" found.");this.ya++;var d=b||ie(this.b),e=nc;if(c)if("readwrite"==c)e=K;else if("readonly"!=c)throw new N('Invalid transaction mode "'+c+'"');var f=lf(this,"all",!1,d,e,1),g=this.xa(f,this.i),h=new Fd("run"),l=this;f.na(function(b){H(l.c,"executing run in transaction on "+f);Gd(h,b,f.A()+"R0");a(g)},d,e,function(a){h.a=null;R(h,f.Sa(),"complete"!==a)});
return h};t.Pc=function(){return this.d?this.d.lc():NaN};kf.prototype.branch=kf.prototype.nc;kf.prototype.run=kf.prototype.yc;kf.prototype.getTxNo=kf.prototype.Pc;Td.prototype.getTxNo=Td.prototype.lc;function Z(a,b,c){kf.call(this,a,b,c);a=this.b;for(b=0;b<a.a.length;b++){c=a.a[b];var d=Y(a,c.getName());if(d){if(!ke(d,"k"))throw new N('full text index store "'+d.getName()+'" must have "keyword" index');if(!ke(d,"v"))throw new N('full text index store "'+d.getName()+'" must have "keyword" index');if("id"!=d.keyPath)throw new N('full text index store "'+d.getName()+'" must use "id" as key path.');}else throw new N('full text index store "'+c.getName()+'" required.');for(d=0;d<c.count();d++){var e=
c.index(d),f=Y(a,e.k);if(f)F(this.c,"Full text indexer option for "+f.getName()+" ignored.");else throw new N('full text source store "'+e.k+'" does not exist for full text index "'+c.getName()+'"');}}}C(Z,kf);t=Z.prototype;t.xa=function(a){return new ee(this,this.b,a)};t.add=function(a,b,c){return this.d.add(a,b,c)};t.count=function(a,b,c,d){return this.d.count(a,b,c,d)};t.get=function(a,b){return this.d.get(a,b)};t.keys=function(a,b,c,d,e,f,g){return this.d.keys(a,b,c,d,e,f,g)};
t.B=function(a,b,c,d,e,f){return this.d.B(a,b,c,d,e,f)};t.load=function(a,b,c){return this.d.load(a,b,c)};t.put=function(a,b,c){return this.d.put(a,b,c)};t.clear=function(a,b,c){return this.d.clear(a,b,c)};t.ob=function(a,b,c){return this.d.ob(a,b,c)};t.toString=function(){var a="Storage:"+this.getName();Rd(this)&&(a+=" ["+this.Da()+"]");return a};function mf(a,b,c){Z.call(this,a,b,c)}C(mf,Z);t=mf.prototype;t.xa=function(a){return new we(this,this.b,a)};t.Lc=function(a,b,c,d){return this.d.gc(a,b,c,d)};t.Mc=function(a,b){return this.d.hc(a,b)};t.map=function(a,b){return this.d.map(a,b)};t.nb=function(a,b,c){return this.d.nb(a,b,c)};function nf(a,b,c,d){this.db=a;this.b=b;this.type=d||0;this.a=c}t=nf.prototype;t.reverse=function(){return new nf(this.db,this.b,this.a.reverse(),this.type)};t.unique=function(a){if(!da(a))throw new N("unique value must be a boolean, but "+typeof a+" found");if(!this.a.e)throw new N("primary key query is already unique");return new nf(this.db,this.b,this.a.unique(a),this.type)};
t.W=function(a){var b=y(a)?[a]:a;if(1!=b.length)throw Error("Multi ordering not implemented, wait for next release");var c=Y(this.b,this.a.a);a=this.a;var d=a.Na();if(a.e){if(a.F()!=b[0])if(b=[a.F(),b[0]],d)if(d.lower==d.upper)d=Jc([d.lower]),a=new P(a.a,b.join(", "),d,a.P(),a.Q(),a.b,b);else throw Error("Not supported");else a=new P(a.a,b.join(", "),null,a.P(),a.Q(),a.b,b)}else if(b[0]!=c.keyPath){if(d)throw Error("Not possible without using in memory sorting.");a=new Wc(a.a,b[0],null,a.P(),a.Q())}return new nf(this.db,
this.b,a,this.type)};t.n=function(a,b,c,d,e){if(this.a.d)throw new N("joint query not implemented yet");var f=this.a.a,g=Y(this.b,f);a=a==g.keyPath?Vc(f,b,c,d,e):Xc(f,a,b,c,d,e);return new nf(this.db,this.b,a,this.type)};
t.select=function(a){var b=Y(this.b,this.a.a),c=w(a)?a:[a],d=this.type;a=new P(this.a.a,this.a.f,this.a.d,this.a.P(),this.a.Q(),this.a.b,this.a.h);if(1==c.length)if(c=c[0],"_ROWID_"==c||c===b.keyPath)d=2;else if(c&&"*"!=c)if(ke(b,c)){if(this.a.e){if(b=this.a.F(),c!=b)throw new N('select field name must be "'+b+'", but "'+c+'" found.');}else a=new P(a.a,c,a.Na(),a.P(),a.Q(),!0);d=1}else throw new N('Invalid select "'+c+'", index not found in store "'+b.getName()+'"');else d=4;else if(2==c.length){if(!this.a.e)throw new N("Only primary key can be selected for this query.");
for(d=0;2>d;d++)if("_ROWID_"!=c[d]&&!(v(b.keyPath)&&(1==b.g.length?b.keyPath===c[d]:x(c[d])&&Ta(b.g,c[d])))){var e=this.a.F();if(c[d]!=e)throw new N('select field name must be "'+e+'", but "'+c[d]+'" found.');}d=3}else throw new N("Selecting more than 2 field names is not supported, but "+c.length+" fields selected.");return new nf(this.db,this.b,a,d)};
t.count=function(){var a=this.a,b;b=a.Q()?this.db.count(a):a.e?this.db.count(a.a,a.F(),a.Na()):this.db.count(a.a,a.Na());a.g!=Rc&&b.sb(function(){"busy"!=a.g&&a.fc()});return b};t.clear=function(){var a=this.a;return a.e?this.db.clear(a.a,a.F(),a.Ub()):this.db.clear(a.a,a.Ub())};
mf.prototype.da=function(a,b,c,d,e){if(!y(a))throw new TypeError('store name "'+a+'"');if(!fe(this.b,a))throw new N('Store "'+a+'" not found.');var f;if(v(b)){if(!v(c))throw new N("boundary value must be defined.");f=Pc(b,c,d,e)}else if(v(d))throw new N("second boundary must not be defined.");a=new Uc(a,f);return new nf(this,this.b,a)};
we.prototype.da=function(a,b,c,d,e){if(!y(a))throw new TypeError('store name "'+a+'"');if(!fe(this.b,a))throw new N('Store "'+a+'" not found.');var f;if(v(b)){if(!v(c))throw new N("boundary value must be defined.");f=Pc(b,c,d,e)}else if(v(d))throw new N("second boundary must not be defined.");b=this.j();a=new Uc(a,f);return new nf(b,this.b,a)};function of(a){if(!y(a))throw new Zc;this.H=a;this.e=K;this.a=[];pf(this,a);this.Oa=""}t=of.prototype;t.H="";t.Wb=NaN;t.Yb=NaN;t.Kb=!1;t.Oa="";
function pf(a,b){var c=b.split(/\sFROM\s/i);if(2==c.length){var d=c[1],c=c[0].match(/\s*?(SELECT|INSERT|UPDATE|DELETE)\s+(.*)/i);if(3==c.length){a.f=c[1].toUpperCase();if("SELECT"==a.f)a.e=nc;else if("INSERT"==a.f)a.e=K;else if("UPDATE"==a.f)a.e=K;else if("DELETE"==a.f)a.e=K;else return;var c=c[2].trim(),e=c.match(/^(MIN|MAX|COUNT|AVG|SUM)/i);e?(a.d=e[0].toUpperCase(),c=c.replace(/^(MIN|MAX|COUNT|AVG|SUM)/i,"").trim()):a.d=void 0;"("==c.charAt(0)&&(")"==c.charAt(c.length-1)?c=c.substring(1,c.length-
1):new td("missing closing parentheses"));a.l=c;c=d.search(/(ORDER BY|LIMIT|OFFSET)/i);0<c?(a.b=d.substring(c),d=d.substring(0,c)):a.b="";c=d.search(/WHERE/i);0<c?(a.g=d.substring(c+6).trim(),d=d.substring(0,c)):a.g="";a.a=d.trim().split(",").map(function(a){a=Ca(a,'"');a=Ca(a,"'");return a.trim()})}}}
function qf(a,b){if(b){for(var c=0;c<b.length;c++)a.H=a.H.replace("?",b[c]);pf(a,a.H)}a.h=rf(a);if(!a.h)return a.Oa;var c=a.b.length,d=/OFFSET\s+(\d+)/i.exec(a.b);d&&(a.Yb=parseInt(d[1],10),c=a.b.search(/OFFSET/i));if(d=/LIMIT\s+(\d+)/i.exec(a.b))a.Wb=parseInt(d[1],10),d=a.b.search(/LIMIT/i),d<c&&(c=d);(c=/ORDER BY\s+(.+)/i.exec(a.b.substr(0,c)))?(c=c[1].trim(),(d=c.match(/(ASC|DESC)/i))?(a.Kb="DESC"==d[0].toUpperCase(),c=c.replace(/\s+(ASC|DESC)/i,"")):a.Kb=!1,a.i=Ca(Ca(c,'"'),"'")):a.i=void 0;return""}
function sf(a){if("*"==a.l)return null;a=a.l.split(",");return a=a.map(function(a){return Ca(a.trim(),'"')})}t.toJSON=function(){return{sql:this.H}};
function rf(a){function b(a){return Oa(c,function(b){return b.qa==a})}var c=[],d=/(.+?)(<=|>=|=|>|<)(.+)/i;if(0<a.g.length)for(var e=a.g.split("AND"),f=0;f<e.length;f++){var g=e[f],h=d.exec(g);if(h){var l=h[1].trim(),l=Ca(l,'"'),l=Ca(l,"'");if(0<l.length){var n=h[3].trim(),n=0==n.lastIndexOf('"',0)?Ca(n,'"'):0==n.lastIndexOf("'",0)?Ca(n,"'"):parseFloat(n),h=new Qc(l,h[2],n),l=b(l);if(0<=l){if(c[l]=c[l].vb(h),!c[l])return a.Oa='where clause "'+g+'" conflict',null}else c.push(h)}else return a.Oa='Invalid clause "'+
g+'"',null}else return a.Oa='Invalid clause "'+g+'"',null}return c}t.toString=function(){return"query:"+this.H};function tf(a,b,c,d){Bd.call(this,a,b,c,d);this.f=null}C(tf,Bd);t=tf.prototype;t.c=J("ydn.db.core.req.IDBCursor");t.Va=function(a){(a=a.target.result)?this.N(a.key,a.primaryKey,a.value):this.N()};
t.openCursor=function(a,b){function c(a,b,c){p.f=m;p.f.onsuccess=la(p.Va,p);p.N(a,p.e?b:void 0,c);m=null}var d=this+" opening ";null!=a&&(d+="{"+a,d=null!=b?d+(";"+b+"}"):d+"}");H(this.c,d);var e=this.m,d=this.g.objectStore(this.k),f=y(this.J)?d.index(this.J):null;if(v(a))var g=f?!v(b):!0,h=e?e.lower:void 0,l=e?e.upper:void 0,n=e?!!e.lowerOpen:!1,e=e?!!e.upperOpen:!1,e=Hc(this.reverse?new O(h,a,n,g):new O(a,l,g,e));var m;this.Ka?f?m=null!=this.R?f.openKeyCursor(e,this.R):null!=e?f.openKeyCursor(e):
f.openKeyCursor():m=null!=this.R?d.openCursor(e,this.R):null!=e?d.openCursor(e):d.openCursor():f?m=null!=this.R?f.openCursor(e,this.R):null!=e?f.openCursor(e):f.openCursor():m=null!=this.R?d.openCursor(e,this.R):null!=e?d.openCursor(e):d.openCursor();var p=this;m.onerror=function(a){var b=m.error;a.preventDefault();p.Ob(b)};null!=a?m.onsuccess=function(d){if(d=d.target.result){var e=pc.cmp(d.key,a),f=p.reverse?-1:1;if(e==f)c(d.key,d.primaryKey,d.value);else if(e==-f)d["continue"](a);else if(null!=
b)if(pc.cmp(d.primaryKey,b)==f)c(d.key,d.primaryKey,d.value);else d["continue"]();else d["continue"]()}else c()}:(p.f=m,p.f.onsuccess=la(p.Va,p))};t.ab=function(){return!!this.f};t.update=function(a){var b=this.f.result;if(b){var c=new D;a=b.update(a);a.onsuccess=function(a){c.r(a.target.result)};a.onerror=function(a){a.preventDefault();c.o(a)};return c}throw new od("cursor gone");};
t.clear=function(){var a=this.f.result;if(a){var b=new D,a=a["delete"]();a.onsuccess=function(){b.r(1)};a.onerror=function(a){a.preventDefault();b.o(a)};return b}throw new od("cursor gone");};t.advance=function(a){var b=this.f.result;if(1==a)b["continue"]();else b.advance(a)};
t.Ra=function(a){var b=this.f.result,c=pc.cmp(a,b.primaryKey);if(1!=c)throw new Fc('continuing primary key "'+a+'" must higher than current primary key "'+b.primaryKey+'"');var d=this;this.f.onsuccess=function(e){if(b=e.target.result)if(c=pc.cmp(b.primaryKey,a),0==c||1==c&&!d.reverse||-1==c&&d.reverse)d.f.onsuccess=la(d.Va,d),d.N(b.key,d.e?b.primaryKey:void 0,b.value);else b["continue"]();else d.f.onsuccess=la(d.Va,d),d.N()};b["continue"]()};
t.Ea=function(a){var b=this.f.result;if(null!=a)b["continue"](a);else b["continue"]()};t.ea=function(){tf.p.ea.call(this);this.f=null};t.toString=function(){return"IDB"+tf.p.toString.call(this)};function uf(a,b){this.a=b}C(uf,xd);t=uf.prototype;t.c=J("ydn.db.crud.req.IndexedDb");t.Ua=function(a,b){function c(e){var f=a.a.objectStore(b[e]).count();f.onsuccess=function(f){d[e]=f.target.result;e++;e==b.length?R(a,d):c(e)};f.onerror=function(b){b.preventDefault();R(a,f.error,!0)}}var d=[];0==b.length?R(a,[]):c(0)};
t.tb=function(a,b,c,d){var e=a.a.objectStore(b);H(this.c,V(a)+" addObject: "+b+" "+d);var f;f=v(d)?e.add(c,d):e.add(c);f.onsuccess=function(b){R(a,b.target.result)};f.onerror=function(b){b.preventDefault();R(a,f.error,!0)}};
t.Gb=function(a,b,c,d){var e=a.a.objectStore(b);H(this.c,V(a)+' putObject to store "'+b+'" '+(v(d)?" key: "+d:""));var f;f=v(d)?e.put(c,d):e.put(c);f.onsuccess=function(b){R(a,b.target.result)};f.onerror=function(d){"DataError"==d.name&&(d=W(c),d=new kd(b+": "+d.substring(0,70)));d.preventDefault();R(a,f.error,!0)}};
t.ub=function(a,b,c,d){function e(m){var q;q=null!=d?n.add(c[m],d[m]):n.add(c[m]);q.onsuccess=function(b){g++;f[m]=b.target.result;g==c.length?R(a,f,l):(b=m+10,b<c.length&&e(b))};q.onerror=function(d){g++;var n=q.error;F(h.c,V(a)+' add request to "'+b+'" cause '+n.name+' for object "'+ge(c[m])+'" at index '+m+" of "+c.length+" objects.");f[m]=n;l=!0;d.preventDefault();g==c.length?R(a,f,l):(d=m+10,d<c.length&&e(d))}}var f=[],g=0,h=this,l=!1,n=a.a.objectStore(b);H(this.c,V(a)+" addObjects: "+b+" "+
c.length+" objects");if(0<c.length)for(var m=0;10>m&&m<c.length;m++)e(m);else R(a,[])};
t.Hb=function(a,b,c,d){function e(m){if(null==c[m])if(H(l.c,"empty object at "+m+" of "+c.length),g++,g==c.length)R(a,f,h);else{var q=m+10;q<c.length&&e(q)}var r;r=null!=d?n.put(c[m],d[m]):n.put(c[m]);r.onsuccess=function(b){g++;f[m]=b.target.result;g==c.length?R(a,f,h):(b=m+10,b<c.length&&e(b))};r.onerror=function(d){g++;var n=r.error;H(l.c,V(a)+' put request to "'+b+'" cause '+n.name+' for object "'+ge(c[m])+'" at index '+m+" of "+c.length+" objects.");f[m]=n;h=!0;d.preventDefault();g==c.length?
R(a,f,h):(d=m+10,d<c.length&&e(d))}}var f=[],g=0,h=!1,l=this,n=a.a.objectStore(b);H(this.c,V(a)+" put "+c.length+' objects to store "'+b+'"');if(0<c.length)for(var m=0;10>m&&m<c.length;m++)e(m);else R(a,[])};
t.Eb=function(a,b,c){function d(l){var m=c[l],p=m.k,q=a.a.objectStore(p),r;r=null===q.keyPath?q.put(b[l],m.id):q.put(b[l]);r.onsuccess=function(c){f++;e[l]=c.target.result;f==b.length?R(a,e,g):(c=l+10,c<b.length&&d(c))};r.onerror=function(c){f++;F(h.c,"request result "+c.name+' error when put keys to "'+p+'" for object "'+ge(b[l])+'" at index '+l+" of "+b.length+" objects.");e[l]=r.error;g=!0;c.preventDefault();f==b.length?R(a,e,g):(c=l+10,c<b.length&&d(c))}}var e=[],f=0,g=!1,h=this;H(this.c,V(a)+
" putByKeys: of "+b.length+" objects");if(0<b.length)for(var l=0;10>l&&l<b.length;l++)d(l);else R(a,e,g)};
t.Fb=function(a,b,c,d,e,f){function g(){var a={},b=e.indexOf("\n",m),d=!1,r;-1==b?(d=!0,r=e.substring(m)):(r=e.substring(m,b),m=b+1);for(var b=r.split(f),E=0;E<p.length;E++){var U=b[E];q[E]&&(q[E]==He?U=Ca(U,'"'):"INTEGER"==q[E]?U=parseInt(U,10):"NUMERIC"==q[E]&&(U=parseFloat(U)));a[p[E]]=U}var ra=l.put(a);ra.onsuccess=function(a){n.push(a.target.result);d?c(n):g()};ra.onerror=function(a){"DataError"==a.name&&(a=new kd(h+": "+r.substring(0,70)));a.preventDefault();c(ra.error,!0)}}var h=Y(this.a,d),
l=a.objectStore(d),n=[],m=e.indexOf("\n"),p=e.substr(0,m).split(f),q=[];for(a=0;a<p.length;a++){var r=je(h,p[a]);r?q[a]=r.type:p[a]==h.keyPath&&(q[a]=h.type)}m++;H(this.c,b+" Loading data  of "+p.length+"-fields record to "+d);g()};
t.gb=function(a,b,c){var d=a.a.objectStore(b);H(this.c,V(a)+" clearById: "+b+" "+c);var e=d.openCursor(Kc.only(c));e.onsuccess=function(b){if(b=b.target.result){var c=b["delete"]();c.onsuccess=function(){R(a,1)};c.onerror=function(){R(a,c.error,!0)}}else R(a,0)};e.onerror=function(b){b.preventDefault();R(a,e.error,!0)}};
t.Jb=function(a,b){function c(h){h++;if(h>=b.length)0<g.length?R(a,g,!0):R(a,d);else{b[h].k!=e&&(e=b[h].k,f=a.a.objectStore(e));var l=f["delete"](b[h].id);l.onsuccess=function(){d++;c(h)};l.onerror=function(a){a.preventDefault();g[h]=l.error;c(h)}}}var d=0,e,f;H(this.c,V(a)+" removeByKeys: "+b.length+" keys");var g=[];c(-1)};
t.hb=function(a,b,c){var d=a.a.objectStore(b),e=d.count(c);H(this.c,V(a)+" clearByKeyRange: "+b+" "+c);e.onsuccess=function(b){var e=b.target.result,h=d["delete"](c);h.onsuccess=function(){R(a,e)};h.onerror=function(){R(a,h.error,!0)}};e.onerror=function(b){b.preventDefault();R(a,e.error,!0)}};t.xb=function(a,b,c){var d=a.a.objectStore(b);H(this.c,V(a)+" "+b+" "+c);var e=d["delete"](c);e.onsuccess=function(){R(a,void 0)};e.onerror=function(b){b.preventDefault();R(a,e.error,!0)}};
t.Ib=function(a,b,c,d){var e=a.a.objectStore(b).index(c);H(this.c,V(a)+" clearByIndexKeyRange: "+b+":"+c+" "+d);var f=[],g=e.openCursor(d),h=0;g.onsuccess=function(b){var c=b.target.result;if(c){var d=c["delete"]();d.onsuccess=function(){h++;c["continue"]()};d.onerror=function(a){f.push(d.error);a.preventDefault();c["continue"]()}}else 0<f.length?R(a,f,!0):R(a,h)};g.onerror=function(b){b.preventDefault();R(a,g.error,!0)}};
t.Ta=function(a,b){var c=b.length,d=0;H(this.c,V(a)+" clearByStores: "+b);for(var e=0;e<c;e++){var f=a.a.objectStore(b[e]).clear();f.onsuccess=function(){d++;d==c&&R(a,d)};f.onerror=function(b){d++;b.preventDefault();d==c&&R(a,f.error,!0)}}};t.Ya=function(a,b,c){var d=this;H(this.c,V(a)+b+":"+c);var e=a.a.objectStore(b).get(c);e.onsuccess=function(b){H(d.c,V(a)+" record "+c+(null!=b.target.result?" ":" not ")+" exists.");R(a,b.target.result)};e.onerror=function(b){b.preventDefault();R(a,e.error,!0)}};
t.Cb=function(a,b,c){function d(b){if(null==c[b])if(f++,e[b]=void 0,f==h)R(a,e);else{var n=b+10;n<h&&d(n)}var m;m=g.get(c[b]);m.onsuccess=function(c){f++;e[b]=c.target.result;f==h?R(a,e):(c=b+10,c<h&&d(c))};m.onerror=function(b){f++;b.preventDefault();R(a,m.error,!0)}}var e=[];e.length=c.length;var f=0,g=a.a.objectStore(b),h=c.length;H(this.c,V(a)+" "+b+":"+h+" ids");if(0<h)for(b=0;10>b&&b<h;b++)d(b);else R(a,[])};
t.Db=function(a,b){function c(f){var h=b[f],l=a.a.objectStore(h.k).get(h.id);l.onsuccess=function(h){e++;d[f]=h.target.result;e==b.length?R(a,d):(h=f+10,h<b.length&&c(h))};l.onerror=function(b){e++;b.preventDefault();R(a,l.error,!0)}}var d=[];d.length=b.length;var e=0;H(this.c,V(a)+" "+b.length+" ids");if(0<b.length)for(var f=0;10>f&&f<b.length;f++)c(f);else R(a,[])};
t.Ga=function(a,b,c,d,e){if(d&&e)throw new ye("unique count not available in IndexedDB");e=a.a.objectStore(b);b=V(a)+" "+b+(d?":"+d:"")+(c?":"+W(c):"");H(this.c,b);var f;null!=d?(d=e.index(d),f=null!=c?d.count(c):d.count()):f=null!=c?e.count(c):e.count();f.onsuccess=function(b){R(a,b.target.result)};f.onerror=function(b){b.preventDefault();R(a,f.error,!0)}};
t.Z=function(a,b,c,d,e,f,g,h,l,n){var m=[],p=a.a.objectStore(c),q=f?l?"prevunique":"prev":l?"nextunique":"next";c=V(a)+" "+b+" "+c+(d?":"+d:"")+(e?W(e):"");f&&(c+=" reverse");l&&(c+=" unique");if(n&&v(n[0])){l=d?!v(n[1]):!0;var r=n[0],z=e?e.lower:void 0,A=e?e.upper:void 0,I=e?!!e.lowerOpen:!1;e=e?!!e.upperOpen:!1;e=Hc(f?new O(z,r,I,l):new O(r,A,l,e));c+=" starting from "+W(n[0]);v(n[1])&&(c+=", "+W(n[1]))}H(this.c,c);var L;L=1==b||2==b||3==b?d?p.index(d).openKeyCursor(e,q):p.openCursor(e,q):d?p.index(d).openCursor(e,
q):p.openCursor(e,q);var E=!1;L.onsuccess=function(c){if(c=c.target.result){if(!E){if(0<h){E=!0;c.advance(h);return}if(n&&d&&v(n[0]))if(v(n[1])){var e=pc.cmp(c.key,n[0]),l=f?-1:1;if(0==e){e=pc.cmp(c.primaryKey,n[1]);if(0==e){E=!0;c["continue"]();return}if(e==l)E=!0;else{c["continue"]();return}}else E=!0}else E=!0;else E=!0}1==b?m.push(c.key):2==b?m.push(c.primaryKey):3==b?(l={},d&&(l[d]=c.key),p.keyPath?l[p.keyPath]=c.primaryKey:l._ROWID_=c.primaryKey,m.push(l)):4==b?m.push(c.value):m.push([c.key,
c.primaryKey,c.value]);if(m.length<g)c["continue"]();else n&&(n[0]=wd(c.key),n[1]=wd(c.primaryKey)),R(a,m)}else n&&(n[0]=void 0,n[1]=void 0),R(a,m)};L.onerror=function(b){b.preventDefault();R(a,L.error,!0)}};function vf(a,b){this.a=b}C(vf,uf);vf.prototype.c=J("ydn.db.core.req.IndexedDb");vf.prototype.b=function(a,b,c,d){c=Y(this.a,c);return new tf(a,b,c,d)};function wf(a,b){this.a=b;this.b=a}wf.prototype.c=J("ydn.db.sql.req.nosql.Node");wf.prototype.toJSON=function(){return{sql:this.a}};wf.prototype.toString=aa("idb.Node:");
wf.prototype.Pb=function(a,b){var c=Ra(this.a.a)[0],d=this.a.h,e=this.a.Wb,e=isNaN(e)?100:e,f=this.a.Yb,f=isNaN(f)?0:f,g=this.a.i,h=sf(this.a),l=null,n=this.a.Kb;if(0==d.length)l=null;else if(1==d.length)l=Ic(d[0].a);else throw new Cc("too many conditions.");null===h||Id(a,function(a,b,c){var d=a;b||(d=a.map(function(a){var b=h.length;if(1==b)return qc(a,h[0]);for(var c={},d=0;d<b;d++)c[h[d]]=qc(a,h[d]);return c}));c(d,b)});var d=0<d.length?d[0].qa:void 0,m=V(a)+" executing on"+c;d&&(m+=":"+d);m+=
" "+Mc(l);G(this.c,m);g&&g!=this.b.keyPath?b.Z(a,4,c,g,l,n,e,f,!1):v(d)&&d!=this.b.keyPath?b.Z(a,4,c,d,l,n,e,f,!1):b.Z(a,4,c,null,l,n,e,f,!1)};function xf(a,b){wf.call(this,a,b)}C(xf,wf);
xf.prototype.Pb=function(a,b){var c,d=Ra(this.a.a)[0],e=this.a.h,f=null;if(0==e.length)f=null;else if(1==e.length)f=Ic(e[0].a);else throw new Cc("too many conditions.");var g=this.a.d,e=0<e.length?e[0].qa:void 0,h=V(a)+" executing "+g+" on "+d;e&&(h+=":"+e);h+=" "+Mc(f);G(this.c,h);if("COUNT"==g)f?b.Ga(a,d,f,e,!1):b.Ga(a,d,null,void 0,!1);else{var l,h=sf(this.a);if(!h||0==h.length)throw new fd("field name require for reduce operation: "+g);h=h[0];if("MIN"==g)l=yf(h);else if("MAX"==g)l=zf(h);else if("AVG"==
g)c=0,l=Af(h);else if("SUM"==g)c=0,l=Bf(h);else throw new $e(g);var n;n=v(e)?new Wc(d,e,f):new Uc(d,f);var m=b.b(a.a,V(a),d,4);n.load(m);m.s=function(b){R(a,b,!0)};var p=0;m.l=function(b){null!=b?(b=n.b?m.C():m.ra(),c=l(b,c,p),m.advance(1),p++):R(a,c)}}};function Af(a){return function(b,c,d){v(c)||(c=0);return(c*d+b[a])/(d+1)}}function Bf(a){return function(b,c){return c+b[a]}}function yf(a){return function(b,c){var d=b[a];return v(c)?c<d?c:d:d}}
function zf(a){return function(b,c){var d=b[a];return v(c)?c>d?c:d:d}};function Ud(a,b){this.a=b}C(Ud,vf);Ud.prototype.c=J("ydn.db.sql.req.IndexedDb");Ud.prototype.executeSql=function(a,b,c){if(c=qf(b,c))throw new td(c);c=Ra(b.a);if(1==c.length){var d=Y(this.a,c[0]);if(!d)throw new pd(c[0]);var e=sf(b);if(e)for(var f=0;f<e.length;f++)if(!ke(d,e[f]))throw new pd('Index "'+e[f]+'" not found in '+c[0]);(b.d?new xf(d,b):new wf(d,b)).Pb(a,this)}else throw new $e(b.H);};function Cf(a,b,c,d){Bd.call(this,a,b,c,d);this.la=null;this.f=this.h=void 0}C(Cf,Bd);t=Cf.prototype;t.c=J("ydn.db.core.req.WebsqlCursor");t.C=s("f");t.Nb=function(a,b,c,d,e){Cf.p.Nb.call(this,a,b,c,d,e);this.la=y(b)?je(this.b,b):null};t.ra=s("u");t.ba=function(a){this.u=this.f=this.h=void 0;if(v(a))if(B(a)){var b=Ke(a[this.b.f],this.b.type);this.f=b;if(this.e){var c=je(this.b,this.J);this.h=Ke(a[this.J],c.type)}else this.h=b;this.u=this.Ka?b:Df(a,this.b)}else this.u=a};
function Ef(a,b,c){je(a.b,a.J);var d=[],e=a.J,f=a.m,g=a.h;if(null!=f){var h=f.lower,l=f.upper,n=f.lowerOpen,f=f.upperOpen;a.reverse?l=null!=l&&-1==M(l,g)?l:g:h=null!=h&&1==M(h,g)?h:g;f=null!=h&&null!=l?O.bound(h,l,!!n,!!f):null!=h?Kc.lowerBound(h,!!n):Kc.upperBound(l,!!f)}else f=a.reverse?Kc.upperBound(g):Kc.lowerBound(g);e=Pe(a.b,d,a.fa,e,f,a.reverse,a.unique);c=a.reverse?Kc.upperBound(c,!1):Kc.lowerBound(c,!1);c=Pe(a.b,d,a.fa,a.b.f,c,a.reverse,a.unique);e.n=e.n?e.n+(" AND "+c.n):c.n;c="SELECT "+
e.select+" FROM "+e.da+(e.n?" WHERE "+e.n:"")+(e.group?" GROUP BY "+e.group:"")+" ORDER BY "+e.W;c+=" LIMIT 1";H(a.c,a+": continuePrimary:  SQL: "+c+" : "+W(d));a.g.executeSql(c,d,function(c,d){0<d.rows.length?a.ba(d.rows.item(0)):a.ba();b.call(a,a.h,a.f,a.u);b=null},function(c,d){F(a.c,"get error: "+d.message);a.Ob(d);a.ba();b.call(a,a.f,a.h,a.u);b=null;return!1})}
function Ff(a,b,c,d,e,f){var g=!d;d=[];a.e&&null!=f&&null!=c?c=Se(a.b,a.fa,d,a.la.getName(),a.m,c,g,f,a.reverse,a.unique):null!=c?(f=a.la?a.la.getName():null,c=Re(a.b,a.fa,d,f,a.m,a.reverse,a.unique,c,g)):(c=Oe(a.b,d,a.fa,a.e?a.la.e:a.b.f,a.m,a.reverse,a.unique),a.e&&(c+=", "+a.b.d+" ASC"));c+=" LIMIT 1";0<e&&(c+=" OFFSET "+e);H(a.c,a+": continue:  SQL: "+c+" : "+W(d));a.g.executeSql(c,d,function(c,d){0<d.rows.length?a.ba(d.rows.item(0)):a.ba();b.call(a,a.h,a.f,a.u);b=null},function(c,d){F(a.c,"get error: "+
d.message);a.Ob(d);a.ba();b.call(a,a.f,a.h,a.u);b=null;return!1})}t.ab=function(){return!!this.g};t.update=function(a){if(!this.ab())throw new od;var b=new D,c=this.C();a=Ue(this.b,a,c);var d="REPLACE INTO "+Qe(this.b)+" ("+a.Rb.join(", ")+") VALUES ("+a.dc.join(", ")+")";H(this.c,this+': update "'+d+'" : '+W(a.B));this.g.executeSql(d,a.B,function(){b.r(c)},function(a,c){b.o(c);return!1});return b};
t.advance=function(a){var b=this.h,c=this.f,d=!0;null==this.h||this.e&&null==this.f||(a-=1,d=!1);Ff(this,function(a,d,g){var h=null!=b&&null!=a&&0==M(b,a);if(this.e){var l=null!=d&&null!=c&&0==M(d,c);if(h&&l)throw new Fc("current: "+b+";"+c+" next: "+a+";"+d);}else if(h)throw new Fc("current: "+b+" next: "+a);this.N(a,d,g)},this.h,d,a,this.f)};t.Ea=function(a){null!=a?Ff(this,this.N,a,!0):this.advance(1)};t.openCursor=function(a,b){Ff(this,this.N,a,!1,0,b)};
t.clear=function(){if(!this.ab())throw new od;var a=new D,b=this.b.f,b="DELETE FROM "+Qe(this.b)+" WHERE "+b+" = ?",c=[this.C()];H(this.c,this+': clear "'+b+'" : '+W(c));this.g.executeSql(b,c,function(b,c){a.r(c.rowsAffected)},function(b,c){a.o(c);return!1});return a};t.Ra=function(a){var b=M(a,this.f);if(0==b||1==b&&this.reverse||-1==b&&!this.reverse)throw new fd(this+" to continuePrimaryKey  from "+this.f+" to "+a+" on "+this.R+" direction is wrong");Ef(this,this.N,a)};
t.toString=function(){return"WebSql"+Cf.p.toString.call(this)};function Gf(a,b){this.a=b}C(Gf,xd);t=Gf.prototype;t.c=J("ydn.db.crud.req.WebSql");function Df(a,b){var c=a._default_?ze(a._default_):{};if(null!=b.keyPath){var d=Ke(a[b.keyPath],b.type);null!=d&&re(b,c,d)}for(d=0;d<b.a.length;d++){var e=b.a[d],f=e.e;"_default_"==f||e.g||e.multiEntry||"DATE"!=e.type||(f=Ke(a[f],e.type),v(f)&&Je(e,c,f))}return c}t.tb=function(a,b,c,d){Hf(this,a,!0,!0,b,[c],[d])};t.Fb=function(){throw"not impl";};t.Gb=function(a,b,c,d){Hf(this,a,!1,!0,b,[c],[d])};
t.ub=function(a,b,c,d){Hf(this,a,!0,!1,b,c,d)};
function Hf(a,b,c,d,e,f,g){function h(c,e){if(null==f[c])if(H(a.c,"empty object at "+c+" of "+f.length),p++,p==f.length)G(a.c,q+" success "+q),R(b,m,r);else{var I=c+2;I<f.length&&h(I,e)}var L;L=v(g)?Ue(l,f[c],g[c]):Ue(l,f[c]);I=n+Qe(l)+" ("+L.Rb.join(", ")+") VALUES ("+L.dc.join(", ")+");";H(a.c,V(b)+" SQL: "+I+" PARAMS: "+L.B+" REQ: "+c+" of "+f.length);e.executeSql(I,L.B,function(g,q){function I(c,d){var f="ydn.db.me:"+l.getName()+":"+c.getName(),f=n+Fa(f)+" ("+l.d+", "+c.d+") VALUES (?, ?)",g=
[Oc(S,l.type),Oc(d,c.type)];H(a.c,V(b)+" multiEntry "+f+" "+g);e.executeSql(f,g,k(),function(b,c){F(a.c,"multiEntry index insert error: "+c.message);return!1})}p++;var S=v(L.key)?L.key:q.insertId;1>q.rowsAffected&&(r=!0,S=new jd(S+" no-op"));for(var za=0,rd=l.a.length;za<rd;za++){var lb=l.index(za);if(lb.multiEntry)for(var Db=qc(f[c],lb.keyPath),uh=(Db?Db.length:0)||0,ue=0;ue<uh;ue++)I(lb,Db[ue])}d?R(b,S):(m[c]=S,p==f.length?R(b,m,r):(za=c+2,za<f.length&&h(za,g)))},function(e,g){p++;r=!0;6==g.code?
g.name="ConstraintError":F(a.c,"error: "+g.message+" "+q);if(d)R(b,g,!0);else if(m[c]=g,p==f.length)H(a.c,"success "+q),R(b,m,r);else{var l=c+2;l<f.length&&h(l,e)}return!1})}var l=Y(a.a,e),n=c?"INSERT INTO ":"INSERT OR REPLACE INTO ";c=b.a;var m=[],p=0,q=V(b)+" inserting "+f.length+" objects.",r=!1;if(0<f.length)for(e=0;2>e&&e<f.length;e++)h(e,c);else G(a.c,"success"),R(b,[])}t.Hb=function(a,b,c,d){Hf(this,a,!1,!1,b,c,d)};
t.Eb=function(a,b,c){if(0==c.length)R(a,[]);else{for(var d=[],e=0,f=0,g=this,h=function(h,l){var m=[];H(g.c,"put "+l.length+" objects to "+h);for(var n=Te(Y(g.a,h)),p=n?void 0:[],q=0;q<l.length;q++)m.push(b[l[q]]),n||p.push(c[l[q]].id);n=Hd(a);n.S(function(b){for(var c=0;c<l.length;c++)d[l[c]]=b[c];e++;e==f&&R(a,d)},function(){e++;e==f&&R(a,d,!0)});Hf(g,n,!1,!1,h,m,p)},l="",n=[],m=[],p=0;p<c.length;p++){var q=c[p].k,r=c[p].id;q!=l?(f++,0<n.length&&h(l,n),n=[p],m=[r],l=q):(n.push(p),m.push(r))}0<n.length&&
h(l,n)}};t.Ya=function(a,b,c){var d=a.a,e=Y(this.a,b),f=this;b=e.d;c=[Oc(c,e.type)];b="SELECT * FROM "+Qe(e)+" WHERE "+b+" = ?";var g=V(a)+" SQL: "+b+" PARAMS: "+c;H(this.c,g);d.executeSql(b,c,function(b,c){if(0<c.rows.length){var d=c.rows.item(0);null!=d?(d=Df(d,e),R(a,d)):(G(f.c,"success no result: "+g),R(a,void 0))}else G(f.c,"success no result: "+g),R(a,void 0)},function(b,c){F(f.c,"error: "+g+" "+c.message);R(a,c,!0);return!1})};
t.Cb=function(a,b,c){function d(b,e){var p=l.d,q=[Oc(c[b],l.type)],r="SELECT * FROM "+Qe(l)+" WHERE "+p+" = ?";H(f.c,"SQL: "+r+" PARAMS: "+q);e.executeSql(r,q,function(e,f){h++;if(0<f.rows.length){var m=f.rows.item(0);null!=m&&(g[b]=Df(m,l))}else g[b]=void 0;h==c.length?R(a,g):(m=b+10,m<c.length&&d(m,e))},function(e,l){h++;F(f.c,"error: "+r+" "+l.message);if(h==c.length)R(a,g);else{var m=b+10;m<c.length&&d(m,e)}return!1})}var e=a.a,f=this,g=[],h=0,l=Y(this.a,b);if(0<c.length)for(b=0;10>b&&b<c.length;b++)d(b,
e);else G(f.c,"success"),R(a,[])};
t.Db=function(a,b){function c(d,h){var m=b[d],p=Y(e.a,m.k),q=w(m.id)?m.id.join("^|"):m.id instanceof Date?+m.id:m.id,m=p.d,q=[Oc(q,p.type)],r="SELECT * FROM "+Qe(p)+" WHERE "+m+" = ?";H(e.c,"SQL: "+r+" PARAMS: "+q);h.executeSql(r,q,function(h,m){g++;if(0<m.rows.length){var n=m.rows.item(0);null!=n&&(f[d]=Df(n,p))}else f[d]=void 0;g==b.length?(H(e.c,"success "+r),R(a,f)):(n=d+10,n<b.length&&c(n,h))},function(b,c){R(a,c,!0);return!1})}var d=a.a,e=this,f=[],g=0;if(0<b.length)for(var h=0;10>h&&h<b.length;h++)c(h,
d);else H(this.c,"success"),R(a,[])};
t.Ta=function(a,b){function c(d,g){function h(a){a="ydn.db.me:"+l.getName()+":"+a.getName();a="DELETE FROM  "+Fa(a);H(e.c,"SQL: "+a);g.executeSql(a,[])}var l=Y(e.a,b[d]),n="DELETE FROM  "+Qe(l);H(e.c,"SQL: "+n+" PARAMS: []");g.executeSql(n,[],function(g){d==b.length-1?(H(e.c,"success "+n),R(a,b.length)):c(d+1,g)},function(b,c){R(a,c,!0);return!1});for(var m=0,p=l.a.length;m<p;m++){var q=l.index(m);q.multiEntry&&h(q)}}var d=a.a,e=this;0<b.length?c(0,d):(H(this.c,"success"),R(a,0))};
t.Jb=function(a,b){function c(h){if(h>=b.length)R(a,f,g);else{var l=Y(e.a,b[h].k),n=Oc(b[h].id,l.type),m=" WHERE "+l.d+" = ?",p="DELETE FROM "+Qe(l)+m,q=V(a)+" SQL: "+p+" PARAMS: "+[n];d.executeSql(p,[n],function(){f++;c(h)},function(a,b){F(e.c,"error: "+q+b.message);g=!0;c(h);return!1});h++;for(var p=function(b){b="ydn.db.me:"+l.getName()+":"+b.getName();b="DELETE FROM  "+Fa(b)+m;H(e.c,V(a)+NaN+b);d.executeSql(b,[n])},r=0,z=l.a.length;r<z;r++){var A=l.index(r);A.multiEntry&&p(A)}}}var d=a.a,e=this,
f=0,g=!1;H(this.c,V(a)+" removeByKeys: "+b.length+" keys");c(0)};t.gb=function(a,b,c){function d(b){b="ydn.db.me:"+f.getName()+":"+b.getName();b="DELETE FROM  "+Fa(b)+l;H(h.c,V(a)+NaN+b);e.executeSql(b,[g])}var e=a.a,f=Y(this.a,b),g=Oc(c,f.type),h=this,l=" WHERE "+f.d+" = ?";b="DELETE FROM "+Qe(f)+l;H(this.c,V(a)+" SQL: "+b+" PARAMS: "+[g]);e.executeSql(b,[g],function(b,c){R(a,c.rowsAffected)},function(b,c){R(a,c,!0);return!1});b=0;for(c=f.a.length;b<c;b++){var n=f.index(b);n.multiEntry&&d(n)}};
t.xb=function(a,b,c){If(this,a,b,void 0,c)};t.hb=function(a,b,c){If(this,a,b,void 0,c)};t.Ib=function(a,b,c,d){If(this,a,b,c,d)};
function If(a,b,c,d,e){function f(c){c="ydn.db.me:"+h.getName()+":"+c.getName();c="DELETE FROM  "+Fa(c)+m;H(a.c,V(b)+NaN+c);g.executeSql(c,n)}var g=b.a,h=Y(a.a,c);c="DELETE FROM "+Qe(h);var l=[],n=[],m="";null!=e&&(v(d)?(d=je(h,d),Nc(d.d,d.type,e,n,l)):Nc(h.d,h.type,e,n,l),m=" WHERE "+n.join(" AND "));c+=m;var p=V(b)+" SQL: "+c+" PARAMS: "+l;H(a.c,p);g.executeSql(c,l,function(c,d){H(a.c,"success "+p);R(b,d.rowsAffected)},function(c,d){F(a.c,"error: "+p+d.message);R(b,d,!0);return!1});e=0;for(d=h.a.length;e<
d;e++)c=h.index(e),c.multiEntry&&f(c)}t.Ua=function(a,b){function c(g){var h="SELECT COUNT(*) FROM "+Fa(b[g]);H(e.c,"SQL: "+h+" PARAMS: []");d.executeSql(h,[],function(d,e){var h=e.rows.item(0);f[g]=parseInt(h["COUNT(*)"],10);g++;g==b.length?R(a,f):c(g)},function(b,c){R(a,c,!0);return!1})}var d=a.a,e=this,f=[];0==b.length?(H(this.c,"success"),R(a,0)):c(0)};
t.Ga=function(a,b,c,d,e){var f=[];b=Oe(Y(this.a,b),f,6,d,c,!1,e);H(this.c,V(a)+" SQL: "+b+" PARAMS: "+f);a.a.executeSql(b,f,function(b,c){var d=c.rows.item(0);R(a,af(d))},function(b,c){R(a,c,!0);return!1})};
t.Z=function(a,b,c,d,e,f,g,h,l,n){var m=this,p=[],q=Y(this.a,c),r=q.f,z=q.type,A=z,I=null!=d&&d!==r?je(q,d):null,L=d||r;I&&(A=I.type);c=[];if(n&&v(n[0])){var E=n[0];I&&v(n[1])?(d=n[1],e=Se(q,b,c,I.getName(),e,E,!0,d,f,l)):e=Re(q,b,c,d,e,f,l,E,!0)}else e=Oe(q,c,b,L,e,f,l);ea(g)&&(e+=" LIMIT "+g);ea(h)&&(e+=" OFFSET "+h);var U=a+" SQL: "+e+" ;params= "+W(c);H(this.c,U);a.a.executeSql(e,c,function(c,d){for(var e=d.rows.length,f,g=0;g<e;g++)f=d.rows.item(g),2==b?p[g]=Ke(f[r],z):1==b?p[g]=Ke(f[L],A):3==
b?p[g]=[Ke(f[L],A),Ke(f[r],z)]:null!=f&&(p[g]=Df(f,q));G(m.c,"success "+a);n&&f&&(n[0]=Ke(f[L],A),n[1]=Ke(f[r],z));R(a,p)},function(b,c){F(m.c,"error: "+U+c.message);R(a,c,!0);return!1})};function Jf(a,b){this.a=b}C(Jf,Gf);Jf.prototype.c=J("ydn.db.core.req.WebSql");Jf.prototype.b=function(a,b,c,d){c=Y(this.a,c);return new Cf(a,b,c,d)};function Kf(a,b){this.b=b;this.d=a;this.a=sf(b)}Kf.prototype.c=J("ydn.db.sql.req.websql.Node");Kf.prototype.toJSON=function(){return{sql:this.b.H}};Kf.prototype.toString=aa("websql.Node:");function Lf(a,b){if(a.a){if(1==a.a.length){if(B(b))return db(b,a.a[0]);return}for(var c={},d=0;d<a.a.length;d++)c[a.a[d]]=db(b,a.a[d]);return c}return Df(b,a.d)}
Kf.prototype.kc=function(a,b,c){var d=this,e=[];b.executeSql(this.b.H,c,function(b,c){for(var h=c.rows.length,l=0;l<h;l++){var n=c.rows.item(l);if(B(n))var m=Lf(d,n);e.push(m)}a(e)},function(b,c){F(d.c,"Sqlite error: "+c.message);a(c,!0);return!0})};function Mf(a,b){Kf.call(this,a,b)}C(Mf,Kf);Mf.prototype.kc=function(a,b,c){var d=this;b.executeSql(this.b.H,c,function(b,c){var d=c.rows.length;if(1==d)d=af(c.rows.item(0)),a(d);else if(0==d)a(void 0);else throw new md;},function(b,c){F(d.c,"Sqlite error: "+c.message);a(c,!0);return!0})};function Vd(a,b){this.a=b}C(Vd,Jf);Vd.prototype.c=J("ydn.db.sql.req.WebSql");Vd.prototype.executeSql=function(a,b,c){var d=Ra(b.a);if(1==d.length){var e=Y(this.a,d[0]);if(!e)throw new pd(d[0]);var f=sf(b);if(f)for(var g=0;g<f.length;g++)if(!ke(e,f[g]))throw new pd('Index "'+f[g]+'" not found in '+d[0]);(b.d?new Mf(e,b):new Kf(e,b)).kc(function(b,c){R(a,b,c)},a.a,c)}else throw new $e(b.H);};function Nf(){this.a=!1}Nf.prototype.a=!1;function Of(a,b,c,d){Bd.call(this,a,b,c,d);this.i=this.d=this.a=void 0;this.h=this.f=null;this.u=new Nf;this.ib=this.ja=null}C(Of,Bd);t=Of.prototype;t.c=J("ydn.db.core.req.SimpleCursor");t.ab=function(){return!!this.g};t.update=function(a){Pf(this.ib,this.C(),a);return ab()};t.advance=function(a){function b(b){d++;if(!b||d>=a)return Qf(c,b)}var c=this,d=this.f?-1:0;this.reverse?Rf(this.ja,b,this.f):Sf(this.ja,b,this.f)};
t.Ea=function(a){if(null!=a){var b=this,c=new $(a),d=function(c){b.f=c;if(!c)return Qf(b,c);var d=M(c.value.key,a);if(b.reverse){if(1!=d)return Qf(b,c)}else if(-1!=d)return Qf(b,c)};this.reverse?Rf(this.ja,d,c):Sf(this.ja,d,c)}else this.advance(1)};function Tf(a){setTimeout(function(){a.u.a?(a.u.a=!1,a.N(a.a,a.d,a.i),Tf(a)):(a.h(),a.h=null)},4)}
function Qf(a,b){if(a.f=b){var c=b.value;if(a.m)if(a.reverse||null==a.m.upper)a.reverse&&null!=a.m.lower&&(d=M(c.key,a.m.lower),-1==d||0==d&&a.m.lowerOpen)&&(a.f=null);else{var d=M(c.key,a.m.upper);if(1==d||0==d&&a.m.upperOpen)a.f=null}if(a.f){if(a.unique&&null!=a.a&&null!=c.key&&0==M(a.a,c.key))return;a.a=c.key;a.d=a.e?c.a:a.a;4==a.fa&&(a.Ka?a.i=a.d:a.i=Uf(a.ib,a.d))}}a.f||(a.a=void 0,a.d=void 0,a.i=void 0);return a.u.a=!0}
t.openCursor=function(a,b){var c=null;if(this.m)if(this.reverse){var d=this.e?"\uffff":void 0;null!=this.m.upper&&(c=new $(this.m.upper,d))}else null!=this.m.lower&&(c=new $(this.m.lower));null!=a&&(c=this.e?new $(a,b):new $(a));this.h=this.g.j(function(b){function d(b){var e=b.value,f=e.key;if(b&&null!=f)if(null!=a){if(0==Vf(c,e))return}else if(this.m&&(!this.reverse&&this.m.lowerOpen&&null!=this.m.lower&&(e=M(f,this.m.lower),0==e)||this.reverse&&this.m.upperOpen&&null!=this.m.upper&&(e=M(f,this.m.upper),
0==e)))return;return Qf(this,b)}this.ib=Wf(b,this.k);this.ja=Xf(this.ib,this.J);this.reverse?Rf(this.ja,la(d,this),c):Sf(this.ja,la(d,this),c);Tf(this)},this)};t.clear=function(){throw new Dc;};t.Ra=function(){throw new Dc;};t.toString=function(){return"Simple"+Of.p.toString.call(this)};function Yf(a,b,c){a=["ydn.db",a];v(b)&&(a.push(b),v(c)&&(a.push(c),v(void 0)&&a.push(sc(void 0))));return a.join("^|")};function $(a,b){this.key=a;this.a=b}$.prototype.toString=function(){return"ydn.db.con.simple.Node("+this.key+(null!=this.a?", "+this.a+")":")")};function Vf(a,b){var c=M(a.key,b.key);return 0===c?null!=a.a?null!=b.a?M(a.a,b.a):1:null!=b.a?-1:0:c};function Zf(a){this.D=a||$f}function $f(a,b){return String(a)<String(b)?-1:String(a)>String(b)?1:0}t=Zf.prototype;t.v=null;t.D=null;t.V=null;t.U=null;
t.add=function(a){if(null==this.v)return this.U=this.V=this.v=new ag(a),!0;var b=null;bg(this,function(c){var d=null;0<this.D(c.value,a)?(d=c.left,null==c.left&&(b=new ag(a,c),c.left=b,c==this.V&&(this.V=b))):0>this.D(c.value,a)&&(d=c.right,null==c.right&&(b=new ag(a,c),c.right=b,c==this.U&&(this.U=b)));return d});b&&(bg(this,function(a){a.count++;return a.parent},b.parent),cg(this,b.parent));return!!b};
function dg(a,b){bg(a,function(a){var d=null;0<this.D(a.value,b)?d=a.left:0>this.D(a.value,b)?d=a.right:eg(this,a);return d})}t.clear=function(){this.U=this.V=this.v=null};t.contains=function(a){var b=!1;bg(this,function(c){var d=null;0<this.D(c.value,a)?d=c.left:0>this.D(c.value,a)?d=c.right:b=!0;return d});return b};t.Bb=function(){return this.v?this.v.count:0};t.Za=function(){var a=[];fg(this,function(b){a.push(b)});return a};
function fg(a,b){if(a.v){var c,d=c=gg(a);for(c=c.left?c.left:c;null!=d;)if(null!=d.left&&d.left!=c&&d.right!=c)d=d.left;else{if(d.right!=c&&b(d.value))break;var e=d,d=null!=d.right&&d.right!=c?d.right:d.parent;c=e}}}function bg(a,b,c){for(c=c?c:a.v;c&&null!=c;)c=b.call(a,c)}
function cg(a,b){bg(a,function(a){var b=a.left?a.left.height:0,e=a.right?a.right.height:0;1<b-e?(a.left.right&&(!a.left.left||a.left.left.height<a.left.right.height)&&hg(this,a.left),ig(this,a)):1<e-b&&(a.right.left&&(!a.right.right||a.right.right.height<a.right.left.height)&&ig(this,a.right),hg(this,a));b=a.left?a.left.height:0;e=a.right?a.right.height:0;a.height=Math.max(b,e)+1;return a.parent},b)}
function hg(a,b){jg(b)?(b.parent.left=b.right,b.right.parent=b.parent):kg(b)?(b.parent.right=b.right,b.right.parent=b.parent):(a.v=b.right,a.v.parent=null);var c=b.right;b.right=b.right.left;null!=b.right&&(b.right.parent=b);c.left=b;b.parent=c;c.count=b.count;b.count-=(c.right?c.right.count:0)+1}
function ig(a,b){jg(b)?(b.parent.left=b.left,b.left.parent=b.parent):kg(b)?(b.parent.right=b.left,b.left.parent=b.parent):(a.v=b.left,a.v.parent=null);var c=b.left;b.left=b.left.right;null!=b.left&&(b.left.parent=b);c.right=b;b.parent=c;c.count=b.count;b.count-=(c.left?c.left.count:0)+1}
function eg(a,b){if(null!=b.left||null!=b.right){var c=null,d;if(null!=b.left){d=lg(a,b.left);bg(a,function(a){a.count--;return a.parent},d);if(d!=b.left){if(d.parent.right=d.left)d.left.parent=d.parent;d.left=b.left;d.left.parent=d;c=d.parent}d.parent=b.parent;d.right=b.right;d.right&&(d.right.parent=d);b==a.U&&(a.U=d)}else{d=gg(a,b.right);bg(a,function(a){a.count--;return a.parent},d);if(d!=b.right){if(d.parent.left=d.right)d.right.parent=d.parent;d.right=b.right;d.right.parent=d;c=d.parent}d.parent=
b.parent;d.left=b.left;d.left&&(d.left.parent=d);b==a.V&&(a.V=d)}d.count=b.count;jg(b)?b.parent.left=d:kg(b)?b.parent.right=d:a.v=d;cg(a,c?c:d)}else bg(a,function(a){a.count--;return a.parent},b.parent),jg(b)?(b.parent.left=null,b==a.V&&(a.V=b.parent),cg(a,b.parent)):kg(b)?(b.parent.right=null,b==a.U&&(a.U=b.parent),cg(a,b.parent)):a.clear()}function gg(a,b){if(!b)return a.V;var c=b;bg(a,function(a){var b=null;a.left&&(b=c=a.left);return b},b);return c}
function lg(a,b){if(!b)return a.U;var c=b;bg(a,function(a){var b=null;a.right&&(b=c=a.right);return b},b);return c}function ag(a,b){this.value=a;this.parent=b?b:null;this.count=1}ag.prototype.left=null;ag.prototype.right=null;ag.prototype.height=1;function kg(a){return!!a.parent&&a.parent.right==a}function jg(a){return!!a.parent&&a.parent.left==a};function mg(a){this.D=a||$f}C(mg,Zf);function Sf(a,b,c){if(a.v){var d;if(c instanceof ag)d=c;else if(c){if(bg(a,function(a){var b=null;0<this.D(a.value,c)?(b=a.left,d=a):0>this.D(a.value,c)?b=a.right:d=a;return b}),!d)return}else d=gg(a);a=d;for(var e=d.left?d.left:d;null!=a;)if(null!=a.left&&a.left!=e&&a.right!=e)a=a.left;else{if(a.right!=e&&b(a))return;var f=a;a=null!=a.right&&a.right!=e?a.right:a.parent;e=f}b(null)}}
function Rf(a,b,c){if(a.v){var d;if(c instanceof ag)d=c;else if(c){if(bg(a,la(function(a){var b=null;0<this.D(a.value,c)?b=a.left:(0>this.D(a.value,c)&&(b=a.right),d=a);return b},a)),!d)return}else d=lg(a);a=d;for(var e=d.right?d.right:d;null!=a;)if(null!=a.right&&a.right!=e&&a.left!=e)a=a.right;else{if(a.left!=e&&b(a))return;var f=a;a=null!=a.left&&a.left!=e?a.left:a.parent;e=f}b(null)}};function ng(a,b,c){this.f=a;this.storage=b;this.b=c;this.a={};a=this.b.keyPath;this.d=w(a)?a.join(","):a||"_ROWID_";this.a[this.d]=null;this.e=Yf(this.f,this.b.getName(),this.d)+"^|"}
function Xf(a,b){var c=b||a.d;if(!a.a[c]){a.a[c]=new mg(Vf);for(var d=a.storage.length,e=0;e<d;e++){var f=a.storage.key(e);if(null!==f&&0==f.lastIndexOf(a.e,0)){var g=vc(f.substr(a.e.length));if(c==a.d)a.a[c].add(new $(g));else{var h=a.storage.getItem(f);if(null!==h)if(f=je(a.b,c),h=ze(h),h=Ie(f,h),f.multiEntry){if(w(h))for(f=0;f<h.length;f++)a.a[c].add(new $(h[f],g))}else a.a[c].add(new $(h,g))}}}}return a.a[c]}
function og(a,b,c){for(var d in a.a){var e=a.a[d];if(e)if(d==a.d)dg(e,new $(b));else{var f=je(a.b,d),f=qc(c,f.keyPath);dg(e,new $(b,f))}}}function pg(a){for(var b in a.a){var c=a.a[b];c&&c.clear()}a.a={}}
function Pf(a,b,c,d){if(null==b&&(a.b.keyPath&&(b=oe(a.b,c)),a.b.b&&null==b)){b=a.e+sc(void 0);var e=ze(a.storage.getItem(b));e.key_count||(e.key_count=0);e.key_count++;a.storage.setItem(b,W(e));b=e.key_count}d&&(d=null!==a.storage.getItem(a.e+sc(b)));if(d)return null;a.storage.setItem(a.e+sc(b),W(c));d=b;for(var f in a.a)if(e=a.a[f])if(f==a.d)e.add(new $(d));else{var g=je(a.b,f),g=qc(c,g.keyPath);null!=g&&e.add(new $(d,g))}return b}
function qg(a,b){var c=a.e+sc(b),d=a.storage.getItem(c);if(null===d)return 0;a.storage.removeItem(c);c=ze(d);og(a,b,c);return 1}ng.prototype.clear=function(){pg(this);rg(this)};function Uf(a,b){var c=a.storage.getItem(a.e+sc(b)),d=void 0;if(null!==c)for(var d=ze(c),c=0,e=a.b.a.length;c<e;c++){var f=a.b.index(c);if("DATE"==f.type){var g=Ie(f,d);g&&Je(f,d,new Date(g))}}return d}ng.prototype.getName=function(){return this.b.getName()};
function sg(a,b,c){b=b||a.d;a=Xf(a,b);var d=null,e=null,f=0,g=!1,h=!1;null!=c&&(null!=c.lower&&(d=new $(c.lower)),null!=c.upper&&(e=new $(c.upper)),g=c.lowerOpen,h=c.upperOpen);Sf(a,function(a){if(null!=a&&(a=a.value,!g||null==d||0!=M(a.key,d.key))){if(null!=e&&(a=M(a.key,e.key),1===a||0===a&&h))return!0;f++}},d);return f}
function rg(a,b){var c=Xf(a,a.d),d=null,e=null,f=0,g=[],h=[],l=!1,n=!1;null!=b&&(null!=b.lower&&(d=new $(b.lower)),null!=b.upper&&(e=new $(b.upper)),l=b.lowerOpen,n=b.upperOpen);Sf(c,function(b){if(null!=b&&(b=b.value,!l||null==d||0!=Vf(b,d))){if(null!=e){var c=Vf(b,e);if(1===c||0===c&&n)return!0}var c=a.e+sc(b.key),q=a.storage.getItem(c);null!==q&&(a.storage.removeItem(c),f++,10>g.length&&(g.push(b.key),h.push(ze(q))))}},d);if(10>g.length)for(c=0;c<g.length;c++)og(a,g[c],h[c]);else pg(a);return f}
function tg(a,b,c,d,e,f,g,h,l){function n(c){if(c&&(I++,!(I<g))){var d=c.value;if(e){if(E&&null!=A&&(c=q?Vf(d,A):M(d.key,A.key),0==c))return;if(null!=z&&(c=q?Vf(d,z):M(d.key,z.key),-1==c||0==c&&L))return l&&(l[0]=void 0,l[1]=void 0),!0}else{if(L&&null!=z&&(c=q?Vf(d,z):M(d.key,z.key),0==c))return;if(null!=A&&(c=q?Vf(d,A):M(d.key,A.key),1==c||0==c&&E))return l&&(l[0]=void 0,l[1]=void 0),!0}c=d.key;if(!h||!r||null==p||0!=M(p,c)){d=r?d.a:c;if(2==b)m.push(d);else if(1==b)m.push(c);else if(3==b)m.push([c,
d]);else if(4==b){var n=Uf(a,d);m.push(n)}else m.push([c,d,Uf(a,d)]);l&&(l[0]=c,l[1]=d)}p=c;if(v(f)&&m.length>=f)return!0}}var m=[],p,q=!!l&&null!=l[0];c=c||a.d;var r=c!=a.d;c=Xf(a,c);var z=null,A=null;v(g)||(g=0);var I=-1,L=!1,E=!1;null!=d&&(null!=d.lower&&(z=r&&e?new $(d.lower,"\uffff"):new $(d.lower)),null!=d.upper&&(A=r&&!e?new $(d.upper,"\uffff"):new $(d.upper)),L=!!d.lowerOpen,E=!!d.upperOpen);if(q){e?E=!0:L=!0;d=l[0];var U=v(l[1])?l[1]:"\uffff";e?A=r?new $(d,U):new $(d):z=r?new $(d,U):new $(d)}e?
Rf(c,n,A):Sf(c,n,z);return m}ng.prototype.ua=function(a,b,c,d,e){return tg(this,2,a,b,c,d,e)};ng.prototype.toString=function(){return"ydn.db.con.simple.Store:"+this.f+":"+this.b.getName()};function ug(){this.clear()}t=ug.prototype;t.yb=function(){return this};t.setItem=function(a,b){v(this.a[a])||(this.keys.push(a.toString()),this.length=this.keys.length);this.a[a]=b};t.getItem=function(a){return v(this.a[a])?this.a[a]:null};t.removeItem=function(a){delete this.a[a];Qa(this.keys,a.toString());this.length=this.keys.length};t.length=0;t.key=function(a){a=this.keys[a];return v(a)?this.a[a]:null};t.clear=function(){this.a={};this.keys=[];this.length=0};function vg(a){this.g=a||new ug;this.f={}}function Wf(a,b){var c=Y(a.a,b);if(c)a.f[b]||(a.f[b]=new ng(a.d,a.e,c));else throw new Fc('store name "'+b+'" not found.');return a.f[b]}vg.prototype.L=function(a){var b=this;setTimeout(function(){var c=Yf(b.d),c=b.e.getItem(c),c=new Ye(c);a(c)},10)};function wg(a,b){this.b=a;this.a=b}wg.prototype.j=function(a,b){var c=this.b;setTimeout(function(){a.call(b,c)},4);var d=this;return function(){d.a("complete",null);d.a=null;d.b=null}};function xg(a,b){this.a=b}C(xg,xd);t=xg.prototype;t.c=J("ydn.db.crud.req.SimpleStore");t.Eb=function(a,b,c){yg(this,a,null,b,c,!0,!1)};
function yg(a,b,c,d,e,f,g){H(a.c,V(b)+" "+(f?"put":"add")+"Object"+(g?"":"s "+d.length+" objects"));var h=b.a.j(function(a){var n;if(g)n=Wf(a,c),a=Pf(n,e,d,!f),null!=a?R(b,a):(a=ge(a),a=new jd(a),R(b,a,!0));else{for(var m=c,p=[],q=!1,r=e||{},z=0;z<d.length;z++){var A;c?A=r[z]:(m=e[z],A=m.id,m=m.k);n&&n.getName()==m||(n=Wf(a,m));A=Pf(n,A,d[z],!f);null!=A?p.push(A):(q=!0,p.push(new jd))}R(b,p,q)}h();h=null},a)}t.tb=function(a,b,c,d){yg(this,a,b,c,d,!1,!0)};
t.Gb=function(a,b,c,d){yg(this,a,b,c,d,!0,!0)};t.ub=function(a,b,c,d){yg(this,a,b,c,d,!1,!1)};t.Fb=function(){throw new Dc("putData");};t.Hb=function(a,b,c,d){yg(this,a,b,c,d,!0,!1)};t.Ya=function(a,b,c){var d=a.a.j(function(e){e=Uf(Wf(e,b),c);R(a,e);d();d=null},this)};function zg(a,b,c,d){var e=b.a.j(function(a){for(var g=[],h=c,l,n=0;n<d.length;n++){var m=d[n];m instanceof vd&&(h=m,m=h.id,h=h.k);l&&l.getName()==h||(l=Wf(a,h));m=Uf(l,m);g[n]=m}R(b,g,!1);e();e=null},a)}
t.Cb=function(a,b,c){zg(this,a,b,c)};t.Db=function(a,b){zg(this,a,null,b)};t.gb=function(a,b,c){var d=V(a)+" removeById "+b+" "+c;H(this.c,d);var e=this,f=a.a.j(function(g){g=qg(Wf(g,b),c);G(e.c,"success "+d+(0==g?" [not found]":""));R(a,g);f();f=null},this)};t.Jb=function(a,b){H(this.c,V(a)+" removeByKeys "+b.length+" keys");var c,d=0,e=a.a.j(function(f){for(var g=0;g<b.length;g++){var h=b[g].k,l=b[g].id;c&&c.getName()==h||(c=Wf(f,h));d+=qg(c,l)}R(a,d);e();e=null},this)};
t.xb=function(a,b,c){this.hb(a,b,c)};t.hb=function(a,b,c){var d=V(a)+" removeByKeyRange "+(c?W(c):"");H(this.c,d);var e=this,f=a.a.j(function(g){g=rg(Wf(g,b),c);G(e.c,d+" deleted "+g+" records.");R(a,g);f();f=null},this)};t.Ib=function(a,b,c,d){var e=V(a)+" removeByIndexKeyRange "+(d?W(d):"");H(this.c,e);var f=a.a.j(function(e){e=Wf(e,b);for(var h=e.ua(c,d),l=h.length,n=0;n<l;n++)qg(e,h[n]);R(a,l);f();f=null},this)};
t.Ta=function(a,b){var c=V(a)+" clearByStores";H(this.c,c);var d=a.a.j(function(e){for(var f=0;f<b.length;f++)Wf(e,b[f]).clear();G(this.c,"success "+c);R(a,b.length);d();d=null},this)};t.Ua=function(a,b){var c=a.a.j(function(d){for(var e=[],f=0;f<b.length;f++){var g=Wf(d,b[f]);e.push(sg(g))}R(a,e);c();c=null},this)};
t.Ga=function(a,b,c,d){var e=V(a)+" count"+(null!=d?"Index":"")+(null!=c?"KeyRange":"Store");H(this.c,e);var f=a.a.j(function(g){g=sg(Wf(g,b),d,c);G(this.c,"success "+e);R(a,g);f();f=null},this)};t.Z=function(a,b,c,d,e,f,g,h,l,n){var m=V(a)+" "+c+" "+(e?ge(e):"");H(this.c,m);var p=a.a.j(function(q){q=tg(Wf(q,c),b,d,e,f,g,h,l,n);G(this.c,m+" "+q.length+" records found.");R(a,q);p();p=null},this)};function Ag(a,b){this.a=b}C(Ag,xg);Ag.prototype.b=function(a,b,c,d){c=Y(this.a,c);return new Of(a,b,c,d)};function Wd(a,b){this.a=b}C(Wd,Ag);Wd.prototype.c=J("ydn.db.sql.req.SimpleStore");Wd.prototype.executeSql=function(a,b,c){if(c=qf(b,c))throw new td(c);c=Ra(b.a);if(1==c.length){var d=Y(this.a,c[0]);if(!d)throw new pd(c[0]);var e=sf(b);if(e)for(var f=0;f<e.length;f++)if(!ke(d,e[f]))throw new N('Index "'+e[f]+'" not found in '+c[0]);(b.d?new xf(d,b):new wf(d,b)).Pb(a,this)}else throw new Cc(b.H);};function Bg(a,b,c){Td.call(this,a,b,c)}C(Bg,we);Bg.prototype.executeSql=function(a,b){for(var c=new of(a),d=Ra(c.a),e=0;e<d.length;e++){var f=Y(this.b,d[e]);if(!f)throw new N("store: "+f+" not exists.");}G(this.c,"executeSql: "+a+" params: "+b);var g=this.a.request("sql",Ra(c.a),c.e);T(g,function(){X(this).executeSql(g,c,b||[])},this);return g};function Cg(a,b,c){Z.call(this,a,b,c)}C(Cg,mf);Cg.prototype.xa=function(a){return new Bg(this,this.b,a)};Cg.prototype.executeSql=function(a,b){return this.d.executeSql(a,b)};function Dg(a,b){v(a)&&5242880<a&&F(this.c,"storage size request ignored, use Quota Management API instead");this.q=null;this.Ma=b||NaN}t=Dg.prototype;
t.Aa=function(a,b){function c(a,c,d){G(e.c,(d?"changing":"upgrading")+" version to "+a.version+" from "+g);for(d=0;d<b.stores.length;d++)Eg(e,a,c,b.stores[d]);c=a.objectStoreNames;var f=c.length;for(d=0;d<f;d++)fe(b,c[d])||(a.deleteObjectStore(c[d]),G(e.c,"store: "+c[d]+" deleted."))}function d(a,b){f.Ha?F(e.c,"database already set."):v(b)?(F(e.c,b?b.message:"Error received."),e.q=null,f.o(b)):(e.q=a,e.q.onabort=function(a){H(e.c,e+": abort");e.Qa(a.target.error)},e.q.onerror=function(a){H(e.c,e+
": error");e.Qa(a.target.error)},e.q.onversionchange=function(a){H(e.c,e+" closing connection for onversionchange to: "+a.version);if(e.q&&(e.q.onabort=null,e.q.onblocked=null,e.q.onerror=null,e.q.onversionchange=null,e.fb(a),!a.defaultPrevented)){e.q.close();e.q=null;var b=Error();b.name=a.type;e.mb(b)}},f.r(parseFloat(g)))}var e=this,f=new D,g=void 0,h=b.version;G(e.c,"Opening database: "+a+" ver: "+(b.wa?"auto":h));var l;l=v(h)?pc.open(a,h):pc.open(a);l.onsuccess=function(f){var h=f.target.result;
v(g)||(g=h.version);G(e.c,"Database: "+h.name+", ver: "+h.version+" opened.");if(b.wa)e.L(function(f){if(b instanceof ae)for(var g=0;g<f.stores.length;g++)fe(b,f.stores[g].getName())||be(b,f.stores[g].ta());f=Ze(b,f);if(0<f.length){G(e.c,"Schema change require for difference in "+f);var l=ea(h.version)?h.version+1:1;if("IDBOpenDBRequest"in u){h.close();var n=pc.open(a,l);n.onupgradeneeded=function(a){a=a.target.result;G(e.c,"re-open for version "+a.version);c(a,n.transaction,!1)};n.onsuccess=function(a){d(a.target.result)};
n.onerror=function(){G(e.c,e+": fail.");d(null)}}else{var p=h.setVersion(l+"");p.b=function(a){F(e.c,"migrating from "+h.version+" to "+l+" failed.");d(null,a)};p.onsuccess=function(){p.transaction.oncomplete=L;c(h,p.transaction,!0)};var L=function(){var b=pc.open(a);b.onsuccess=function(a){a=a.target.result;G(e.c,e+": OK.");d(a)};b.onerror=function(){G(e.c,e+": fail.");d(null)}};null!=p.transaction&&(p.transaction.oncomplete=L)}}else d(h)},void 0,h);else if(b.version>h.version){var l=h.setVersion(b.version);
l.b=function(a){F(e.c,"migrating from "+h.version+" to "+b.version+" failed.");d(null,a)};l.onsuccess=function(){c(h,l.transaction,!0)}}else b.version==h.version?G(e.c,"database version "+h.version+" ready to go"):F(e.c,"connected database version "+h.version+" is higher than requested version."),e.L(function(a){a=Ze(b,a);0<a.length?(G(e.c,a),d(null,new de("different schema: "+a))):d(h)},void 0,h)};l.onupgradeneeded=function(a){a=a.target.result;g=NaN;G(e.c,"upgrade needed for version "+a.version);
c(a,l.transaction,!1)};l.onerror=function(c){ec(e.c,'open request to database "'+a+'" '+(v(b.version)?" with version "+b.version:"")+" cause error of "+l.error.name);d(null,c)};l.onblocked=function(c){ec(e.c,"database "+a+" "+b.version+" block, close other connections.");d(null,c)};ea(this.Ma)&&!isNaN(this.Ma)&&setTimeout(function(){"done"!=l.readyState&&(ec(e.c,e+": database state is still "+l.readyState),d(null,new ud("connection timeout after "+e.Ma)))},this.Ma);return f};t.Ma=18E4;t.mb=k();
t.Qa=k();t.fb=k();t.Ba=aa("indexeddb");t.lb=function(){return!!this.q};t.c=J("ydn.db.con.IndexedDb");t.q=null;t.kb=function(){return this.q?parseFloat(this.q.version):void 0};
t.L=function(a,b,c){c=c||this.q;if(v(b)){if(null===b){if(0==c.objectStoreNames.length){a(new Ye(c.version));return}throw new cd;}c=b.db}else{b=[];for(var d=c.objectStoreNames.length-1;0<=d;d--)b[d]=c.objectStoreNames[d];if(0==b.length){a(new Ye(c.version));return}b=c.transaction(b,nc)}for(var e=c.objectStoreNames,f=[],g=e.length,d=0;d<g;d++){for(var h=b.objectStore(e[d]),l=[],n=0,m=h.indexNames.length;n<m;n++){var p=h.index(h.indexNames[n]);l[n]=new Fe(p.keyPath,void 0,p.unique,p.multiEntry,p.name)}f[d]=
new Yd(h.name,h.keyPath,h.autoIncrement,void 0,l)}b=new Ye(c.version,f);a(b)};
function Eg(a,b,c,d){function e(){var a={autoIncrement:!!d.b};null!=d.keyPath&&(a.keyPath=d.keyPath);try{return b.createObjectStore(d.getName(),a)}catch(c){if("InvalidAccessError"==c.name)throw new od("creating store for "+d.getName()+" of keyPath: "+d.keyPath+" and autoIncrement: "+d.b);if("ConstraintError"==c.name)throw new de("creating store for "+d.getName());throw c;}}H(a.c,"Creating Object Store for "+d.getName()+" keyPath: "+d.keyPath);if(b.objectStoreNames.contains(d.getName()))if(c=c.objectStore(d.getName()),
Me(d.keyPath||"",c.keyPath||""))b.deleteObjectStore(d.getName()),F(a.c,"store: "+d.getName()+" deleted due to keyPath change."),c=e();else if(da(c.autoIncrement)&&da(d.b)&&c.autoIncrement!=d.b)b.deleteObjectStore(d.getName()),F(a.c,"store: "+d.getName()+" deleted due to autoIncrement change."),c=e();else{for(var f=c.indexNames,g=0,h=0,l=0,n=0;n<d.a.length;n++){var m=d.a[n],p=!1;if(f.contains(m.getName())){var q=c.index(m.getName()),r=null!=q.unique&&null!=m.unique&&q.unique!=m.unique,z=null!=q.multiEntry&&
null!=m.multiEntry&&q.multiEntry!=m.multiEntry,q=null!=q.keyPath&&null!=m.keyPath&&!!Me(q.keyPath,m.keyPath);if(r||z||q)c.deleteIndex(m.getName()),p=!0,g--,l++}else p=!0;p&&(m.unique||m.multiEntry?(p={unique:m.unique,multiEntry:m.multiEntry},c.createIndex(m.getName(),m.keyPath,p)):c.createIndex(m.getName(),m.keyPath),g++)}for(n=0;n<f.length;n++)ke(d,f[n])||(c.deleteIndex(f[n]),h++);H(a.c,"Updated store: "+c.name+", "+g+" index created, "+h+" index deleted, "+l+" modified.")}else{c=e();for(n=0;n<d.a.length;n++)m=
d.a[n],H(a.c,"Creating index: "+m.getName()+" multiEntry: "+m.multiEntry),m.unique||m.multiEntry?(p={unique:m.unique,multiEntry:m.multiEntry},c.createIndex(m.getName(),m.keyPath,p)):c.createIndex(m.getName(),m.keyPath);H(a.c,"Created store: "+c.name+" keyPath: "+c.keyPath)}}
t.Wa=function(a,b,c,d){var e=this.q;if(!b){b=[];for(var f=e.objectStoreNames.length-1;0<=f;f--)b[f]=e.objectStoreNames[f]}0==b.length?a(null):(b=e.transaction(b,c),b.oncomplete=function(a){d("complete",a)},b.onabort=function(a){d("abort",a)},a(b),a=null)};t.jb=function(){H(this.c,this+" closing connection");this.q.close()};t.toString=function(){return"IndexedDB:"+(this.q?this.q.name+":"+this.q.version:"")};
Bc.push(function(a,b){if(!pc||b&&"indexeddb"!=b)return null;var c=pc.deleteDatabase(a),d=new Fd("IDBVersionChangeEvent ");c.onblocked=function(a){for(var b=0;b<d.d.length;b++)d.d[b][0].call(d.d[b][1],a)};c.onerror=function(a){d.o(a)};c.onsuccess=function(a){d.r(a)};return d});function Fg(a){vg.call(this,a);this.b=NaN}C(Fg,vg);t=Fg.prototype;t.c=J("ydn.db.con.SimpleStorage");t.kb=s("b");
t.Aa=function(a,b){function c(a,b){setTimeout(function(){b?(G(d.c,d+" opening fail"),e.o(b)):(G(d.c,d+" version "+d.kb()+" open"),e.r(a))},10)}var d=this,e=new D;this.e=this.g.yb(a);this.d=a;this.a=b;var f=Yf(this.d);this.b=NaN;var g=ze(this.e.getItem(f));v(g.version)&&!ea(g.version)&&(g.version=NaN);if(g)if(g=new Ye(g),Ze(this.a,g))if(!this.a.wa&&!isNaN(g.version)&&this.a.version>g.version)c(NaN,new ld("existing version "+g.version+" is larger than "+this.a.version));else{var h=this.a.version;this.b=
v(h)?h:g.version+1;for(h=0;h<this.a.count();h++)var l=this.a.pa(h);if(this.a instanceof ae)for(h=0;h<g.count();h++)l=g.pa(h),be(this.a,l);h=this.a.toJSON();h.version=this.b||NaN;this.e.setItem(f,W(h));c(g.version||NaN)}else{for(h=0;h<this.a.count();h++)l=this.a.pa(h);this.b=g.version||NaN;c(this.b)}else g=b.toJSON(),this.b=1,g.version=this.b,this.e.setItem(f,W(g)),c(NaN);return e};t.lb=function(){return!!this.d};t.mb=k();t.Qa=k();t.fb=k();t.Ba=aa("memory");t.jb=k();
t.Wa=function(a,b,c,d){a(new wg(this,function(a,b){d(a,b)}))};t.toString=function(){return"SimpleStorage:"+this.Ba()+":"+(this.d+":"+this.b)};function Gg(){Fg.call(this,this)}C(Gg,Fg);Gg.prototype.yb=function(){return window.localStorage};Gg.prototype.Ba=aa("localstorage");Bc.push(function(a,b){if(!b||"localstorage"==b){var c=new Gg,d=new ae;c.Aa(a,d);c.L(function(a){for(var b=0;b<a.stores.length;b++)Wf(c,a.stores[b].getName()).clear()})}});function Hg(){Fg.call(this,this)}C(Hg,Fg);Hg.prototype.yb=function(){return window.sessionStorage};Hg.prototype.Ba=aa("sessionstorage");
Bc.push(function(a,b){if(!b||"sessionstorage"==b){var c=new Hg,d=new ae;c.Aa(a,d);c.L(function(a){for(var b=0;b<a.stores.length;b++)Wf(c,a.stores[b].getName()).clear()})}});function Ig(a){this.a=v(a)?a:4194304}t=Ig.prototype;
t.Aa=function(a,b){function c(b,c){var f=b.version?parseInt(b.version,10):0,g=c.wa?isNaN(f)?1:f+1:c.version;fc(e.c,a+": changing version from "+b.version+" to "+g);var h=!1,l=0;b.changeVersion(b.version,g+"",function(a){e.L(function(b){h=!0;for(var d=0;d<c.count();d++){var f=Y(b,c.pa(d).getName()),f=f?f.hint(c.pa(d)):null;Jg(e,a,c.pa(d),function(a){a&&l++},f)}for(d=0;d<b.count();d++)f=b.pa(d),fe(c,f.getName())||(c instanceof ae?be(c,f):(f="DROP TABLE "+Qe(f),G(e.c,f),a.executeSql(f,[],k(),function(a,
b){throw b;})))},a,b)},function(c){ec(e.c,"SQLError "+c+" "+c.code+"("+c.message+") while changing version from "+b.version+" to "+g+" on "+a);throw c;},function(){if(h){var f=".";l!=c.stores.length&&(f=" but unexpected stores exists.");H(e.c,a+":"+b.version+" ready"+f);d(b)}else F(e.c,a+": changing version voided.")})}function d(a,b){v(b)?(e.w=null,g.o(b)):(e.w=a,g.r(parseFloat(f)))}var e=this,f=NaN,g=new D,h=null;try{h=u.openDatabase(a,"",a,this.a)}catch(l){if("SECURITY_ERR"==l.name)F(this.c,"SECURITY_ERR for opening "+
a),h=null,this.Mb=new sd(l);else throw l;}if(h){var f=h.version,n="database "+a+(0==h.version.length?"":" version "+h.version);null!=b.version&&b.version==h.version?(fc(e.c,"Existing "+n+" opened as requested."),d(h)):this.L(function(a){(a=Ze(b,a,!0))?(0==h.version.length?fc(e.c,"New "+n+" created."):b.wa?fc(e.c,"Existing "+n+" opened and schema change for "+a):fc(e.c,"Existing "+n+" opened and  schema change to version "+b.version+" for "+a),c(h,b)):(fc(e.c,"Existing "+n+" with same schema opened."),
d(h))},null,h)}else d(null,this.Mb);return g};t.Ba=aa("websql");t.Mb=null;t.w=null;t.c=J("ydn.db.con.WebSql");t.mb=k();t.Qa=k();
function Kg(a){var b=a.l,c="CREATE TABLE IF NOT EXISTS "+Qe(a)+" (",d=a.d,c=c+(d+" "+b+" PRIMARY KEY ");a.b&&(c+=" AUTOINCREMENT ");for(var c=c+" ,_default_ BLOB",e=[],f=[d],g=0,h=a.a.length;g<h;g++){var l=a.index(g),n="";if(l.multiEntry){var n="ydn.db.me:"+a.getName()+":"+l.getName(),m=l.unique?" UNIQUE ":"",l="CREATE TABLE IF NOT EXISTS "+Fa(n)+" ("+d+" "+b+", "+l.d+" "+l.h+m+")";e.push(l)}else l.unique&&(n=" UNIQUE "),m=l.keyPath,"BLOB"!=l.type&&y(m)&&(m="CREATE "+n+" INDEX IF NOT EXISTS "+Fa(a.getName()+
"-"+l.getName())+" ON "+Qe(a)+" ("+Fa(m)+")",e.push(m)),m=l.d,-1==f.indexOf(m)&&(c+=", "+m+" "+l.h+n,f.push(m))}e.unshift(c+")");return e}t.kb=function(){return this.w?parseFloat(this.w.version):void 0};
t.L=function(a,b,c){function d(a,b){throw b;}function e(b,c){if(c&&c.rows){for(var d=0;d<c.rows.length;d++){var e=c.rows.item(d);if("__WebKitDatabaseInfoTable__"!=e.name&&"sqlite_sequence"!=e.name&&"table"==e.type){var q="sql"in e?e.sql:void 0;H(f.c,"Parsing table schema from SQL: "+q);for(var r=q.substr(q.indexOf("("),q.lastIndexOf(")")).match(/(?:"[^"]*"|[^,])+/g),z=void 0,A,q=[],I=!1,L=!1,E=0;E<r.length;E++){var U=r[E].match(/\w+|"[^"]+"/g),ra=La(U,function(a){return a.toUpperCase()}),S=Ca(U[0],
'"'),U=Ge(ra[1]);if(-1!=ra.indexOf("PRIMARY")&&-1!=ra.indexOf("KEY")){A=U;if(y(S)&&!sa(S)&&"_ROWID_"!=S){var za=S.split(","),z=S;1<za.length&&(z=za,A=void 0)}-1!=ra.indexOf("AUTOINCREMENT")&&(I=!0)}else if("_ROWID_"!=S)if("_default_"==S)L=!0;else{var rd="UNIQUE"==ra[2];0==S.lastIndexOf(e.tbl_name+"-",0)&&(S=S.substr(e.tbl_name.length+1));ra=new Fe(S,U,rd);q.push(ra)}}if(0==e.name.lastIndexOf("ydn.db.me:",0)){var lb=e.name.split(":");if(3<=lb.length){var Db=lb[1],z=new Fe(lb[2],U,rd,!0),r=Oa(q,function(a){return a.getName()==
lb[2]});0<=r?q[r]=z:q.push(z);r=Oa(h,function(a){return a.getName()===Db});0<=r?(E=h[r],h[r]=new Yd(E.getName(),E.keyPath,I,A,q,void 0,!L)):h.push(new Yd(Db,void 0,!1,void 0,[z]));H(f.c,'multi entry index "'+z.getName()+'" found in '+Db+(-1==r?"*":""))}else F(f.c,'Invalid multiEntry store name "'+e.name+'"')}else E=Oa(h,function(a){return a.getName()===e.name}),0<=E?(r=h[E].index(0),q.push(r),h[E]=new Yd(e.name,z,I,A,q,void 0,!L)):(q=new Yd(e.name,z,I,A,q,void 0,!L),h.push(q))}}d=new Ye(g,h);a(d)}}
var f=this,g=(c=c||this.w)&&c.version?parseFloat(c.version):void 0,g=isNaN(g)?void 0:g,h=[];b?b.executeSql("SELECT * FROM sqlite_master",[],e,d):c.readTransaction(function(b){f.L(a,b,c)},function(a){ec(f.c,"opening tx: "+a.message);throw a;},e)};
function Jg(a,b,c,d,e){function f(a){b.executeSql(a,[],function(){g++;g==h.length&&(d(!0),d=null)},function(b,e){g++;g==h.length&&(d(!1),d=null);var f="SQLError creating table: "+c.getName()+" "+e.message+' for executing "'+a;throw new qd(e,f);})}var g=0,h=Kg(c),l="Create";if(e){e=$d(c,e);if(0==e.length){H(a.c,"same table "+c.getName()+" exists.");d(!0);d=null;return}l="Modify";F(a.c,"table: "+c.getName()+" has changed by "+e+" ALTER TABLE cannot run in WebSql, dropping old table.");h.unshift("DROP TABLE IF EXISTS "+
Fa(c.getName()))}H(a.c,l+" table: "+c.getName()+": "+h.join(";"));for(a=0;a<h.length;a++)f(h[a])}t.lb=function(){return!!this.w};t.jb=function(){this.w=null};t.Wa=function(a,b,c,d){function e(a){H(h.c,h+": Tx "+c+" request cause error.");d("abort",a)}function f(){d("complete",{type:"complete"})}function g(b){a(b)}var h=this;null===this.w&&(a(null),d("abort",this.Mb));c==nc?this.w.readTransaction(g,e,f):c==oc?this.w.changeVersion(this.w.version,this.w.version+1+"",g,e,f):this.w.transaction(g,e,f)};
Bc.push(function(a,b){if(!b||"websql"==b){var c=new Ig,d=new ae;G(c.c,"deleting websql database: "+a);var d=c.Aa(a,d),e=function(){c.c.log(Xb,"all tables in "+a+" deleted.",void 0)};d.aa(function(){c.Wa(function(b){b.executeSql('SELECT * FROM sqlite_master WHERE type = "table"',[],function(d,e){if(e&&e.rows){for(var l=e.rows.length,n=0,m=0;m<l;m++){var p=e.rows.item(m);"__WebKitDatabaseInfoTable__"!=p.name&&"sqlite_sequence"!=p.name&&(n++,H(c.c,"deleting table: "+p.name),b.executeSql("DROP TABLE "+
p.name))}G(c.c,n+' tables deleted from "'+a+'"')}},function(a,b){throw b;})},[],K,e)});d.Qb(function(){F(c.c,"Connecting "+a+" failed.")})}});Ig.prototype.fb=k();Ig.prototype.toString=function(){return"WebSql:"+(this.w?":"+this.w.version:"")};kf.prototype.zb=function(a){return"indexeddb"==a&&pc?new Dg(this.s,this.fa):"websql"==a&&fa(u.openDatabase)?new Ig(this.s):"localstorage"==a&&window.localStorage?new Gg:"sessionstorage"==a&&window.sessionStorage?new Hg:"memory"==a?new Fg:null};function Lg(a,b){yd.call(this);this.e=b;this.b=[];if(a>this.e)throw Error("[goog.structs.SimplePool] Initial cannot be greater than max");for(var c=0;c<a;c++)this.b.push(this.a())}C(Lg,yd);Lg.prototype.a=function(){return{}};Lg.prototype.d=function(a){if(B(a))if(fa(a.Ab))a.Ab();else for(var b in a)delete a[b]};Lg.prototype.ea=function(){Lg.p.ea.call(this);for(var a=this.b;a.length;)this.d(a.pop());delete this.b};function Mg(){this.a=[];this.d=new kb;this.e=new kb;this.g=1;this.f=new Lg(0,4E3);this.f.a=function(){return new Ng};this.h=new Lg(0,50);this.h.a=function(){return new Og};var a=this;this.b=new Lg(0,2E3);this.b.a=function(){return String(a.g++)};this.b.d=k()}J("goog.debug.Trace");function Og(){this.time=this.count=0}Og.prototype.toString=function(){var a=[];a.push(this.type," ",this.count," (",Math.round(10*this.time)/10," ms)");return a.join("")};function Ng(){}
function Pg(a,b,c){var d=[];-1==b?d.push("    "):d.push(Qg(a.b-b));d.push(" ",Rg(a.b-0));0==a.a?d.push(" Start        "):1==a.a?(d.push(" Done "),d.push(Qg(a.f-a.startTime)," ms ")):d.push(" Comment      ");d.push(c,a);0<a.e&&d.push("[VarAlloc ",a.e,"] ");return d.join("")}Ng.prototype.toString=function(){return null==this.type?this.d:"["+this.type+"] "+this.d};
Mg.prototype.toString=function(){for(var a=[],b=-1,c=[],d=0;d<this.a.length;d++){var e=this.a[d];1==e.a&&c.pop();a.push(" ",Pg(e,b,c.join("")));b=e.b;a.push("\n");0==e.a&&c.push("|  ")}if(0!=this.d.Bb()){var f=na();a.push(" Unstopped timers:\n");jb(this.d,function(b){a.push("  ",b," (",f-b.startTime," ms, started at ",Rg(b.startTime),")\n")})}b=this.e.ua();for(d=0;d<b.length;d++)c=this.e.get(b[d]),1<c.count&&a.push(" TOTAL ",c,"\n");a.push("Total tracers created ",0,"\n","Total comments created ",
0,"\n","Overhead start: ",0," ms\n","Overhead end: ",0," ms\n","Overhead comment: ",0," ms\n");return a.join("")};function Qg(a){a=Math.round(a);var b="";1E3>a&&(b=" ");100>a&&(b="  ");10>a&&(b="   ");return b+a}function Rg(a){a=Math.round(a);return String(100+a/1E3%60).substring(1,3)+"."+String(1E3+a%1E3).substring(1,4)}new Mg;var Sg=!wb||wb&&9<=Lb,Tg=wb&&!Jb("9");!yb||Jb("528");xb&&Jb("1.9b")||wb&&Jb("8")||vb&&Jb("9.5")||yb&&Jb("528");xb&&!Jb("8")||wb&&Jb("9");function Ug(a){Ug[" "](a);return a}Ug[" "]=k();function Vg(a,b){a&&Wg(this,a,b)}C(Vg,Ae);t=Vg.prototype;t.target=null;t.clientX=0;t.clientY=0;t.Tb=null;function Wg(a,b,c){var d=a.type=b.type;Ae.call(a,d);a.target=b.target||b.srcElement;a.a=c;if((c=b.relatedTarget)&&xb)try{Ug(c.nodeName)}catch(e){}a.clientX=void 0!==b.clientX?b.clientX:b.pageX;a.clientY=void 0!==b.clientY?b.clientY:b.pageY;a.Tb=b;b.defaultPrevented&&a.preventDefault();delete a.b}
t.preventDefault=function(){Vg.p.preventDefault.call(this);var a=this.Tb;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Tg)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var Xg="closure_listenable_"+(1E6*Math.random()|0),Yg=0;function Zg(a,b,c,d,e,f){this.T=a;this.a=b;this.src=c;this.type=d;this.capture=!!e;this.va=f;this.key=++Yg;this.O=this.sa=!1};var $g={},ah={},bh={},ch={};function dh(a,b,c,d,e){if(w(b))for(var f=0;f<b.length;f++)dh(a,b[f],c,d,e);else c=eh(c),a&&a[Xg]?fh(a,b,c,!1,d,e):gh(a,b,c,!1,d,e)}
function gh(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");e=!!e;var g=ah;b in g||(g[b]={t:0,X:0});g=g[b];e in g||(g[e]={t:0,X:0},g.t++);var g=g[e],h=ga(a),l;g.X++;if(g[h]){l=g[h];for(var n=0;n<l.length;n++)if(g=l[n],g.T==c&&g.va==f){if(g.O)break;d||(l[n].sa=!1);return}}else l=g[h]=[],g.t++;n=hh();g=new Zg(c,n,a,b,e,f);g.sa=d;n.src=a;n.T=g;l.push(g);bh[h]||(bh[h]=[]);bh[h].push(g);a.addEventListener?a.addEventListener(b,n,e):a.attachEvent(b in ch?ch[b]:ch[b]="on"+b,n);$g[g.key]=g}
function hh(){var a=ih,b=Sg?function(c){return a.call(b.src,b.T,c)}:function(c){c=a.call(b.src,b.T,c);if(!c)return c};return b}function jh(a,b,c,d,e){if(w(b))for(var f=0;f<b.length;f++)jh(a,b[f],c,d,e);else c=eh(c),a&&a[Xg]?fh(a,b,c,!0,d,e):gh(a,b,c,!0,d,e)}
function kh(a,b,c,d,e){if(w(b))for(var f=0;f<b.length;f++)kh(a,b[f],c,d,e);else if(c=eh(c),a&&a[Xg])b in a.a&&(a=a.a[b],c=lh(a,c,d,e),-1<c&&(e=a[c],delete $g[e.key],e.O=!0,Ia.splice.call(a,c,1)));else{d=!!d;a:{f=ah;if(b in f&&(f=f[b],d in f&&(f=f[d],a=ga(a),f[a]))){a=f[a];break a}a=null}if(a)for(f=0;f<a.length;f++)if(a[f].T==c&&a[f].capture==d&&a[f].va==e){mh(a[f]);break}}}
function mh(a){if(!ea(a)&&a&&!a.O){var b=a.src;if(b&&b[Xg])nh(b,a);else{var c=a.type,d=a.a,e=a.capture;b.removeEventListener?b.removeEventListener(c,d,e):b.detachEvent&&b.detachEvent(c in ch?ch[c]:ch[c]="on"+c,d);b=ga(b);bh[b]&&(d=bh[b],Qa(d,a),0==d.length&&delete bh[b]);a.O=!0;a.T=null;a.a=null;a.src=null;a.va=null;if(d=ah[c][e][b])d.Xb=!0,oh(c,e,b,d);delete $g[a.key]}}}
function oh(a,b,c,d){if(!d.cb&&d.Xb){for(var e=0,f=0;e<d.length;e++)d[e].O||(e!=f&&(d[f]=d[e]),f++);d.length=f;d.Xb=!1;0==f&&(delete ah[a][b][c],ah[a][b].t--,0==ah[a][b].t&&(delete ah[a][b],ah[a].t--),0==ah[a].t&&delete ah[a])}}function ph(a,b,c,d,e){var f=1;b=ga(b);if(a[b]){var g=--a.X,h=a[b];h.cb?h.cb++:h.cb=1;try{for(var l=h.length,n=0;n<l;n++){var m=h[n];m&&!m.O&&(f&=!1!==qh(m,e))}}finally{a.X=Math.max(g,a.X),h.cb--,oh(c,d,b,h)}}return Boolean(f)}
function qh(a,b){var c=a.T,d=a.va||a.src;a.sa&&mh(a);return c.call(d,b)}
function ih(a,b){if(a.O)return!0;var c=a.type,d=ah;if(!(c in d))return!0;var d=d[c],e,f;if(!Sg){e=b||ba("window.event");var g=!0 in d,h=!1 in d;if(g){if(0>e.keyCode||void 0!=e.returnValue)return!0;a:{var l=!1;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(n){l=!0}if(l||void 0==e.returnValue)e.returnValue=!0}}l=new Vg;Wg(l,e,this);e=!0;try{if(g){for(var m=[],p=l.a;p;p=p.parentNode)m.push(p);f=d[!0];f.X=f.t;for(var q=m.length-1;!l.b&&0<=q&&f.X;q--)l.a=m[q],e&=ph(f,m[q],c,!0,l);if(h)for(f=d[!1],f.X=
f.t,q=0;!l.b&&q<m.length&&f.X;q++)l.a=m[q],e&=ph(f,m[q],c,!1,l)}else e=qh(a,l)}finally{m&&(m.length=0)}return e}c=new Vg(b,this);return e=qh(a,c)}var rh="__closure_events_fn_"+(1E9*Math.random()>>>0);function eh(a){return fa(a)?a:a[rh]||(a[rh]=function(b){return a.handleEvent(b)})};function sh(){yd.call(this);this.a={};this.d=this}C(sh,yd);sh.prototype[Xg]=!0;sh.prototype.b=null;sh.prototype.removeEventListener=function(a,b,c,d){kh(this,a,b,c,d)};sh.prototype.ea=function(){sh.p.ea.call(this);var a=0,b;for(b in this.a){for(var c=this.a[b],d=0;d<c.length;d++)++a,delete $g[c[d].key],c[d].O=!0;c.length=0}this.b=null};function fh(a,b,c,d,e,f){var g=a.a[b]||(a.a[b]=[]),h=lh(g,c,e,f);-1<h?(a=g[h],d||(a.sa=!1)):(a=new Zg(c,null,a,b,!!e,f),a.sa=d,g.push(a))}
function nh(a,b){var c=b.type;c in a.a&&Qa(a.a[c],b)&&(delete $g[b.key],b.O=!0)}function th(a,b,c,d){if(!(b in a.a))return!0;var e=!0;b=Ra(a.a[b]);for(var f=0;f<b.length;++f){var g=b[f];if(g&&!g.O&&g.capture==c){var h=g.T,l=g.va||g.src;g.sa&&nh(a,g);e=!1!==h.call(l,d)&&e}}return e&&!1!=d.d}function lh(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(f.T==b&&f.capture==!!c&&f.va==d)return e}return-1};/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");.
*/
function vh(a){a.g||(a.g=new sh);return a.g}kf.prototype.ma=function(a,b,c,d){if("ready"==a)jh(vh(this),a,b,c,d);else{var e="created error fail ready deleted updated versionchange".split(" "),f=function(a){if(!(0<=Ja(e,a)))throw new N('Invalid event type "'+a+'"');};if(x(a))for(var g=0;g<a.length;g++)f(a[g]);else f(a);dh(vh(this),a,b,c,d)}};kf.prototype.removeEventListener=function(a,b,c,d){kh(vh(this),a,b,c,d)};
kf.prototype.I=function(a){var b=vh(this),c,d=b.b;if(d)for(c=[];d;d=d.b)c.push(d);b=b.d;d=a.type||a;if(y(a))a=new Ae(a,b);else if(a instanceof Ae)a.target=a.target||b;else{var e=a;a=new Ae(d,b);fb(a,e)}var e=!0,f;if(c)for(var g=c.length-1;!a.b&&0<=g;g--)f=a.a=c[g],e=th(f,d,!0,a)&&e;a.b||(f=a.a=b,e=th(f,d,!0,a)&&e,a.b||(e=th(f,d,!1,a)&&e));if(c)for(g=0;!a.b&&g<c.length;g++)f=a.a=c[g],e=th(f,d,!1,a)&&e};function wh(a,b,c){Z.call(this,a,b,c)}C(wh,Cg);function xh(a,b){hd.call(this,a,b)}C(xh,hd);xh.prototype.b=aa(!1);xh.prototype.d=function(a,b){function c(b){v(a[b])?(e=!1,d[b]=!0):(d[b]=!1,0<=b-1&&c(b-1))}var d=[],e=!0;c(a.length-1);e&&(d=[]);return id(this,d,b)};function yh(a,b){hd.call(this,a,b)}C(yh,hd);yh.prototype.b=aa(!1);yh.prototype.d=function(a,b){var c=[],d=b[0];if(null==d)return[];for(var e=!0,f=!1,g=d,h=[],l=1;l<a.length;l++)if(null!=b[l]){var n=M(d,b[l]);h[l]=n;1===n?e=!1:-1===n&&(e=!1,f=!0,1===M(b[l],g)&&(g=b[l]))}else e=!1,f=!0;if(e)for(f=0;f<a.length;f++)null!=b[f]&&(c[f]=!0);else if(f)for(f=0;f<a.length;f++)null!=b[f]&&1===M(g,b[f])&&(c[f]=g);else for(f=1;f<a.length;f++)1===h[f]&&(c[f]=d);return e?(this.f++,this.a&&this.a.push(g),c):{continuePrimary:c}};function zh(a,b){hd.call(this,a,b);this.e=a instanceof dd&&!!a.za}C(zh,hd);zh.prototype.c=J("ydn.db.algo.ZigzagMerge");zh.prototype.e=!1;zh.prototype.b=function(a,b){var c=zh.p.b.call(this,a,b);if(this.e){var d=a[0].F().split(", ");if(1<d.length){if(d[d.length-1]!=this.a.za)throw new fd("Output streamer projection field must be same as postfix field in the iterator");}else F(this.c,"Unable to check correctness of output streamer.")}return c};
zh.prototype.d=function(a,b){function c(a,b){var c=a.slice(0,a.length-1);c.push(b);return c}var d=[];if(0==a.length||null==a[0]||null==a[0])return[];for(var e=!0,f=0,g=a[f][a[f].length-1],h=[],l=1;l<a.length;l++)if(null!=a[l]){var n=a[l][a[l].length-1],m=M(g,n);h[l]=m;1===m?e=!1:-1===m&&(e=!1,g=n,f=1)}else return[];if(e){for(e=0;e<a.length;e++)null!=a[e]&&(d[e]=!0);this.a&&(this.e?this.a.push(b[0],g):this.a.push(b[0]));return d}if(0==f)for(e=1;e<a.length;e++)1===h[e]&&(d[e]=c(a[e],g));else for(e=
0;e<a.length;e++)e!=f&&null!=a[e]&&1===M(g,a[e][a[e].length-1])&&(d[e]=c(a[e],g));return{"continue":d}};oa("ydn.db.algo.NestedLoop",xh);oa("ydn.db.algo.ZigzagMerge",zh);oa("ydn.db.algo.SortedMerge",yh);Q.prototype.close=Q.prototype.Kc;Q.prototype.getType=Q.prototype.Da;Q.prototype.getName=Q.prototype.getName;Q.prototype.getSchema=Q.prototype.la;Q.prototype.onReady=Q.prototype.wc;Q.prototype.setName=Q.prototype.l;Q.prototype.transaction=Q.prototype.Ca;oa("ydn.db.version","0.8.5");oa("ydn.db.cmp",M);oa("ydn.db.deleteDatabase",function(a,b){for(var c,d=0;d<Bc.length;d++){var e=Bc[d](a,b);e&&(c=e)}return c||Kd("IDBVersionChangeEvent ",null)});Ce.prototype.name=Ce.prototype.name;
Ce.prototype.getVersion=Ce.prototype.Oc;Ce.prototype.getOldVersion=Ce.prototype.tc;Ce.prototype.getOldSchema=Ce.prototype.sc;De.prototype.getError=De.prototype.f;Fd.prototype.abort=Fd.prototype.abort;Fd.prototype.canAbort=Fd.prototype.qc;Fd.prototype.progress=Fd.prototype.Jc;Fd.prototype.promise=Fd.prototype.xc;mf.prototype.scan=mf.prototype.Mc;mf.prototype.map=mf.prototype.map;mf.prototype.reduce=mf.prototype.nb;mf.prototype.open=mf.prototype.Lc;we.prototype.scan=we.prototype.hc;we.prototype.map=we.prototype.map;we.prototype.reduce=we.prototype.nb;we.prototype.open=we.prototype.gc;Bd.prototype.getKey=Bd.prototype.Nc;Bd.prototype.getPrimaryKey=Bd.prototype.C;Bd.prototype.getValue=Bd.prototype.ra;Bd.prototype.update=Bd.prototype.update;Bd.prototype.clear=Bd.prototype.clear;oa("ydn.db.Iterator",P);
oa("ydn.db.KeyIterator",Sc);oa("ydn.db.ValueIterator",Uc);oa("ydn.db.IndexIterator",Tc);oa("ydn.db.IndexValueIterator",Wc);P.prototype.getState=P.prototype.uc;P.prototype.getKeyRange=P.prototype.Na;P.prototype.getIndexName=P.prototype.F;P.prototype.getStoreName=P.prototype.Ec;P.prototype.isReversed=P.prototype.P;P.prototype.isUnique=P.prototype.Q;P.prototype.isKeyIterator=P.prototype.Fc;P.prototype.isIndexIterator=P.prototype.vc;P.prototype.getPrimaryKey=P.prototype.Dc;P.prototype.getKey=P.prototype.Cc;
P.prototype.resume=P.prototype.Gc;P.prototype.reset=P.prototype.fc;P.prototype.reverse=P.prototype.reverse;Sc.where=function(a,b,c,d,e){return new Sc(a,Pc(b,c,d,e))};Uc.where=Vc;Tc.where=function(a,b,c,d,e,f){return new Tc(a,b,Pc(c,d,e,f))};Wc.where=Xc;oa("ydn.db.Streamer",dd);dd.prototype.push=dd.prototype.push;dd.prototype.collect=dd.prototype.ba;dd.prototype.setSink=dd.prototype.Bc;Z.prototype.branch=Z.prototype.nc;Z.prototype.add=Z.prototype.add;Z.prototype.get=Z.prototype.get;Z.prototype.keys=Z.prototype.keys;Z.prototype.values=Z.prototype.B;Z.prototype.put=Z.prototype.put;Z.prototype.clear=Z.prototype.clear;Z.prototype.remove=Z.prototype.ob;Z.prototype.count=Z.prototype.count;ee.prototype.add=ee.prototype.add;ee.prototype.get=ee.prototype.get;ee.prototype.keys=ee.prototype.keys;ee.prototype.values=ee.prototype.B;ee.prototype.put=ee.prototype.put;ee.prototype.clear=ee.prototype.clear;
ee.prototype.remove=ee.prototype.ob;ee.prototype.count=ee.prototype.count;oa("ydn.db.Key",vd);vd.prototype.id=vd.prototype.rc;vd.prototype.parent=vd.prototype.Hc;vd.prototype.storeName=vd.prototype.Ic;oa("ydn.db.KeyRange",O);O.upperBound=O.upperBound;O.lowerBound=O.lowerBound;O.bound=O.bound;O.only=O.only;O.starts=Jc;Be.prototype.store_name=Be.prototype.k;Be.prototype.getStoreName=Be.prototype.e;pe.prototype.name=pe.prototype.name;pe.prototype.getKey=pe.prototype.f;pe.prototype.getValue=pe.prototype.g;
me.prototype.name=me.prototype.name;me.prototype.getKeys=me.prototype.ua;me.prototype.getValues=me.prototype.Za;Cg.prototype.executeSql=Cg.prototype.executeSql;Bg.prototype.executeSql=Bg.prototype.executeSql;kf.prototype.addEventListener=kf.prototype.ma;kf.prototype.removeEventListener=kf.prototype.removeEventListener;function Ah(){this.a=na()}var Bh=new Ah;Ah.prototype.get=s("a");function Ch(a){this.e=a||"";this.f=Bh}Ch.prototype.a=!0;Ch.prototype.b=!1;function Dh(a){a=new Date(a.g);return Eh(a.getFullYear()-2E3)+Eh(a.getMonth()+1)+Eh(a.getDate())+" "+Eh(a.getHours())+":"+Eh(a.getMinutes())+":"+Eh(a.getSeconds())+"."+Eh(Math.floor(a.getMilliseconds()/10))}function Eh(a){return 10>a?"0"+a:String(a)}function Fh(a,b){var c=(a.g-b)/1E3,d=c.toFixed(3),e=0;if(1>c)e=2;else for(;100>c;)e++,c*=10;for(;0<e--;)d=" "+d;return d}function Gh(a){Ch.call(this,a)}C(Gh,Ch);Gh.prototype.b=!0;
Gh.prototype.d=function(a){var b;switch(a.f.value){case Ub.value:b="dbg-sh";break;case Vb.value:b="dbg-sev";break;case Wb.value:b="dbg-w";break;case Xb.value:b="dbg-i";break;default:b="dbg-f"}var c=[];c.push(this.e," ");this.a&&c.push("[",Dh(a),"] ");c.push("[",Ba(Fh(a,this.f.get())),"s] ");c.push("[",ua(a.d),"] ");c.push('<span class="',b,'">',ta(Ba(ua(a.e))));this.b&&a.b&&c.push("<br>",ta(Ba(a.a||"")));c.push("</span><br>");return c.join("")};function Hh(a){Ch.call(this,a)}C(Hh,Ch);
Hh.prototype.d=function(a){var b=[];b.push(this.e," ");this.a&&b.push("[",Dh(a),"] ");b.push("[",Fh(a,this.f.get()),"s] ");b.push("[",a.d,"] ");b.push(a.e,"\n");this.b&&a.b&&b.push(a.a,"\n");return b.join("")};function Ih(){this.f=la(this.g,this);this.a=new Hh;this.a.a=!1;this.b=this.a.b=!1;this.d="";this.e={}}Ih.prototype.g=function(a){if(!this.e[a.d]){var b=this.a.d(a),c=Jh;if(c)switch(a.f){case Ub:Kh(c,"info",b);break;case Vb:Kh(c,"error",b);break;case Wb:Kh(c,"warn",b);break;default:Kh(c,"debug",b)}else window.opera?window.opera.postError(b):this.d+=b}};var Jh=window.console;function Kh(a,b,c){if(a[b])a[b](c);else a.log(c)};var Lh,Mh=!wb||wb&&9<=Lb;!xb&&!wb||wb&&wb&&9<=Lb||xb&&Jb("1.9.1");wb&&Jb("9");function Nh(a,b){var c;c=a.className;c=y(c)&&c.match(/\S+/g)||[];for(var d=Sa(arguments,1),e=c.length+d.length,f=c,g=0;g<d.length;g++)0<=Ja(f,d[g])||f.push(d[g]);a.className=c.join(" ");return c.length==e};function Oh(a,b){cb(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in Ph?a.setAttribute(Ph[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var Ph={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function Qh(a,b,c){function d(c){c&&b.appendChild(y(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];!x(f)||B(f)&&0<f.nodeType?d(f):Ka(Rh(f)?Ra(f):f,d)}}function Rh(a){if(a&&"number"==typeof a.length){if(B(a))return"function"==typeof a.item||"string"==typeof a.item;if(fa(a))return"function"==typeof a.item}return!1}function Sh(a){this.a=a||u.document||document}
function Th(a,b){var c;c=a.a;var d=b&&"*"!=b?b.toUpperCase():"";c.querySelectorAll&&c.querySelector&&d?c=c.querySelectorAll(d+""):c=c.getElementsByTagName(d||"*");return c}
Sh.prototype.b=function(a,b,c){var d=this.a,e=arguments,f=e[0],g=e[1];if(!Mh&&g&&(g.name||g.type)){f=["<",f];g.name&&f.push(' name="',ua(g.name),'"');if(g.type){f.push(' type="',ua(g.type),'"');var h={};fb(h,g);delete h.type;g=h}f.push(">");f=f.join("")}f=d.createElement(f);g&&(y(g)?f.className=g:w(g)?Nh.apply(null,[f].concat(g)):Oh(f,g));2<e.length&&Qh(d,f,e);return f};
Sh.prototype.contains=function(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a};function Uh(a){this.f=la(this.g,this);this.b=new Gh;this.d=this.b.a=!1;this.a=a;this.e=this.a.ownerDocument||this.a.document;var b=(a=this.a)?new Sh(9==a.nodeType?a:a.ownerDocument||a.document):Lh||(Lh=new Sh),c=null;wb?(a=c=b.a.createStyleSheet(),wb?a.cssText=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}":
a.innerHTML=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}"):(a=Th(b,"head")[0],a||(c=Th(b,"body")[0],a=b.b("head"),c.parentNode.insertBefore(a,c)),b=c=b.b("style"),wb?b.cssText=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}":
b.innerHTML=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}",a.appendChild(c));this.a.className+=" logdiv"}
Uh.prototype.g=function(a){var b=100>=this.a.scrollHeight-this.a.scrollTop-this.a.clientHeight,c=this.e.createElement("div");c.className="logmsg";c.innerHTML=this.b.d(a);this.a.appendChild(c);b&&(this.a.scrollTop=this.a.scrollHeight)};Uh.prototype.clear=function(){this.a.innerHTML=""};var Vh=null,Wh=null;J("ydn.debug");oa("ydn.debug.log",function(a,b,c){if(ea(b))b=new Tb("log",b);else if(y(b)){b=b.toUpperCase();if(!cc){cc={};for(var d=0,e;e=bc[d];d++)cc[e.value]=e,cc[e.name]=e}b=cc[b]||null}else b=Zb;J(a||"ydn").b=b;v(c)?Wh||(a=Wh=new Uh(c),!0!=a.d&&(c=jc(),b=a.f,c.a||(c.a=[]),c.a.push(b),a.d=!0),jc().b=Wb):Vh||Wh||(a=Vh=new Ih,!0!=a.b&&(c=jc(),b=a.f,c.a||(c.a=[]),c.a.push(b),a.b=!0),jc().b=Wb)});oa("ydn.db.Storage",wh);})();

                //# sourceMappingURL=ydn.db-dev.js.map
            